/*
 Bootstrap v3.2.0 (http://getbootstrap.com)
 Copyright 2011-2014 Twitter, Inc.
 Licensed under MIT (https://github.com/twbs/bootstrap/blob/master/LICENSE)
 jQuery Validation Plugin - v1.11.1 - 3/22/2013\n* https://github.com/jzaefferer/jquery-validation
 Copyright (c) 2013 JÃ¶rn Zaefferer; Licensed MIT  bootstrap-fileinput v4.3.9
 http://plugins.krajee.com/file-input

 Author: Kartik Visweswaran
 Copyright: 2014 - 2017, Kartik Visweswaran, Krajee.com

 Licensed under the BSD 3-Clause
 https://github.com/kartik-v/bootstrap-fileinput/blob/master/LICENSE.md


 FileInput French Translations

 This file must be loaded after 'fileinput.js'. Patterns in braces '{}', or
 any HTML markup tags in the messages must not be converted or translated.

 @see http://github.com/kartik-v/bootstrap-fileinput

 NOTE: this file must be saved in UTF-8 encoding.
 FileInput Spanish Translations

 This file must be loaded after 'fileinput.js'. Patterns in braces '{}', or
 any HTML markup tags in the messages must not be converted or translated.

 @see http://github.com/kartik-v/bootstrap-fileinput

 NOTE: this file must be saved in UTF-8 encoding.
*/
if("undefined"==typeof jQuery)throw Error("Bootstrap's JavaScript requires jQuery");
+function(d){function c(){var c=document.createElement("bootstrap"),a={WebkitTransition:"webkitTransitionEnd",MozTransition:"transitionend",OTransition:"oTransitionEnd otransitionend",transition:"transitionend"},b;for(b in a)if(void 0!==c.style[b])return{end:a[b]};return!1}d.fn.emulateTransitionEnd=function(c){var a=!1,b=this;d(this).one("bsTransitionEnd",function(){a=!0});return setTimeout(function(){a||d(b).trigger(d.support.transition.end)},c),this};d(function(){d.support.transition=c();d.support.transition&&
(d.event.special.bsTransitionEnd={bindType:d.support.transition.end,delegateType:d.support.transition.end,handle:function(c){return d(c.target).is(this)?c.handleObj.handler.apply(this,arguments):void 0}})})}(jQuery);
+function(d){var c=function(a){d(a).on("click",'[data-dismiss="alert"]',this.close)};c.VERSION="3.2.0";c.prototype.close=function(a){function b(){h.detach().trigger("closed.bs.alert").remove()}var g=d(this),c=g.attr("data-target");c||(c=g.attr("href"),c=c&&c.replace(/.*(?=#[^\s]*$)/,""));var h=d(c);a&&a.preventDefault();h.length||(h=g.hasClass("alert")?g:g.parent());h.trigger(a=d.Event("close.bs.alert"));a.isDefaultPrevented()||(h.removeClass("in"),d.support.transition&&h.hasClass("fade")?h.one("bsTransitionEnd",
b).emulateTransitionEnd(150):b())};var f=d.fn.alert;d.fn.alert=function(a){return this.each(function(){var b=d(this),g=b.data("bs.alert");g||b.data("bs.alert",g=new c(this));"string"==typeof a&&g[a].call(b)})};d.fn.alert.Constructor=c;d.fn.alert.noConflict=function(){return d.fn.alert=f,this};d(document).on("click.bs.alert.data-api",'[data-dismiss="alert"]',c.prototype.close)}(jQuery);
+function(d){function c(a){return this.each(function(){var b=d(this),c=b.data("bs.button"),h="object"==typeof a&&a;c||b.data("bs.button",c=new f(this,h));"toggle"==a?c.toggle():a&&c.setState(a)})}var f=function(a,g){this.$element=d(a);this.options=d.extend({},f.DEFAULTS,g);this.isLoading=!1};f.VERSION="3.2.0";f.DEFAULTS={loadingText:"loading..."};f.prototype.setState=function(a){var b=this.$element,c=b.is("input")?"val":"html",h=b.data();a+="Text";null==h.resetText&&b.data("resetText",b[c]());b[c](null==
h[a]?this.options[a]:h[a]);setTimeout(d.proxy(function(){"loadingText"==a?(this.isLoading=!0,b.addClass("disabled").attr("disabled","disabled")):this.isLoading&&(this.isLoading=!1,b.removeClass("disabled").removeAttr("disabled"))},this),0)};f.prototype.toggle=function(){var a=!0,g=this.$element.closest('[data-toggle="buttons"]');if(g.length){var c=this.$element.find("input");"radio"==c.prop("type")&&(c.prop("checked")&&this.$element.hasClass("active")?a=!1:g.find(".active").removeClass("active"));
a&&c.prop("checked",!this.$element.hasClass("active")).trigger("change")}a&&this.$element.toggleClass("active")};var a=d.fn.button;d.fn.button=c;d.fn.button.Constructor=f;d.fn.button.noConflict=function(){return d.fn.button=a,this};d(document).on("click.bs.button.data-api",'[data-toggle^="button"]',function(a){var b=d(a.target);b.hasClass("btn")||(b=b.closest(".btn"));c.call(b,"toggle");a.preventDefault()})}(jQuery);
+function(d){function c(a){return this.each(function(){var b=d(this),c=b.data("bs.carousel"),h=d.extend({},f.DEFAULTS,b.data(),"object"==typeof a&&a),k="string"==typeof a?a:h.slide;c||b.data("bs.carousel",c=new f(this,h));"number"==typeof a?c.to(a):k?c[k]():h.interval&&c.pause().cycle()})}var f=function(a,c){this.$element=d(a).on("keydown.bs.carousel",d.proxy(this.keydown,this));this.$indicators=this.$element.find(".carousel-indicators");this.options=c;this.paused=this.sliding=this.interval=this.$active=
this.$items=null;"hover"==this.options.pause&&this.$element.on("mouseenter.bs.carousel",d.proxy(this.pause,this)).on("mouseleave.bs.carousel",d.proxy(this.cycle,this))};f.VERSION="3.2.0";f.DEFAULTS={interval:5E3,pause:"hover",wrap:!0};f.prototype.keydown=function(a){switch(a.which){case 37:this.prev();break;case 39:this.next();break;default:return}a.preventDefault()};f.prototype.cycle=function(a){return a||(this.paused=!1),this.interval&&clearInterval(this.interval),this.options.interval&&!this.paused&&
(this.interval=setInterval(d.proxy(this.next,this),this.options.interval)),this};f.prototype.getItemIndex=function(a){return this.$items=a.parent().children(".item"),this.$items.index(a||this.$active)};f.prototype.to=function(a){var b=this,c=this.getItemIndex(this.$active=this.$element.find(".item.active"));return a>this.$items.length-1||0>a?void 0:this.sliding?this.$element.one("slid.bs.carousel",function(){b.to(a)}):c==a?this.pause().cycle():this.slide(a>c?"next":"prev",d(this.$items[a]))};f.prototype.pause=
function(a){return a||(this.paused=!0),this.$element.find(".next, .prev").length&&d.support.transition&&(this.$element.trigger(d.support.transition.end),this.cycle(!0)),this.interval=clearInterval(this.interval),this};f.prototype.next=function(){return this.sliding?void 0:this.slide("next")};f.prototype.prev=function(){return this.sliding?void 0:this.slide("prev")};f.prototype.slide=function(a,c){var b=this.$element.find(".item.active"),g=c||b[a](),f=this.interval,l="next"==a?"left":"right",m="next"==
a?"first":"last",n=this;if(!g.length){if(!this.options.wrap)return;g=this.$element.find(".item")[m]()}if(g.hasClass("active"))return this.sliding=!1;m=g[0];var u=d.Event("slide.bs.carousel",{relatedTarget:m,direction:l});if(this.$element.trigger(u),!u.isDefaultPrevented()){if(this.sliding=!0,f&&this.pause(),this.$indicators.length)this.$indicators.find(".active").removeClass("active"),(u=d(this.$indicators.children()[this.getItemIndex(g)]))&&u.addClass("active");var r=d.Event("slid.bs.carousel",{relatedTarget:m,
direction:l});return d.support.transition&&this.$element.hasClass("slide")?(g.addClass(a),g[0].offsetWidth,b.addClass(l),g.addClass(l),b.one("bsTransitionEnd",function(){g.removeClass([a,l].join(" ")).addClass("active");b.removeClass(["active",l].join(" "));n.sliding=!1;setTimeout(function(){n.$element.trigger(r)},0)}).emulateTransitionEnd(1E3*b.css("transition-duration").slice(0,-1))):(b.removeClass("active"),g.addClass("active"),this.sliding=!1,this.$element.trigger(r)),f&&this.cycle(),this}};var a=
d.fn.carousel;d.fn.carousel=c;d.fn.carousel.Constructor=f;d.fn.carousel.noConflict=function(){return d.fn.carousel=a,this};d(document).on("click.bs.carousel.data-api","[data-slide], [data-slide-to]",function(a){var b,e=d(this),h=d(e.attr("data-target")||(b=e.attr("href"))&&b.replace(/.*(?=#[^\s]+$)/,""));h.hasClass("carousel")&&(b=d.extend({},h.data(),e.data()),(e=e.attr("data-slide-to"))&&(b.interval=!1),c.call(h,b),e&&h.data("bs.carousel").to(e),a.preventDefault())});d(window).on("load",function(){d('[data-ride="carousel"]').each(function(){var a=
d(this);c.call(a,a.data())})})}(jQuery);
+function(d){function c(a){return this.each(function(){var b=d(this),c=b.data("bs.collapse"),h=d.extend({},f.DEFAULTS,b.data(),"object"==typeof a&&a);!c&&h.toggle&&"show"==a&&(a=!a);c||b.data("bs.collapse",c=new f(this,h));"string"==typeof a&&c[a]()})}var f=function(a,c){this.$element=d(a);this.options=d.extend({},f.DEFAULTS,c);this.transitioning=null;this.options.parent&&(this.$parent=d(this.options.parent));this.options.toggle&&this.toggle()};f.VERSION="3.2.0";f.DEFAULTS={toggle:!0};f.prototype.dimension=
function(){return this.$element.hasClass("width")?"width":"height"};f.prototype.show=function(){if(!this.transitioning&&!this.$element.hasClass("in")){var a=d.Event("show.bs.collapse");if(this.$element.trigger(a),!a.isDefaultPrevented()){if((a=this.$parent&&this.$parent.find("> .panel > .in"))&&a.length){var g=a.data("bs.collapse");if(g&&g.transitioning)return;c.call(a,"hide");g||a.data("bs.collapse",null)}var e=this.dimension();this.$element.removeClass("collapse").addClass("collapsing")[e](0);this.transitioning=
1;a=function(){this.$element.removeClass("collapsing").addClass("collapse in")[e]("");this.transitioning=0;this.$element.trigger("shown.bs.collapse")};if(!d.support.transition)return a.call(this);g=d.camelCase(["scroll",e].join("-"));this.$element.one("bsTransitionEnd",d.proxy(a,this)).emulateTransitionEnd(350)[e](this.$element[0][g])}}};f.prototype.hide=function(){if(!this.transitioning&&this.$element.hasClass("in")){var a=d.Event("hide.bs.collapse");if(this.$element.trigger(a),!a.isDefaultPrevented()){a=
this.dimension();this.$element[a](this.$element[a]())[0].offsetHeight;this.$element.addClass("collapsing").removeClass("collapse").removeClass("in");this.transitioning=1;var c=function(){this.transitioning=0;this.$element.trigger("hidden.bs.collapse").removeClass("collapsing").addClass("collapse")};return d.support.transition?void this.$element[a](0).one("bsTransitionEnd",d.proxy(c,this)).emulateTransitionEnd(350):c.call(this)}}};f.prototype.toggle=function(){this[this.$element.hasClass("in")?"hide":
"show"]()};var a=d.fn.collapse;d.fn.collapse=c;d.fn.collapse.Constructor=f;d.fn.collapse.noConflict=function(){return d.fn.collapse=a,this};d(document).on("click.bs.collapse.data-api",'[data-toggle="collapse"]',function(a){var b,e=d(this);a=e.attr("data-target")||a.preventDefault()||(b=e.attr("href"))&&b.replace(/.*(?=#[^\s]+$)/,"");b=d(a);var h=(a=b.data("bs.collapse"))?"toggle":e.data(),f=e.attr("data-parent"),l=f&&d(f);a&&a.transitioning||(l&&l.find('[data-toggle="collapse"][data-parent="'+f+'"]').not(e).addClass("collapsed"),
e[b.hasClass("in")?"addClass":"removeClass"]("collapsed"));c.call(b,h)})}(jQuery);
+function(d){function c(c){c&&3===c.which||(d(a).remove(),d(b).each(function(){var a=f(d(this)),b={relatedTarget:this};a.hasClass("open")&&(a.trigger(c=d.Event("hide.bs.dropdown",b)),c.isDefaultPrevented()||a.removeClass("open").trigger("hidden.bs.dropdown",b))}))}function f(a){var b=a.attr("data-target");b||(b=a.attr("href"),b=b&&/#[A-Za-z]/.test(b)&&b.replace(/.*(?=#[^\s]*$)/,""));return(b=b&&d(b))&&b.length?b:a.parent()}var a=".dropdown-backdrop",b='[data-toggle="dropdown"]',g=function(a){d(a).on("click.bs.dropdown",
this.toggle)};g.VERSION="3.2.0";g.prototype.toggle=function(a){var b=d(this);if(!b.is(".disabled, :disabled")){var g=f(b),e=g.hasClass("open");if(c(),!e){"ontouchstart"in document.documentElement&&!g.closest(".navbar-nav").length&&d('<div class="dropdown-backdrop"/>').insertAfter(d(this)).on("click",c);e={relatedTarget:this};if(g.trigger(a=d.Event("show.bs.dropdown",e)),a.isDefaultPrevented())return;b.trigger("focus");g.toggleClass("open").trigger("shown.bs.dropdown",e)}return!1}};g.prototype.keydown=
function(a){if(/(38|40|27)/.test(a.keyCode)){var c=d(this);if(a.preventDefault(),a.stopPropagation(),!c.is(".disabled, :disabled")){var g=f(c),e=g.hasClass("open");if(!e||e&&27==a.keyCode)return 27==a.which&&g.find(b).trigger("focus"),c.trigger("click");c=g.find('[role="menu"] li:not(.divider):visible a, [role="listbox"] li:not(.divider):visible a');c.length&&(g=c.index(c.filter(":focus")),38==a.keyCode&&0<g&&g--,40==a.keyCode&&g<c.length-1&&g++,~g||(g=0),c.eq(g).trigger("focus"))}}};var e=d.fn.dropdown;
d.fn.dropdown=function(a){return this.each(function(){var b=d(this),c=b.data("bs.dropdown");c||b.data("bs.dropdown",c=new g(this));"string"==typeof a&&c[a].call(b)})};d.fn.dropdown.Constructor=g;d.fn.dropdown.noConflict=function(){return d.fn.dropdown=e,this};d(document).on("click.bs.dropdown.data-api",c).on("click.bs.dropdown.data-api",".dropdown form",function(a){a.stopPropagation()}).on("click.bs.dropdown.data-api",b,g.prototype.toggle).on("keydown.bs.dropdown.data-api",b+', [role="menu"], [role="listbox"]',
g.prototype.keydown)}(jQuery);
+function(d){function c(a,c){return this.each(function(){var b=d(this),g=b.data("bs.modal"),k=d.extend({},f.DEFAULTS,b.data(),"object"==typeof a&&a);g||b.data("bs.modal",g=new f(this,k));"string"==typeof a?g[a](c):k.show&&g.show(c)})}var f=function(a,c){this.options=c;this.$body=d(document.body);this.$element=d(a);this.$backdrop=this.isShown=null;this.scrollbarWidth=0;this.options.remote&&this.$element.find(".modal-content").load(this.options.remote,d.proxy(function(){this.$element.trigger("loaded.bs.modal")},this))};
f.VERSION="3.2.0";f.DEFAULTS={backdrop:!0,keyboard:!0,show:!0};f.prototype.toggle=function(a){return this.isShown?this.hide():this.show(a)};f.prototype.show=function(a){var b=this,c=d.Event("show.bs.modal",{relatedTarget:a});this.$element.trigger(c);this.isShown||c.isDefaultPrevented()||(this.isShown=!0,this.checkScrollbar(),this.$body.addClass("modal-open"),this.setScrollbar(),this.escape(),this.$element.on("click.dismiss.bs.modal",'[data-dismiss="modal"]',d.proxy(this.hide,this)),this.backdrop(function(){var c=
d.support.transition&&b.$element.hasClass("fade");b.$element.parent().length||b.$element.appendTo(b.$body);b.$element.show().scrollTop(0);c&&b.$element[0].offsetWidth;b.$element.addClass("in").attr("aria-hidden",!1);b.enforceFocus();var g=d.Event("shown.bs.modal",{relatedTarget:a});c?b.$element.find(".modal-dialog").one("bsTransitionEnd",function(){b.$element.trigger("focus").trigger(g)}).emulateTransitionEnd(300):b.$element.trigger("focus").trigger(g)}))};f.prototype.hide=function(a){a&&a.preventDefault();
a=d.Event("hide.bs.modal");this.$element.trigger(a);this.isShown&&!a.isDefaultPrevented()&&(this.isShown=!1,this.$body.removeClass("modal-open"),this.resetScrollbar(),this.escape(),d(document).off("focusin.bs.modal"),this.$element.removeClass("in").attr("aria-hidden",!0).off("click.dismiss.bs.modal"),d.support.transition&&this.$element.hasClass("fade")?this.$element.one("bsTransitionEnd",d.proxy(this.hideModal,this)).emulateTransitionEnd(300):this.hideModal())};f.prototype.enforceFocus=function(){d(document).off("focusin.bs.modal").on("focusin.bs.modal",
d.proxy(function(a){this.$element[0]===a.target||this.$element.has(a.target).length||this.$element.trigger("focus")},this))};f.prototype.escape=function(){this.isShown&&this.options.keyboard?this.$element.on("keyup.dismiss.bs.modal",d.proxy(function(a){27==a.which&&this.hide()},this)):this.isShown||this.$element.off("keyup.dismiss.bs.modal")};f.prototype.hideModal=function(){var a=this;this.$element.hide();this.backdrop(function(){a.$element.trigger("hidden.bs.modal")})};f.prototype.removeBackdrop=
function(){this.$backdrop&&this.$backdrop.remove();this.$backdrop=null};f.prototype.backdrop=function(a){var b=this,c=this.$element.hasClass("fade")?"fade":"";if(this.isShown&&this.options.backdrop){var h=d.support.transition&&c;if(this.$backdrop=d('<div class="modal-backdrop '+c+'" />').appendTo(this.$body),this.$element.on("click.dismiss.bs.modal",d.proxy(function(a){a.target===a.currentTarget&&("static"==this.options.backdrop?this.$element[0].focus.call(this.$element[0]):this.hide.call(this))},
this)),h&&this.$backdrop[0].offsetWidth,this.$backdrop.addClass("in"),a)h?this.$backdrop.one("bsTransitionEnd",a).emulateTransitionEnd(150):a()}else!this.isShown&&this.$backdrop?(this.$backdrop.removeClass("in"),c=function(){b.removeBackdrop();a&&a()},d.support.transition&&this.$element.hasClass("fade")?this.$backdrop.one("bsTransitionEnd",c).emulateTransitionEnd(150):c()):a&&a()};f.prototype.checkScrollbar=function(){document.body.clientWidth>=window.innerWidth||(this.scrollbarWidth=this.scrollbarWidth||
this.measureScrollbar())};f.prototype.setScrollbar=function(){var a=parseInt(this.$body.css("padding-right")||0,10);this.scrollbarWidth&&this.$body.css("padding-right",a+this.scrollbarWidth)};f.prototype.resetScrollbar=function(){this.$body.css("padding-right","")};f.prototype.measureScrollbar=function(){var a=document.createElement("div");a.className="modal-scrollbar-measure";this.$body.append(a);var c=a.offsetWidth-a.clientWidth;return this.$body[0].removeChild(a),c};var a=d.fn.modal;d.fn.modal=
c;d.fn.modal.Constructor=f;d.fn.modal.noConflict=function(){return d.fn.modal=a,this};d(document).on("click.bs.modal.data-api",'[data-toggle="modal"]',function(a){var b=d(this),e=b.attr("href"),h=d(b.attr("data-target")||e&&e.replace(/.*(?=#[^\s]+$)/,""));e=h.data("bs.modal")?"toggle":d.extend({remote:!/#/.test(e)&&e},h.data(),b.data());b.is("a")&&a.preventDefault();h.one("show.bs.modal",function(a){a.isDefaultPrevented()||h.one("hidden.bs.modal",function(){b.is(":visible")&&b.trigger("focus")})});
c.call(h,e,this)})}(jQuery);
+function(d){var c=function(a,b){this.type=this.options=this.enabled=this.timeout=this.hoverState=this.$element=null;this.init("tooltip",a,b)};c.VERSION="3.2.0";c.DEFAULTS={animation:!0,placement:"top",selector:!1,template:'<div class="tooltip" role="tooltip"><div class="tooltip-arrow"></div><div class="tooltip-inner"></div></div>',trigger:"hover focus",title:"",delay:0,html:!1,container:!1,viewport:{selector:"body",padding:0}};c.prototype.init=function(a,b,c){this.enabled=!0;this.type=a;this.$element=
d(b);this.options=this.getOptions(c);this.$viewport=this.options.viewport&&d(this.options.viewport.selector||this.options.viewport);a=this.options.trigger.split(" ");for(b=a.length;b--;)if(c=a[b],"click"==c)this.$element.on("click."+this.type,this.options.selector,d.proxy(this.toggle,this));else if("manual"!=c){var g="hover"==c?"mouseleave":"focusout";this.$element.on(("hover"==c?"mouseenter":"focusin")+"."+this.type,this.options.selector,d.proxy(this.enter,this));this.$element.on(g+"."+this.type,
this.options.selector,d.proxy(this.leave,this))}this.options.selector?this._options=d.extend({},this.options,{trigger:"manual",selector:""}):this.fixTitle()};c.prototype.getDefaults=function(){return c.DEFAULTS};c.prototype.getOptions=function(a){return a=d.extend({},this.getDefaults(),this.$element.data(),a),a.delay&&"number"==typeof a.delay&&(a.delay={show:a.delay,hide:a.delay}),a};c.prototype.getDelegateOptions=function(){var a={},b=this.getDefaults();return this._options&&d.each(this._options,
function(c,d){b[c]!=d&&(a[c]=d)}),a};c.prototype.enter=function(a){var b=a instanceof this.constructor?a:d(a.currentTarget).data("bs."+this.type);return b||(b=new this.constructor(a.currentTarget,this.getDelegateOptions()),d(a.currentTarget).data("bs."+this.type,b)),clearTimeout(b.timeout),b.hoverState="in",b.options.delay&&b.options.delay.show?void(b.timeout=setTimeout(function(){"in"==b.hoverState&&b.show()},b.options.delay.show)):b.show()};c.prototype.leave=function(a){var b=a instanceof this.constructor?
a:d(a.currentTarget).data("bs."+this.type);return b||(b=new this.constructor(a.currentTarget,this.getDelegateOptions()),d(a.currentTarget).data("bs."+this.type,b)),clearTimeout(b.timeout),b.hoverState="out",b.options.delay&&b.options.delay.hide?void(b.timeout=setTimeout(function(){"out"==b.hoverState&&b.hide()},b.options.delay.hide)):b.hide()};c.prototype.show=function(){var a=d.Event("show.bs."+this.type);if(this.hasContent()&&this.enabled){this.$element.trigger(a);var b=d.contains(document.documentElement,
this.$element[0]);if(!a.isDefaultPrevented()&&b){var c=this;a=this.tip();b=this.getUID(this.type);this.setContent();a.attr("id",b);this.$element.attr("aria-describedby",b);this.options.animation&&a.addClass("fade");b="function"==typeof this.options.placement?this.options.placement.call(this,a[0],this.$element[0]):this.options.placement;var e=/\s?auto?\s?/i,h=e.test(b);h&&(b=b.replace(e,"")||"top");a.detach().css({top:0,left:0,display:"block"}).addClass(b).data("bs."+this.type,this);this.options.container?
a.appendTo(this.options.container):a.insertAfter(this.$element);e=this.getPosition();var f=a[0].offsetWidth,l=a[0].offsetHeight;if(h){h=b;var m=this.$element.parent();m=this.getPosition(m);b="bottom"==b&&e.top+e.height+l-m.scroll>m.height?"top":"top"==b&&0>e.top-m.scroll-l?"bottom":"right"==b&&e.right+f>m.width?"left":"left"==b&&e.left-f<m.left?"right":b;a.removeClass(h).addClass(b)}e=this.getCalculatedOffset(b,e,f,l);this.applyPlacement(e,b);b=function(){c.$element.trigger("shown.bs."+c.type);c.hoverState=
null};d.support.transition&&this.$tip.hasClass("fade")?a.one("bsTransitionEnd",b).emulateTransitionEnd(150):b()}}};c.prototype.applyPlacement=function(a,b){var c=this.tip(),e=c[0].offsetWidth,h=c[0].offsetHeight,f=parseInt(c.css("margin-top"),10),l=parseInt(c.css("margin-left"),10);isNaN(f)&&(f=0);isNaN(l)&&(l=0);a.top+=f;a.left+=l;d.offset.setOffset(c[0],d.extend({using:function(a){c.css({top:Math.round(a.top),left:Math.round(a.left)})}},a),0);c.addClass("in");l=c[0].offsetWidth;var m=c[0].offsetHeight;
"top"==b&&m!=h&&(a.top=a.top+h-m);f=this.getViewportAdjustedDelta(b,a,l,m);f.left?a.left+=f.left:a.top+=f.top;e=f.left?2*f.left-e+l:2*f.top-h+m;h=f.left?"left":"top";f=f.left?"offsetWidth":"offsetHeight";c.offset(a);this.replaceArrow(e,c[0][f],h)};c.prototype.replaceArrow=function(a,b,c){this.arrow().css(c,a?50*(1-a/b)+"%":"")};c.prototype.setContent=function(){var a=this.tip(),b=this.getTitle();a.find(".tooltip-inner")[this.options.html?"html":"text"](b);a.removeClass("fade in top bottom left right")};
c.prototype.hide=function(){function a(){"in"!=b.hoverState&&c.detach();b.$element.trigger("hidden.bs."+b.type)}var b=this,c=this.tip(),e=d.Event("hide.bs."+this.type);return this.$element.removeAttr("aria-describedby"),this.$element.trigger(e),e.isDefaultPrevented()?void 0:(c.removeClass("in"),d.support.transition&&this.$tip.hasClass("fade")?c.one("bsTransitionEnd",a).emulateTransitionEnd(150):a(),this.hoverState=null,this)};c.prototype.fixTitle=function(){var a=this.$element;(a.attr("title")||"string"!=
typeof a.attr("data-original-title"))&&a.attr("data-original-title",a.attr("title")||"").attr("title","")};c.prototype.hasContent=function(){return this.getTitle()};c.prototype.getPosition=function(a){a=a||this.$element;var b=a[0],c="BODY"==b.tagName;return d.extend({},"function"==typeof b.getBoundingClientRect?b.getBoundingClientRect():null,{scroll:c?document.documentElement.scrollTop||document.body.scrollTop:a.scrollTop(),width:c?d(window).width():a.outerWidth(),height:c?d(window).height():a.outerHeight()},
c?{top:0,left:0}:a.offset())};c.prototype.getCalculatedOffset=function(a,b,c,d){return"bottom"==a?{top:b.top+b.height,left:b.left+b.width/2-c/2}:"top"==a?{top:b.top-d,left:b.left+b.width/2-c/2}:"left"==a?{top:b.top+b.height/2-d/2,left:b.left-c}:{top:b.top+b.height/2-d/2,left:b.left+b.width}};c.prototype.getViewportAdjustedDelta=function(a,b,c,d){var g={top:0,left:0};if(!this.$viewport)return g;var e=this.options.viewport&&this.options.viewport.padding||0,f=this.getPosition(this.$viewport);/right|left/.test(a)?
(c=b.top-e-f.scroll,b=b.top+e-f.scroll+d,c<f.top?g.top=f.top-c:b>f.top+f.height&&(g.top=f.top+f.height-b)):(d=b.left-e,b=b.left+e+c,d<f.left?g.left=f.left-d:b>f.width&&(g.left=f.left+f.width-b));return g};c.prototype.getTitle=function(){var a=this.$element,b=this.options;return a.attr("data-original-title")||("function"==typeof b.title?b.title.call(a[0]):b.title)};c.prototype.getUID=function(a){do a+=~~(1E6*Math.random());while(document.getElementById(a));return a};c.prototype.tip=function(){return this.$tip=
this.$tip||d(this.options.template)};c.prototype.arrow=function(){return this.$arrow=this.$arrow||this.tip().find(".tooltip-arrow")};c.prototype.validate=function(){this.$element[0].parentNode||(this.hide(),this.$element=null,this.options=null)};c.prototype.enable=function(){this.enabled=!0};c.prototype.disable=function(){this.enabled=!1};c.prototype.toggleEnabled=function(){this.enabled=!this.enabled};c.prototype.toggle=function(a){var b=this;a&&(b=d(a.currentTarget).data("bs."+this.type),b||(b=
new this.constructor(a.currentTarget,this.getDelegateOptions()),d(a.currentTarget).data("bs."+this.type,b)));b.tip().hasClass("in")?b.leave(b):b.enter(b)};c.prototype.destroy=function(){clearTimeout(this.timeout);this.hide().$element.off("."+this.type).removeData("bs."+this.type)};var f=d.fn.tooltip;d.fn.tooltip=function(a){return this.each(function(){var b=d(this),g=b.data("bs.tooltip"),e="object"==typeof a&&a;(g||"destroy"!=a)&&(g||b.data("bs.tooltip",g=new c(this,e)),"string"==typeof a&&g[a]())})};
d.fn.tooltip.Constructor=c;d.fn.tooltip.noConflict=function(){return d.fn.tooltip=f,this}}(jQuery);
+function(d){var c=function(a,b){this.init("popover",a,b)};if(!d.fn.tooltip)throw Error("Popover requires tooltip.js");c.VERSION="3.2.0";c.DEFAULTS=d.extend({},d.fn.tooltip.Constructor.DEFAULTS,{placement:"right",trigger:"click",content:"",template:'<div class="popover" role="tooltip"><div class="arrow"></div><h3 class="popover-title"></h3><div class="popover-content"></div></div>'});c.prototype=d.extend({},d.fn.tooltip.Constructor.prototype);c.prototype.constructor=c;c.prototype.getDefaults=function(){return c.DEFAULTS};
c.prototype.setContent=function(){var a=this.tip(),b=this.getTitle(),c=this.getContent();a.find(".popover-title")[this.options.html?"html":"text"](b);a.find(".popover-content").empty()[this.options.html?"string"==typeof c?"html":"append":"text"](c);a.removeClass("fade top bottom left right in");a.find(".popover-title").html()||a.find(".popover-title").hide()};c.prototype.hasContent=function(){return this.getTitle()||this.getContent()};c.prototype.getContent=function(){var a=this.$element,b=this.options;
return a.attr("data-content")||("function"==typeof b.content?b.content.call(a[0]):b.content)};c.prototype.arrow=function(){return this.$arrow=this.$arrow||this.tip().find(".arrow")};c.prototype.tip=function(){return this.$tip||(this.$tip=d(this.options.template)),this.$tip};var f=d.fn.popover;d.fn.popover=function(a){return this.each(function(){var b=d(this),g=b.data("bs.popover"),e="object"==typeof a&&a;(g||"destroy"!=a)&&(g||b.data("bs.popover",g=new c(this,e)),"string"==typeof a&&g[a]())})};d.fn.popover.Constructor=
c;d.fn.popover.noConflict=function(){return d.fn.popover=f,this}}(jQuery);
+function(d){function c(a,g){var b=d.proxy(this.process,this);this.$body=d("body");this.$scrollElement=d(d(a).is("body")?window:a);this.options=d.extend({},c.DEFAULTS,g);this.selector=(this.options.target||"")+" .nav li > a";this.offsets=[];this.targets=[];this.activeTarget=null;this.scrollHeight=0;this.$scrollElement.on("scroll.bs.scrollspy",b);this.refresh();this.process()}function f(a){return this.each(function(){var b=d(this),e=b.data("bs.scrollspy"),h="object"==typeof a&&a;e||b.data("bs.scrollspy",
e=new c(this,h));"string"==typeof a&&e[a]()})}c.VERSION="3.2.0";c.DEFAULTS={offset:10};c.prototype.getScrollHeight=function(){return this.$scrollElement[0].scrollHeight||Math.max(this.$body[0].scrollHeight,document.documentElement.scrollHeight)};c.prototype.refresh=function(){var a="offset",c=0;d.isWindow(this.$scrollElement[0])||(a="position",c=this.$scrollElement.scrollTop());this.offsets=[];this.targets=[];this.scrollHeight=this.getScrollHeight();var e=this;this.$body.find(this.selector).map(function(){var b=
d(this);b=b.data("target")||b.attr("href");var g=/^#./.test(b)&&d(b);return g&&g.length&&g.is(":visible")&&[[g[a]().top+c,b]]||null}).sort(function(a,b){return a[0]-b[0]}).each(function(){e.offsets.push(this[0]);e.targets.push(this[1])})};c.prototype.process=function(){var a,c=this.$scrollElement.scrollTop()+this.options.offset,d=this.getScrollHeight(),h=this.options.offset+d-this.$scrollElement.height(),f=this.offsets,l=this.targets,m=this.activeTarget;if(this.scrollHeight!=d&&this.refresh(),c>=
h)return m!=(a=l[l.length-1])&&this.activate(a);if(m&&c<=f[0])return m!=(a=l[0])&&this.activate(a);for(a=f.length;a--;)m!=l[a]&&c>=f[a]&&(!f[a+1]||c<=f[a+1])&&this.activate(l[a])};c.prototype.activate=function(a){this.activeTarget=a;d(this.selector).parentsUntil(this.options.target,".active").removeClass("active");a=d(this.selector+'[data-target="'+a+'"],'+this.selector+'[href="'+a+'"]').parents("li").addClass("active");a.parent(".dropdown-menu").length&&(a=a.closest("li.dropdown").addClass("active"));
a.trigger("activate.bs.scrollspy")};var a=d.fn.scrollspy;d.fn.scrollspy=f;d.fn.scrollspy.Constructor=c;d.fn.scrollspy.noConflict=function(){return d.fn.scrollspy=a,this};d(window).on("load.bs.scrollspy.data-api",function(){d('[data-spy="scroll"]').each(function(){var a=d(this);f.call(a,a.data())})})}(jQuery);
+function(d){function c(a){return this.each(function(){var b=d(this),c=b.data("bs.tab");c||b.data("bs.tab",c=new f(this));"string"==typeof a&&c[a]()})}var f=function(a){this.element=d(a)};f.VERSION="3.2.0";f.prototype.show=function(){var a=this.element,c=a.closest("ul:not(.dropdown-menu)"),e=a.data("target");if(e||(e=a.attr("href"),e=e&&e.replace(/.*(?=#[^\s]*$)/,"")),!a.parent("li").hasClass("active")){var h=c.find(".active:last a")[0],f=d.Event("show.bs.tab",{relatedTarget:h});(a.trigger(f),f.isDefaultPrevented())||
(e=d(e),this.activate(a.closest("li"),c),this.activate(e,e.parent(),function(){a.trigger({type:"shown.bs.tab",relatedTarget:h})}))}};f.prototype.activate=function(a,c,e){function b(){g.removeClass("active").find("> .dropdown-menu > .active").removeClass("active");a.addClass("active");f?(a[0].offsetWidth,a.addClass("in")):a.removeClass("fade");a.parent(".dropdown-menu")&&a.closest("li.dropdown").addClass("active");e&&e()}var g=c.find("> .active"),f=e&&d.support.transition&&g.hasClass("fade");f?g.one("bsTransitionEnd",
b).emulateTransitionEnd(150):b();g.removeClass("in")};var a=d.fn.tab;d.fn.tab=c;d.fn.tab.Constructor=f;d.fn.tab.noConflict=function(){return d.fn.tab=a,this};d(document).on("click.bs.tab.data-api",'[data-toggle="tab"], [data-toggle="pill"]',function(a){a.preventDefault();c.call(d(this),"show")})}(jQuery);
+function(d){function c(a){return this.each(function(){var b=d(this),c=b.data("bs.affix"),h="object"==typeof a&&a;c||b.data("bs.affix",c=new f(this,h));"string"==typeof a&&c[a]()})}var f=function(a,c){this.options=d.extend({},f.DEFAULTS,c);this.$target=d(this.options.target).on("scroll.bs.affix.data-api",d.proxy(this.checkPosition,this)).on("click.bs.affix.data-api",d.proxy(this.checkPositionWithEventLoop,this));this.$element=d(a);this.affixed=this.unpin=this.pinnedOffset=null;this.checkPosition()};
f.VERSION="3.2.0";f.RESET="affix affix-top affix-bottom";f.DEFAULTS={offset:0,target:window};f.prototype.getPinnedOffset=function(){if(this.pinnedOffset)return this.pinnedOffset;this.$element.removeClass(f.RESET).addClass("affix");var a=this.$target.scrollTop();return this.pinnedOffset=this.$element.offset().top-a};f.prototype.checkPositionWithEventLoop=function(){setTimeout(d.proxy(this.checkPosition,this),1)};f.prototype.checkPosition=function(){if(this.$element.is(":visible")){var a=d(document).height(),
c=this.$target.scrollTop(),e=this.$element.offset(),h=this.options.offset,k=h.top,l=h.bottom;"object"!=typeof h&&(l=k=h);"function"==typeof k&&(k=h.top(this.$element));"function"==typeof l&&(l=h.bottom(this.$element));c=null!=this.unpin&&c+this.unpin<=e.top?!1:null!=l&&e.top+this.$element.height()>=a-l?"bottom":null!=k&&k>=c?"top":!1;this.affixed!==c&&(null!=this.unpin&&this.$element.css("top",""),e="affix"+(c?"-"+c:""),h=d.Event(e+".bs.affix"),this.$element.trigger(h),h.isDefaultPrevented()||(this.affixed=
c,this.unpin="bottom"==c?this.getPinnedOffset():null,this.$element.removeClass(f.RESET).addClass(e).trigger(d.Event(e.replace("affix","affixed"))),"bottom"==c&&this.$element.offset({top:a-this.$element.height()-l})))}};var a=d.fn.affix;d.fn.affix=c;d.fn.affix.Constructor=f;d.fn.affix.noConflict=function(){return d.fn.affix=a,this};d(window).on("load",function(){d('[data-spy="affix"]').each(function(){var a=d(this),g=a.data();g.offset=g.offset||{};g.offsetBottom&&(g.offset.bottom=g.offsetBottom);g.offsetTop&&
(g.offset.top=g.offsetTop);c.call(a,g)})})}(jQuery);
(function(d){d.extend(d.fn,{validate:function(c){if(!this.length)return c&&c.debug&&window.console&&console.warn("Nothing selected, can't validate, returning nothing."),void 0;var f=d.data(this[0],"validator");return f?f:(this.attr("novalidate","novalidate"),f=new d.validator(c,this[0]),d.data(this[0],"validator",f),f.settings.onsubmit&&(this.validateDelegate(":submit","click",function(a){f.settings.submitHandler&&(f.submitButton=a.target);d(a.target).hasClass("cancel")&&(f.cancelSubmit=!0);void 0!==
d(a.target).attr("formnovalidate")&&(f.cancelSubmit=!0)}),this.submit(function(a){function b(){var b;return f.settings.submitHandler?(f.submitButton&&(b=d("<input type='hidden'/>").attr("name",f.submitButton.name).val(d(f.submitButton).val()).appendTo(f.currentForm)),f.settings.submitHandler.call(f,f.currentForm,a),f.submitButton&&b.remove(),!1):!0}return f.settings.debug&&a.preventDefault(),f.cancelSubmit?(f.cancelSubmit=!1,b()):f.form()?f.pendingRequest?(f.formSubmitted=!0,!1):b():(f.focusInvalid(),
!1)})),f)},valid:function(){if(d(this[0]).is("form"))return this.validate().form();var c=!0,f=d(this[0].form).validate();return this.each(function(){c=c&&f.element(this)}),c},removeAttrs:function(c){var f={},a=this;return d.each(c.split(/\s/),function(b,c){f[c]=a.attr(c);a.removeAttr(c)}),f},rules:function(c,f){var a=this[0];if(c){var b=d.data(a.form,"validator").settings,g=b.rules,e=d.validator.staticRules(a);switch(c){case "add":d.extend(e,d.validator.normalizeRule(f));delete e.messages;g[a.name]=
e;f.messages&&(b.messages[a.name]=d.extend(b.messages[a.name],f.messages));break;case "remove":if(!f)return delete g[a.name],e;var h={};return d.each(f.split(/\s/),function(a,b){h[b]=e[b];delete e[b]}),h}}a=d.validator.normalizeRules(d.extend({},d.validator.classRules(a),d.validator.attributeRules(a),d.validator.dataRules(a),d.validator.staticRules(a)),a);a.required&&(b=a.required,delete a.required,a=d.extend({required:b},a));return a}});d.extend(d.expr[":"],{blank:function(c){return!d.trim(""+d(c).val())},
filled:function(c){return!!d.trim(""+d(c).val())},unchecked:function(c){return!d(c).prop("checked")}});d.validator=function(c,f){this.settings=d.extend(!0,{},d.validator.defaults,c);this.currentForm=f;this.init()};d.validator.format=function(c,f){return 1===arguments.length?function(){var a=d.makeArray(arguments);return a.unshift(c),d.validator.format.apply(this,a)}:(2<arguments.length&&f.constructor!==Array&&(f=d.makeArray(arguments).slice(1)),f.constructor!==Array&&(f=[f]),d.each(f,function(a,b){c=
c.replace(RegExp("\\{"+a+"\\}","g"),function(){return b})}),c)};d.extend(d.validator,{defaults:{messages:{},groups:{},rules:{},errorClass:"error",validClass:"valid",errorElement:"label",focusInvalid:!0,errorContainer:d([]),errorLabelContainer:d([]),onsubmit:!0,ignore:":hidden",ignoreTitle:!1,onfocusin:function(c){this.lastActive=c;this.settings.focusCleanup&&!this.blockFocusCleanup&&(this.settings.unhighlight&&this.settings.unhighlight.call(this,c,this.settings.errorClass,this.settings.validClass),
this.addWrapper(this.errorsFor(c)).hide())},onfocusout:function(c){this.checkable(c)||!(c.name in this.submitted)&&this.optional(c)||this.element(c)},onkeyup:function(c,d){(9!==d.which||""!==this.elementValue(c))&&(c.name in this.submitted||c===this.lastElement)&&this.element(c)},onclick:function(c){c.name in this.submitted?this.element(c):c.parentNode.name in this.submitted&&this.element(c.parentNode)},highlight:function(c,f,a){"radio"===c.type?this.findByName(c.name).addClass(f).removeClass(a):
d(c).addClass(f).removeClass(a)},unhighlight:function(c,f,a){"radio"===c.type?this.findByName(c.name).removeClass(f).addClass(a):d(c).removeClass(f).addClass(a)}},setDefaults:function(c){d.extend(d.validator.defaults,c)},messages:{required:"This field is required.",remote:"Please fix this field.",email:"Please enter a valid email address.",url:"Please enter a valid URL.",date:"Please enter a valid date.",dateISO:"Please enter a valid date (ISO).",number:"Please enter a valid number.",digits:"Please enter only digits.",
creditcard:"Please enter a valid credit card number.",equalTo:"Please enter the same value again.",maxlength:d.validator.format("Please enter no more than {0} characters."),minlength:d.validator.format("Please enter at least {0} characters."),rangelength:d.validator.format("Please enter a value between {0} and {1} characters long."),range:d.validator.format("Please enter a value between {0} and {1}."),max:d.validator.format("Please enter a value less than or equal to {0}."),min:d.validator.format("Please enter a value greater than or equal to {0}.")},
autoCreateRanges:!1,prototype:{init:function(){function c(a){var b=d.data(this[0].form,"validator"),c="on"+a.type.replace(/^validate/,"");b.settings[c]&&b.settings[c].call(b,this[0],a)}this.labelContainer=d(this.settings.errorLabelContainer);this.errorContext=this.labelContainer.length&&this.labelContainer||d(this.currentForm);this.containers=d(this.settings.errorContainer).add(this.settings.errorLabelContainer);this.submitted={};this.valueCache={};this.pendingRequest=0;this.pending={};this.invalid=
{};this.reset();var f=this.groups={};d.each(this.settings.groups,function(a,c){"string"==typeof c&&(c=c.split(/\s/));d.each(c,function(b,c){f[c]=a})});var a=this.settings.rules;d.each(a,function(b,c){a[b]=d.validator.normalizeRule(c)});d(this.currentForm).validateDelegate(":text, [type='password'], [type='file'], select, textarea, [type='number'], [type='search'] ,[type='tel'], [type='url'], [type='email'], [type='datetime'], [type='date'], [type='month'], [type='week'], [type='time'], [type='datetime-local'], [type='range'], [type='color'] ",
"focusin focusout keyup",c).validateDelegate("[type='radio'], [type='checkbox'], select, option","click",c);this.settings.invalidHandler&&d(this.currentForm).bind("invalid-form.validate",this.settings.invalidHandler)},form:function(){return this.checkForm(),d.extend(this.submitted,this.errorMap),this.invalid=d.extend({},this.errorMap),this.valid()||d(this.currentForm).triggerHandler("invalid-form",[this]),this.showErrors(),this.valid()},checkForm:function(){this.prepareForm();for(var c=0,d=this.currentElements=
this.elements();d[c];c++)this.check(d[c]);return this.valid()},element:function(c){this.lastElement=c=this.validationTargetFor(this.clean(c));this.prepareElement(c);this.currentElements=d(c);var f=!1!==this.check(c);return f?delete this.invalid[c.name]:this.invalid[c.name]=!0,this.numberOfInvalids()||(this.toHide=this.toHide.add(this.containers)),this.showErrors(),f},showErrors:function(c){if(c){d.extend(this.errorMap,c);this.errorList=[];for(var f in c)this.errorList.push({message:c[f],element:this.findByName(f)[0]});
this.successList=d.grep(this.successList,function(a){return!(a.name in c)})}this.settings.showErrors?this.settings.showErrors.call(this,this.errorMap,this.errorList):this.defaultShowErrors()},resetForm:function(){d.fn.resetForm&&d(this.currentForm).resetForm();this.submitted={};this.lastElement=null;this.prepareForm();this.hideErrors();this.elements().removeClass(this.settings.errorClass).removeData("previousValue")},numberOfInvalids:function(){return this.objectLength(this.invalid)},objectLength:function(c){var d=
0,a;for(a in c)d++;return d},hideErrors:function(){this.addWrapper(this.toHide).hide()},valid:function(){return 0===this.size()},size:function(){return this.errorList.length},focusInvalid:function(){if(this.settings.focusInvalid)try{d(this.findLastActive()||this.errorList.length&&this.errorList[0].element||[]).filter(":visible").focus().trigger("focusin")}catch(c){}},findLastActive:function(){var c=this.lastActive;return c&&1===d.grep(this.errorList,function(d){return d.element.name===c.name}).length&&
c},elements:function(){var c=this,f={};return d(this.currentForm).find("input, select, textarea").not(":submit, :reset, :image, [disabled]").not(this.settings.ignore).filter(function(){return!this.name&&c.settings.debug&&window.console&&console.error("%o has no name assigned",this),this.name in f||!c.objectLength(d(this).rules())?!1:(f[this.name]=!0,!0)})},clean:function(c){return d(c)[0]},errors:function(){var c=this.settings.errorClass.replace(" ",".");return d(this.settings.errorElement+"."+c,
this.errorContext)},reset:function(){this.successList=[];this.errorList=[];this.errorMap={};this.toShow=d([]);this.toHide=d([]);this.currentElements=d([])},prepareForm:function(){this.reset();this.toHide=this.errors().add(this.containers)},prepareElement:function(c){this.reset();this.toHide=this.errorsFor(c)},elementValue:function(c){var f=d(c).attr("type"),a=d(c).val();return"radio"===f||"checkbox"===f?d("input[name='"+d(c).attr("name")+"']:checked").val():"string"==typeof a?a.replace(/\r/g,""):
a},check:function(c){c=this.validationTargetFor(this.clean(c));var f,a=d(c).rules(),b=!1,g=this.elementValue(c),e;for(e in a){var h={method:e,parameters:a[e]};try{if(f=d.validator.methods[e].call(this,g,c,h.parameters),"dependency-mismatch"===f)b=!0;else{if(b=!1,"pending"===f)return this.toHide=this.toHide.not(this.errorsFor(c)),void 0;if(!f)return this.formatAndAdd(c,h),!1}}catch(k){throw this.settings.debug&&window.console&&console.log("Exception occurred when checking element "+c.id+", check the '"+
h.method+"' method.",k),k;}}return b?void 0:(this.objectLength(a)&&this.successList.push(c),!0)},customDataMessage:function(c,f){return d(c).data("msg-"+f.toLowerCase())||c.attributes&&d(c).attr("data-msg-"+f.toLowerCase())},customMessage:function(c,d){var a=this.settings.messages[c];return a&&(a.constructor===String?a:a[d])},findDefined:function(){for(var c=0;arguments.length>c;c++)if(void 0!==arguments[c])return arguments[c]},defaultMessage:function(c,f){return this.findDefined(this.customMessage(c.name,
f),this.customDataMessage(c,f),!this.settings.ignoreTitle&&c.title||void 0,d.validator.messages[f],"<strong>Warning: No message defined for "+c.name+"</strong>")},formatAndAdd:function(c,f){var a=this.defaultMessage(c,f.method),b=/\$?\{(\d+)\}/g;"function"==typeof a?a=a.call(this,f.parameters,c):b.test(a)&&(a=d.validator.format(a.replace(b,"{$1}"),f.parameters));this.errorList.push({message:a,element:c});this.errorMap[c.name]=a;this.submitted[c.name]=a},addWrapper:function(c){return this.settings.wrapper&&
(c=c.add(c.parent(this.settings.wrapper))),c},defaultShowErrors:function(){var c;for(c=0;this.errorList[c];c++){var d=this.errorList[c];this.settings.highlight&&this.settings.highlight.call(this,d.element,this.settings.errorClass,this.settings.validClass);this.showLabel(d.element,d.message)}if(this.errorList.length&&(this.toShow=this.toShow.add(this.containers)),this.settings.success)for(c=0;this.successList[c];c++)this.showLabel(this.successList[c]);if(this.settings.unhighlight)for(c=0,d=this.validElements();d[c];c++)this.settings.unhighlight.call(this,
d[c],this.settings.errorClass,this.settings.validClass);this.toHide=this.toHide.not(this.toShow);this.hideErrors();this.addWrapper(this.toShow).show()},validElements:function(){return this.currentElements.not(this.invalidElements())},invalidElements:function(){return d(this.errorList).map(function(){return this.element})},showLabel:function(c,f){var a=this.errorsFor(c);a.length?(a.removeClass(this.settings.validClass).addClass(this.settings.errorClass),a.html(f)):(a=d("<"+this.settings.errorElement+
">").attr("for",this.idOrName(c)).addClass(this.settings.errorClass).html(f||""),this.settings.wrapper&&(a=a.hide().show().wrap("<"+this.settings.wrapper+"/>").parent()),this.labelContainer.append(a).length||(this.settings.errorPlacement?this.settings.errorPlacement(a,d(c)):a.insertAfter(c)));!f&&this.settings.success&&(a.text(""),"string"==typeof this.settings.success?a.addClass(this.settings.success):this.settings.success(a,c));this.toShow=this.toShow.add(a)},errorsFor:function(c){var f=this.idOrName(c);
return this.errors().filter(function(){return d(this).attr("for")===f})},idOrName:function(c){return this.groups[c.name]||(this.checkable(c)?c.name:c.id||c.name)},validationTargetFor:function(c){return this.checkable(c)&&(c=this.findByName(c.name).not(this.settings.ignore)[0]),c},checkable:function(c){return/radio|checkbox/i.test(c.type)},findByName:function(c){return d(this.currentForm).find("[name='"+c+"']")},getLength:function(c,f){switch(f.nodeName.toLowerCase()){case "select":return d("option:selected",
f).length;case "input":if(this.checkable(f))return this.findByName(f.name).filter(":checked").length}return c.length},depend:function(c,d){return this.dependTypes[typeof c]?this.dependTypes[typeof c](c,d):!0},dependTypes:{"boolean":function(c){return c},string:function(c,f){return!!d(c,f.form).length},"function":function(c,d){return c(d)}},optional:function(c){var f=this.elementValue(c);return!d.validator.methods.required.call(this,f,c)&&"dependency-mismatch"},startRequest:function(c){this.pending[c.name]||
(this.pendingRequest++,this.pending[c.name]=!0)},stopRequest:function(c,f){this.pendingRequest--;0>this.pendingRequest&&(this.pendingRequest=0);delete this.pending[c.name];f&&0===this.pendingRequest&&this.formSubmitted&&this.form()?(d(this.currentForm).submit(),this.formSubmitted=!1):!f&&0===this.pendingRequest&&this.formSubmitted&&(d(this.currentForm).triggerHandler("invalid-form",[this]),this.formSubmitted=!1)},previousValue:function(c){return d.data(c,"previousValue")||d.data(c,"previousValue",
{old:null,valid:!0,message:this.defaultMessage(c,"remote")})}},classRuleSettings:{required:{required:!0},email:{email:!0},url:{url:!0},date:{date:!0},dateISO:{dateISO:!0},number:{number:!0},digits:{digits:!0},creditcard:{creditcard:!0}},addClassRules:function(c,f){c.constructor===String?this.classRuleSettings[c]=f:d.extend(this.classRuleSettings,c)},classRules:function(c){var f={};c=d(c).attr("class");return c&&d.each(c.split(" "),function(){this in d.validator.classRuleSettings&&d.extend(f,d.validator.classRuleSettings[this])}),
f},attributeRules:function(c){var f={};c=d(c);var a=c[0].getAttribute("type"),b;for(b in d.validator.methods){var g;"required"===b?(g=c.get(0).getAttribute(b),""===g&&(g=!0),g=!!g):g=c.attr(b);/min|max/.test(b)&&(null===a||/number|range|text/.test(a))&&(g=Number(g));g?f[b]=g:a===b&&"range"!==a&&(f[b]=!0)}return f.maxlength&&/-1|2147483647|524288/.test(f.maxlength)&&delete f.maxlength,f},dataRules:function(c){var f,a={},b=d(c);for(f in d.validator.methods)c=b.data("rule-"+f.toLowerCase()),void 0!==
c&&(a[f]=c);return a},staticRules:function(c){var f={},a=d.data(c.form,"validator");return a.settings.rules&&(f=d.validator.normalizeRule(a.settings.rules[c.name])||{}),f},normalizeRules:function(c,f){return d.each(c,function(a,b){if(!1===b)return delete c[a],void 0;if(b.param||b.depends){var g=!0;switch(typeof b.depends){case "string":g=!!d(b.depends,f.form).length;break;case "function":g=b.depends.call(f,f)}g?c[a]=void 0!==b.param?b.param:!0:delete c[a]}}),d.each(c,function(a,b){c[a]=d.isFunction(b)?
b(f):b}),d.each(["minlength","maxlength"],function(){c[this]&&(c[this]=Number(c[this]))}),d.each(["rangelength","range"],function(){var a;c[this]&&(d.isArray(c[this])?c[this]=[Number(c[this][0]),Number(c[this][1])]:"string"==typeof c[this]&&(a=c[this].split(/[\s,]+/),c[this]=[Number(a[0]),Number(a[1])]))}),d.validator.autoCreateRanges&&(c.min&&c.max&&(c.range=[c.min,c.max],delete c.min,delete c.max),c.minlength&&c.maxlength&&(c.rangelength=[c.minlength,c.maxlength],delete c.minlength,delete c.maxlength)),
c},normalizeRule:function(c){if("string"==typeof c){var f={};d.each(c.split(/\s/),function(){f[this]=!0});c=f}return c},addMethod:function(c,f,a){d.validator.methods[c]=f;d.validator.messages[c]=void 0!==a?a:d.validator.messages[c];3>f.length&&d.validator.addClassRules(c,d.validator.normalizeRule(c))},methods:{required:function(c,f,a){return this.depend(a,f)?"select"===f.nodeName.toLowerCase()?(c=d(f).val())&&0<c.length:this.checkable(f)?0<this.getLength(c,f):0<d.trim(c).length:"dependency-mismatch"},
email:function(c,d){return this.optional(d)||/^((([a-z]|\d|[!#\$%&'\*\+\-\/=\?\^_`{\|}~]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+(\.([a-z]|\d|[!#\$%&'\*\+\-\/=\?\^_`{\|}~]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+)*)|((\x22)((((\x20|\x09)*(\x0d\x0a))?(\x20|\x09)+)?(([\x01-\x08\x0b\x0c\x0e-\x1f\x7f]|\x21|[\x23-\x5b]|[\x5d-\x7e]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(\\([\x01-\x09\x0b\x0c\x0d-\x7f]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]))))*(((\x20|\x09)*(\x0d\x0a))?(\x20|\x09)+)?(\x22)))@((([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.)+(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))$/i.test(c)},
url:function(c,d){return this.optional(d)||/^(https?|s?ftp):\/\/(((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:)*@)?(((\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5]))|((([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.)+(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.?)(:\d*)?)(\/((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)+(\/(([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)*)*)?)?(\?((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)|[\uE000-\uF8FF]|\/|\?)*)?(#((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)|\/|\?)*)?$/i.test(c)},
date:function(c,d){return this.optional(d)||!/Invalid|NaN/.test(""+new Date(c))},dateISO:function(c,d){return this.optional(d)||/^\d{4}[\/\-]\d{1,2}[\/\-]\d{1,2}$/.test(c)},number:function(c,d){return this.optional(d)||/^-?(?:\d+|\d{1,3}(?:,\d{3})+)?(?:\.\d+)?$/.test(c)},digits:function(c,d){return this.optional(d)||/^\d+$/.test(c)},creditcard:function(c,d){if(this.optional(d))return"dependency-mismatch";if(/[^0-9 \-]+/.test(c))return!1;var a=0,b=!1;c=c.replace(/\D/g,"");for(var g=c.length-1;0<=g;g--){var e=
c.charAt(g);e=parseInt(e,10);b&&9<(e*=2)&&(e-=9);a+=e;b=!b}return 0===a%10},minlength:function(c,f,a){c=d.isArray(c)?c.length:this.getLength(d.trim(c),f);return this.optional(f)||c>=a},maxlength:function(c,f,a){c=d.isArray(c)?c.length:this.getLength(d.trim(c),f);return this.optional(f)||a>=c},rangelength:function(c,f,a){c=d.isArray(c)?c.length:this.getLength(d.trim(c),f);return this.optional(f)||c>=a[0]&&a[1]>=c},min:function(c,d,a){return this.optional(d)||c>=a},max:function(c,d,a){return this.optional(d)||
a>=c},range:function(c,d,a){return this.optional(d)||c>=a[0]&&a[1]>=c},equalTo:function(c,f,a){a=d(a);return this.settings.onfocusout&&a.unbind(".validate-equalTo").bind("blur.validate-equalTo",function(){d(f).valid()}),c===a.val()},remote:function(c,f,a){if(this.optional(f))return"dependency-mismatch";var b=this.previousValue(f);if(this.settings.messages[f.name]||(this.settings.messages[f.name]={}),b.originalMessage=this.settings.messages[f.name].remote,this.settings.messages[f.name].remote=b.message,
a="string"==typeof a&&{url:a}||a,b.old===c)return b.valid;b.old=c;var g=this;this.startRequest(f);var e={};return e[f.name]=c,d.ajax(d.extend(!0,{url:a,mode:"abort",port:"validate"+f.name,dataType:"json",data:e,success:function(a){g.settings.messages[f.name].remote=b.originalMessage;var e=!0===a||"true"===a;if(e){var h=g.formSubmitted;g.prepareElement(f);g.formSubmitted=h;g.successList.push(f);delete g.invalid[f.name];g.showErrors()}else h={},a=a||g.defaultMessage(f,"remote"),h[f.name]=b.message=
d.isFunction(a)?a(c):a,g.invalid[f.name]=!0,g.showErrors(h);b.valid=e;g.stopRequest(f,e)}},a)),"pending"}}});d.format=d.validator.format})(jQuery);(function(d){var c={};if(d.ajaxPrefilter)d.ajaxPrefilter(function(a,b,d){b=a.port;"abort"===a.mode&&(c[b]&&c[b].abort(),c[b]=d)});else{var f=d.ajax;d.ajax=function(a){var b=("port"in a?a:d.ajaxSettings).port;return"abort"===("mode"in a?a:d.ajaxSettings).mode?(c[b]&&c[b].abort(),c[b]=f.apply(this,arguments),c[b]):f.apply(this,arguments)}}})(jQuery);
(function(d){d.extend(d.fn,{validateDelegate:function(c,f,a){return this.bind(f,function(b){var g=d(b.target);return g.is(c)?a.apply(g,arguments):void 0})}})})(jQuery);
(function(d,c){"function"===typeof define&&define.amd?define(["exports"],c):"object"===typeof exports&&"string"!==typeof exports.nodeName?c(exports):c(d.commonJsStrict={})})(this,function(d){function c(a){if(a in Q)return a;for(var b=a[0].toUpperCase()+a.slice(1),c=q.length;c--;)if(a=q[c]+b,a in Q)return a}function f(a,b){a=a||{};for(var c in b)b[c]&&b[c].constructor&&b[c].constructor===Object?(a[c]=a[c]||{},f(a[c],b[c])):a[c]=b[c];return a}function a(a){if("createEvent"in document){var b=document.createEvent("HTMLEvents");
b.initEvent("change",!1,!0);a.dispatchEvent(b)}else a.fireEvent("onchange")}function b(a,b,c){if("string"===typeof b){var d=b;b={};b[d]=c}for(var g in b)a.style[g]=b[g]}function g(a,b){a.classList?a.classList.add(b):a.className+=" "+b}function e(a,b){var c=b||new Image;if(c.src===a)var d=new Promise(function(a,b){a(c)});else d=new Promise(function(b,d){"http"===a.substring(0,4).toLowerCase()&&c.setAttribute("crossOrigin","anonymous");c.onload=function(){setTimeout(function(){b(c)},1)}}),c.src=a;c.style.opacity=
0;return d}function h(a,b){window.EXIF||b(0);EXIF.getData(a,function(){var a=EXIF.getTag(this,"Orientation");b(a)})}function k(a,b,c){var d=b.width,g=b.height,e=a.getContext("2d");a.width=b.width;a.height=b.height;e.save();switch(c){case 2:e.translate(d,0);e.scale(-1,1);break;case 3:e.translate(d,g);e.rotate(180*Math.PI/180);break;case 4:e.translate(0,g);e.scale(1,-1);break;case 5:a.width=g;a.height=d;e.rotate(90*Math.PI/180);e.scale(1,-1);break;case 6:a.width=g;a.height=d;e.rotate(90*Math.PI/180);
e.translate(0,-g);break;case 7:a.width=g;a.height=d;e.rotate(-90*Math.PI/180);e.translate(-d,g);e.scale(1,-1);break;case 8:a.width=g,a.height=d,e.translate(0,d),e.rotate(-90*Math.PI/180)}e.drawImage(b,0,0,d,g);e.restore()}function l(a){if(this.options.enableZoom){var b=this.elements.zoomer;a=p(a,4);b.value=Math.max(b.min,Math.min(b.max,a))}}function m(){function a(){n.call(c,{value:parseFloat(e.value),origin:new K(c.elements.preview),viewportRect:c.elements.viewport.getBoundingClientRect(),transform:E.parse(c.elements.preview)})}
function b(b){var d=c._currentZoom+(b.wheelDelta?b.wheelDelta/1200:b.deltaY?b.deltaY/1060:b.detail?b.detail/-60:0);b.preventDefault();l.call(c,d);a.call(c)}var c=this,d=c.elements.zoomerWrap=document.createElement("div"),e=c.elements.zoomer=document.createElement("input");g(d,"cr-slider-wrap");g(e,"cr-slider");e.type="range";e.step="0.0001";e.value=1;e.style.display=c.options.showZoomer?"":"none";c.element.appendChild(d);d.appendChild(e);c._currentZoom=1;c.elements.zoomer.addEventListener("input",
a);c.elements.zoomer.addEventListener("change",a);c.options.mouseWheelZoom&&(c.elements.boundary.addEventListener("mousewheel",b),c.elements.boundary.addEventListener("DOMMouseScroll",b))}function n(a){function c(){var a={};a[J]=g.toString();a[z]=h.toString();b(d.elements.preview,a)}var d=this,g=a?a.transform:E.parse(d.elements.preview),e=a?a.viewportRect:d.elements.viewport.getBoundingClientRect(),h=a?a.origin:new K(d.elements.preview);d._currentZoom=a?a.value:d._currentZoom;g.scale=d._currentZoom;
c();d.options.enforceBoundary&&(e=u.call(d,e),a=e.translate,e=e.origin,g.x>=a.maxX&&(h.x=e.minX,g.x=a.maxX),g.x<=a.minX&&(h.x=e.maxX,g.x=a.minX),g.y>=a.maxY&&(h.y=e.minY,g.y=a.maxY),g.y<=a.minY&&(h.y=e.maxY,g.y=a.minY));c();T.call(d);v.call(d)}function u(a){var b=this._currentZoom,c=a.width;a=a.height;var d=this.options.boundary.width/2,g=this.options.boundary.height/2,e=this.elements.preview.getBoundingClientRect(),h=e.width;e=e.height;var f=c/2,k=a/2;d=-1*(f/b-d);g=-1*(k/b-g);f*=1/b;k*=1/b;return{translate:{maxX:d,
minX:d-(1/b*h-1/b*c),maxY:g,minY:g-(1/b*e-1/b*a)},origin:{maxX:1/b*h-f,minX:f,maxY:1/b*e-k,minY:k}}}function r(){var a=this._currentZoom,c=this.elements.preview.getBoundingClientRect(),d=this.elements.viewport.getBoundingClientRect(),g=E.parse(this.elements.preview.style[J]),e=new K(this.elements.preview),h=d.left-c.left+d.width/2;c=(d.top-c.top+d.height/2)/a;h/=a;d=(c-e.y)*(1-a);g.x-=(h-e.x)*(1-a);g.y-=d;a={};a[z]=h+"px "+c+"px";a[J]=g.toString();b(this.elements.preview,a)}function t(){function c(a,
b){var c=f.elements.preview.getBoundingClientRect(),d=t.y+b,g=t.x+a;f.options.enforceBoundary?(q.top>c.top+b&&q.bottom<c.bottom+b&&(t.y=d),q.left>c.left+a&&q.right<c.right+a&&(t.x=g)):(t.y=d,t.x=g)}function d(a){var d={};c(a[0],a[1]);d[J]=t.toString();b(f.elements.preview,d);y.call(f);document.body.style[I]="";r.call(f);v.call(f);n=0}function g(a){a.preventDefault();k||(k=!0,m=a.pageX,p=a.pageY,a.touches&&(a=a.touches[0],m=a.pageX,p=a.pageY),t=E.parse(f.elements.preview),window.addEventListener("mousemove",
e),window.addEventListener("touchmove",e),window.addEventListener("mouseup",h),window.addEventListener("touchend",h),document.body.style[I]="none",q=f.elements.viewport.getBoundingClientRect())}function e(d){d.preventDefault();var g=d.pageX,e=d.pageY;d.touches&&(e=d.touches[0],g=e.pageX,e=e.pageY);var h=g-m,k=e-p,D={};"touchmove"==d.type&&1<d.touches.length?(g=d.touches[0],d=d.touches[1],d=Math.sqrt((g.pageX-d.pageX)*(g.pageX-d.pageX)+(g.pageY-d.pageY)*(g.pageY-d.pageY)),n||(n=d/f._currentZoom),l.call(f,
d/n),a(f.elements.zoomer)):(c(h,k),D[J]=t.toString(),b(f.elements.preview,D),y.call(f),p=e,m=g)}function h(){k=!1;window.removeEventListener("mousemove",e);window.removeEventListener("touchmove",e);window.removeEventListener("mouseup",h);window.removeEventListener("touchend",h);document.body.style[I]="";r.call(f);v.call(f);n=0}var f=this,k=!1,m,p,n,q,t;f.elements.overlay.addEventListener("mousedown",g);f.elements.viewport.addEventListener("keydown",function(a){function b(a){switch(a){case 37:return[1,
0];case 38:return[0,1];case 39:return[-1,0];case 40:return[0,-1]}}if(!a.shiftKey||38!=a.keyCode&&40!=a.keyCode)37<=a.keyCode&&40>=a.keyCode&&(a.preventDefault(),a=b(a.keyCode),t=E.parse(f.elements.preview),document.body.style[I]="none",q=f.elements.viewport.getBoundingClientRect(),d(a));else{var c=0;c=38==a.keyCode?parseFloat(f.elements.zoomer.value,10)+parseFloat(f.elements.zoomer.step,10):parseFloat(f.elements.zoomer.value,10)-parseFloat(f.elements.zoomer.step,10);f.setZoom(c)}});f.elements.overlay.addEventListener("touchstart",
g)}function y(){var a=this.elements.boundary.getBoundingClientRect(),c=this.elements.preview.getBoundingClientRect();b(this.elements.overlay,{width:c.width+"px",height:c.height+"px",top:c.top-a.top+"px",left:c.left-a.left+"px"})}function v(){var a=this.get();if(0<this.elements.preview.offsetHeight&&0<this.elements.preview.offsetWidth)if(this.options.update.call(this,a),this.$)this.$(this.element).trigger("update",a);else{if(window.CustomEvent)var b=new CustomEvent("update",{detail:a});else b=document.createEvent("CustomEvent"),
b.initCustomEvent("update",!0,!0,a);this.element.dispatchEvent(b)}}function w(){var c=0,d=1.5,g=1,e={},h=this.elements.preview,f=this.elements.zoomer,k=new E(0,0,g),m=new K;if(0<this.elements.preview.offsetHeight&&0<this.elements.preview.offsetWidth&&!this.data.bound){this.data.bound=!0;e[J]=k.toString();e[z]=m.toString();e.opacity=1;b(h,e);m=h.getBoundingClientRect();var n=this.elements.viewport.getBoundingClientRect();var q=this.elements.boundary.getBoundingClientRect();this._originalImageWidth=
m.width;this._originalImageHeight=m.height;this.options.enableZoom?(this.options.enforceBoundary&&(c=n.width/m.width,g=n.height/m.height,c=Math.max(c,g)),c>=d&&(d=c+1),f.min=p(c,4),f.max=p(d,4),d=Math.max(q.width/m.width,q.height/m.height),g=null!==this.data.boundZoom?this.data.boundZoom:d,l.call(this,g),a(f)):this._currentZoom=g;k.scale=this._currentZoom;e[J]=k.toString();b(h,e);if(this.data.points.length){e=this.data.points;if(4!=e.length)throw"Croppie - Invalid number of points supplied: "+e;h=
e[2]-e[0];k=this.elements.viewport.getBoundingClientRect();d=this.elements.boundary.getBoundingClientRect();h=k.width/h;f=-1*e[1]+(k.top-d.top);k=-1*e[0]+(k.left-d.left);d={};d[z]=e[0]+"px "+e[1]+"px";d[J]=(new E(k,f,h)).toString();b(this.elements.preview,d);l.call(this,h);this._currentZoom=h}else e=this.elements.preview.getBoundingClientRect(),h=this.elements.viewport.getBoundingClientRect(),f=this.elements.boundary.getBoundingClientRect(),e=new E(h.left-f.left-(e.width-h.width)/2,h.top-f.top-(e.height-
h.height)/2,this._currentZoom),b(this.elements.preview,J,e.toString());r.call(this);y.call(this)}}function G(a){var b=this.elements.canvas,c=this.elements.img,d=b.getContext("2d"),g=this.options.enableExif&&window.EXIF;a=this.options.enableOrientation&&a;d.clearRect(0,0,b.width,b.height);b.width=c.width;b.height=c.height;g?h(c,function(d){k(b,c,parseInt(d));a&&k(b,c,a)}):a&&k(b,c,a)}function H(a,b){var c=this,d=[],g=null;if("string"===typeof a){var h=a;a={}}else if(Array.isArray(a))d=a.slice();else{if("undefined"==
typeof a&&c.data.url)return w.call(c),v.call(c),null;h=a.url;d=a.points||[];g="undefined"===typeof a.zoom?null:a.zoom}c.data.bound=!1;c.data.url=h||c.data.url;c.data.points=(d||c.data.points).map(function(a){return parseFloat(a)});c.data.boundZoom=g;h=e(h,c.elements.img);h.then(function(){c.options.useCanvas&&(c.elements.img.exifdata=null,G.call(c,a.orientation||1));w.call(c);v.call(c);b&&b()});return h}function p(a,b){return parseFloat(a).toFixed(b||0)}function M(){var a=this.elements.preview.getBoundingClientRect(),
b=this.elements.viewport.getBoundingClientRect(),c=b.left-a.left;a=b.top-a.top;var d=c+this.elements.viewport.offsetWidth+(b.width-this.elements.viewport.offsetWidth)/2;b=a+this.elements.viewport.offsetHeight+(b.height-this.elements.viewport.offsetHeight)/2;var g=this._currentZoom;if(Infinity===g||isNaN(g))g=1;var e=this.options.enforceBoundary?0:Number.NEGATIVE_INFINITY;c=Math.max(e,c/g);a=Math.max(e,a/g);d=Math.max(e,d/g);b=Math.max(e,b/g);return{points:[p(c),p(a),p(d),p(b)],zoom:g}}function A(a){var c=
this,d=M.call(c),e=f(N,f({},a)),h="string"===typeof a?a:e.type||"viewport";a=e.size;var k=e.format,l=e.quality,m=e.backgroundColor;e="boolean"===typeof e.circle?e.circle:"circle"===c.options.viewport.type;var p=c.elements.viewport.getBoundingClientRect(),n=p.width/p.height;"viewport"===a?(d.outputWidth=p.width,d.outputHeight=p.height):"object"===typeof a&&(a.width&&a.height?(d.outputWidth=a.width,d.outputHeight=a.height):a.width?(d.outputWidth=a.width,d.outputHeight=a.width/n):a.height&&(d.outputWidth=
a.height*n,d.outputHeight=a.height));-1<L.indexOf(k)&&(d.format="image/"+k,d.quality=l);d.circle=e;d.url=c.data.url;d.backgroundColor=m;return new Promise(function(a,e){if("canvas"===h){var f=c.elements.preview;var k=d.points,l=k[0],m=k[1],p=k[2]-k[0];k=k[3]-k[1];var n=d.circle,q=document.createElement("canvas"),t=q.getContext("2d"),D=p,r=k;d.outputWidth&&d.outputHeight&&(D=d.outputWidth,r=d.outputHeight);q.width=D;q.height=r;d.backgroundColor&&(t.fillStyle=d.backgroundColor,t.fillRect(0,0,D,r));
t.drawImage(f,l,m,p,k,0,0,D,r);n&&(t.fillStyle="#fff",t.globalCompositeOperation="destination-in",t.beginPath(),t.arc(D/2,r/2,D/2,0,2*Math.PI,!0),t.closePath(),t.fill());f=q.toDataURL(d.format,d.quality);a(f)}else f=d.points,l=document.createElement("div"),m=document.createElement("img"),p=f[2]-f[0],k=f[3]-f[1],g(l,"croppie-result"),l.appendChild(m),b(m,{left:-1*f[0]+"px",top:-1*f[1]+"px"}),m.src=d.url,b(l,{width:p+"px",height:k+"px"}),a(l)})}function B(a,c){this.element=a;this.options=f(f({},B.defaults),
c);var d=this.options.viewport.type?"cr-vp-"+this.options.viewport.type:null;this.options.useCanvas=this.options.enableOrientation||this.options.enableExif&&window.EXIF;this.data={};this.elements={};var e=this.elements.boundary=document.createElement("div");var h=this.elements.viewport=document.createElement("div");this.elements.img=document.createElement("img");var k=this.elements.overlay=document.createElement("div");this.options.useCanvas?(this.elements.canvas=document.createElement("canvas"),
this.elements.preview=this.elements.canvas):this.elements.preview=this.elements.img;g(e,"cr-boundary");b(e,{width:this.options.boundary.width+"px",height:this.options.boundary.height+"px"});g(h,"cr-viewport");d&&g(h,d);b(h,{width:this.options.viewport.width+"px",height:this.options.viewport.height+"px"});h.setAttribute("tabindex",0);g(this.elements.preview,"cr-image");g(k,"cr-overlay");this.element.appendChild(e);e.appendChild(this.elements.preview);e.appendChild(h);e.appendChild(k);g(this.element,
"croppie-container");this.options.customClass&&g(this.element,this.options.customClass);t.call(this);this.options.enableZoom&&m.call(this);this.options.url&&(d={url:this.options.url,points:this.options.points},delete this.options.url,delete this.options.points,H.call(this,d))}"function"!==typeof Promise&&!function(a){function b(a,b){return function(){a.apply(b,arguments)}}function c(a){if("object"!=typeof this)throw new TypeError("Promises must be constructed via new");if("function"!=typeof a)throw new TypeError("not a function");
this._value=this._state=null;this._deferreds=[];k(a,b(g,this),b(e,this))}function d(a){var b=this;return null===this._state?void this._deferreds.push(a):void m(function(){var c=b._state?a.onFulfilled:a.onRejected;if(null===c)return void(b._state?a.resolve:a.reject)(b._value);try{var d=c(b._value)}catch(W){return void a.reject(W)}a.resolve(d)})}function g(a){try{if(a===this)throw new TypeError("A promise cannot be resolved with itself.");if(a&&("object"==typeof a||"function"==typeof a)){var c=a.then;
if("function"==typeof c)return void k(b(c,a),b(g,this),b(e,this))}this._state=!0;this._value=a;h.call(this)}catch(Y){e.call(this,Y)}}function e(a){this._state=!1;this._value=a;h.call(this)}function h(){for(var a=0,b=this._deferreds.length;b>a;a++)d.call(this,this._deferreds[a]);this._deferreds=null}function f(a,b,c,d){this.onFulfilled="function"==typeof a?a:null;this.onRejected="function"==typeof b?b:null;this.resolve=c;this.reject=d}function k(a,b,c){var d=!1;try{a(function(a){d||(d=!0,b(a))},function(a){d||
(d=!0,c(a))})}catch(W){d||(d=!0,c(W))}}var l=setTimeout,m="function"==typeof setImmediate&&setImmediate||function(a){l(a,1)},p=Array.isArray||function(a){return"[object Array]"===Object.prototype.toString.call(a)};c.prototype["catch"]=function(a){return this.then(null,a)};c.prototype.then=function(a,b){var g=this;return new c(function(c,e){d.call(g,new f(a,b,c,e))})};c.all=function(){var a=Array.prototype.slice.call(1===arguments.length&&p(arguments[0])?arguments[0]:arguments);return new c(function(b,
c){function d(e,h){try{if(h&&("object"==typeof h||"function"==typeof h)){var f=h.then;if("function"==typeof f)return void f.call(h,function(a){d(e,a)},c)}a[e]=h;0===--g&&b(a)}catch(V){c(V)}}if(0===a.length)return b([]);for(var g=a.length,e=0;e<a.length;e++)d(e,a[e])})};c.resolve=function(a){return a&&"object"==typeof a&&a.constructor===c?a:new c(function(b){b(a)})};c.reject=function(a){return new c(function(b,c){c(a)})};c.race=function(a){return new c(function(b,c){for(var d=0,g=a.length;g>d;d++)a[d].then(b,
c)})};c._setImmediateFn=function(a){m=a};"undefined"!=typeof module&&module.exports?module.exports=c:a.Promise||(a.Promise=c)}(this);"function"!==typeof window.CustomEvent&&function(){function a(a,b){b=b||{bubbles:!1,cancelable:!1,detail:void 0};var c=document.createEvent("CustomEvent");c.initCustomEvent(a,b.bubbles,b.cancelable,b.detail);return c}a.prototype=window.Event.prototype;window.CustomEvent=a}();var q=["Webkit","Moz","ms"],Q=document.createElement("div").style;var J=c("transform");var z=
c("transformOrigin");var I=c("userSelect");var E=function(a,b,c){this.x=parseFloat(a);this.y=parseFloat(b);this.scale=parseFloat(c)};E.parse=function(a){return a.style?E.parse(a.style[J]):-1<a.indexOf("matrix")||-1<a.indexOf("none")?E.fromMatrix(a):E.fromString(a)};E.fromMatrix=function(a){var b=a.substring(7).split(",");b.length&&"none"!==a||(b=[1,0,0,1,0,0]);return new E(parseInt(b[4],10),parseInt(b[5],10),parseFloat(b[0]))};E.fromString=function(a){var b=a.split(") ");a=b[0].substring(12).split(",");
b=1<b.length?b[1].substring(6):1;return new E(1<a.length?a[0]:0,1<a.length?a[1]:0,b)};E.prototype.toString=function(){return"translate3d("+this.x+"px, "+this.y+"px, 0px) scale("+this.scale+")"};var K=function(a){a&&a.style[z]?(a=a.style[z].split(" "),this.x=parseFloat(a[0]),this.y=parseFloat(a[1])):this.y=this.x=0};K.prototype.toString=function(){return this.x+"px "+this.y+"px"};var T=function(a,b,c){var d;return function(){var g=this,e=arguments,h=c&&!d;clearTimeout(d);d=setTimeout(function(){d=
null;c||a.apply(g,e)},b);h&&a.apply(g,e)}}(y,500),N={type:"canvas",format:"png",quality:1},L=["jpeg","webp","png"];if(window.jQuery){var C=window.jQuery;C.fn.croppie=function(a){if("string"===typeof a){var b=Array.prototype.slice.call(arguments,1),c=C(this).data("croppie");return"get"===a?c.get():"result"===a?c.result.apply(c,b):"bind"===a?c.bind.apply(c,b):this.each(function(){var c=C(this).data("croppie");if(c){var d=c[a];if(C.isFunction(d))d.apply(c,b),"destroy"===a&&C(this).removeData("croppie");
else throw"Croppie "+a+" method not found";}})}return this.each(function(){var b=new B(this,a);b.$=C;C(this).data("croppie",b)})}}B.defaults={viewport:{width:100,height:100,type:"square"},boundary:{width:300,height:300},orientationControls:{enabled:!0,leftClass:"",rightClass:""},customClass:"",showZoomer:!0,enableZoom:!0,mouseWheelZoom:!0,enableExif:!1,enforceBoundary:!0,enableOrientation:!1,update:function(){}};f(B.prototype,{bind:function(a,b){return H.call(this,a,b)},get:function(){return M.call(this)},
result:function(a){return A.call(this,a)},refresh:function(){w.call(this)},setZoom:function(b){l.call(this,b);a(this.elements.zoomer)},rotate:function(a){if(!this.options.useCanvas)throw"Croppie: Cannot rotate without enableOrientation";var b=this.elements.canvas,c=document.createElement("canvas"),d=1;c.width=b.width;c.height=b.height;c.getContext("2d").drawImage(b,0,0);if(90===a||-270===a)d=6;if(-90===a||270===a)d=8;if(180===a||-180===a)d=3;k(b,c,d);n.call(this)},destroy:function(){this.element.removeChild(this.elements.boundary);
var a=this.element;a.classList?a.classList.remove("croppie-container"):a.className=a.className.replace("croppie-container","");this.options.enableZoom&&this.element.removeChild(this.elements.zoomerWrap);delete this.elements}});d.Croppie=window.Croppie=B;"object"===typeof module&&module.exports&&(module.exports=B)});
(function(d){"function"===typeof define&&define.amd?define(d):"undefined"!=typeof module&&"undefined"!=typeof module.exports?module.exports=d():window.KvSortable=d()})(function(){function d(a,c){if(!a||!a.nodeType||1!==a.nodeType)throw"KvSortable: `el` must be HTMLElement, and not "+{}.toString.call(a);this.el=a;this.options=c=w({},c);a[U]=this;var d={group:Math.random(),sort:!0,disabled:!1,store:null,handle:null,scroll:!0,scrollSensitivity:30,scrollSpeed:10,draggable:/[uo]l/i.test(a.nodeName)?"li":
">*",ghostClass:"kvsortable-ghost",chosenClass:"kvsortable-chosen",dragClass:"kvsortable-drag",ignore:"a, img",filter:null,preventOnFilter:!0,animation:0,setData:function(a,b){a.setData("Text",b.textContent)},dropBubble:!1,dragoverBubble:!1,dataIdAttr:"data-id",delay:0,forceFallback:!1,fallbackClass:"kvsortable-fallback",fallbackOnBody:!1,fallbackTolerance:0,fallbackOffset:{x:0,y:0}},g;for(g in d)g in c||(c[g]=d[g]);ia(c);for(var e in this)"_"===e.charAt(0)&&"function"===typeof this[e]&&(this[e]=
this[e].bind(this));this.nativeDraggable=c.forceFallback?!1:ka;b(a,"mousedown",this._onTapStart);b(a,"touchstart",this._onTapStart);b(a,"pointerdown",this._onTapStart);this.nativeDraggable&&(b(a,"dragover",this),b(a,"dragenter",this));V.push(this._onDragOver);c.store&&this.sort(c.store.get(this))}function c(a,b){"clone"!==a.lastPullMode&&(b=!0);B&&B.state!==b&&(h(B,"display",b?"none":""),!b&&B.state&&(a.options.group.revertClone?(q.insertBefore(B,Q),a._animate(p,B)):q.insertBefore(B,p)),B.state=b)}
function f(b,c,d){if(b){d=d||F;do if(">*"===c&&b.parentNode===d||y(b,c))return b;while(b=a(b))}return null}function a(a){var b=a.host;return b&&b.nodeType?b:a.parentNode}function b(a,b,c){a.addEventListener(b,c,Y)}function g(a,b,c){a.removeEventListener(b,c,Y)}function e(a,b,c){if(a)if(a.classList)a.classList[c?"add":"remove"](b);else{var d=(" "+a.className+" ").replace(ea," ").replace(" "+b+" "," ");a.className=(d+(c?" "+b:"")).replace(ea," ")}}function h(a,b,c){var d=a&&a.style;if(d){if(void 0===
c)return F.defaultView&&F.defaultView.getComputedStyle?c=F.defaultView.getComputedStyle(a,""):a.currentStyle&&(c=a.currentStyle),void 0===b?c:c[b];b in d||(b="-webkit-"+b);d[b]=c+("string"===typeof c?"":"px")}}function k(a,b,c){if(a){a=a.getElementsByTagName(b);b=0;var d=a.length;if(c)for(;b<d;b++)c(a[b],b);return a}return[]}function l(a,b,c,d,g,e,h){a=a||b[U];var f=F.createEvent("Event"),k=a.options,l="on"+c.charAt(0).toUpperCase()+c.substr(1);f.initEvent(c,!0,!0);f.to=b;f.from=g||b;f.item=d||b;
f.clone=B;f.oldIndex=e;f.newIndex=h;b.dispatchEvent(f);k[l]&&k[l].call(a,f)}function m(a,b,c,d,g,e,h){var f=a[U],k=f.options.onMove,l;var x=F.createEvent("Event");x.initEvent("move",!0,!0);x.to=b;x.from=a;x.dragged=c;x.draggedRect=d;x.related=g||b;x.relatedRect=e||b.getBoundingClientRect();a.dispatchEvent(x);k&&(l=k.call(f,x,h));return l}function n(a){a.draggable=!1}function u(){ca=!1}function r(a){a=a.tagName+a.className+a.src+a.href+a.textContent;for(var b=a.length,c=0;b--;)c+=a.charCodeAt(b);return c.toString(36)}
function t(a,b){var c=0;if(!a||!a.parentNode)return-1;for(;a&&(a=a.previousElementSibling);)"TEMPLATE"===a.nodeName.toUpperCase()||">*"!==b&&!y(a,b)||c++;return c}function y(a,b){if(a){b=b.split(".");var c=b.shift().toUpperCase(),d=new RegExp("\\s("+b.join("|")+")(?=\\s)","g");return(""===c||a.nodeName.toUpperCase()==c)&&(!b.length||((" "+a.className+" ").match(d)||[]).length==b.length)}return!1}function v(a,b){var c,d;return function(){void 0===c&&(c=arguments,d=this,setTimeout(function(){1===c.length?
a.call(d,c[0]):a.apply(d,c);c=void 0},b))}}function w(a,b){if(a&&b)for(var c in b)b.hasOwnProperty(c)&&(a[c]=b[c]);return a}function G(a){return fa?fa(a).clone(!0)[0]:ba&&ba.dom?ba.dom(a).cloneNode(!0):a.cloneNode(!0)}function H(a){a=a.getElementsByTagName("input");for(var b=a.length;b--;){var c=a[b];c.checked&&da.push(c)}}if("undefined"==typeof window||!window.document)return function(){throw Error("KvSortable.js requires a window with a document");};var p,M,A,B,q,Q,J,z,I,E,K,T,N,L,C,D,Z,R={},S,
O,aa,ea=/\s+/g,ja=/left|right|inline/,U="KvSortable"+(new Date).getTime(),P=window,F=P.document,ha=P.parseInt,fa=P.jQuery||P.Zepto,ba=P.Polymer,Y=!1,ka=!!("draggable"in F.createElement("div")),W=function(a){if(navigator.userAgent.match(/Trident.*rv[ :]?11\./))return!1;a=F.createElement("x");a.style.cssText="pointer-events:auto";return"auto"===a.style.pointerEvents}(),ca=!1,X=Math.abs,la=Math.min,da=[],V=[],ma=v(function(a,b,c){if(c&&b.scroll){var d=c[U],g=b.scrollSensitivity,e=b.scrollSpeed,h=a.clientX,
f=a.clientY,k=window.innerWidth,l=window.innerHeight,m,p;if(I!==c&&(z=b.scroll,I=c,E=b.scrollFn,!0===z)){z=c;do if(z.offsetWidth<z.scrollWidth||z.offsetHeight<z.scrollHeight)break;while(z=z.parentNode)}if(z){var x=z;b=z.getBoundingClientRect();var n=(X(b.right-h)<=g)-(X(b.left-h)<=g);var q=(X(b.bottom-f)<=g)-(X(b.top-f)<=g)}n||q||(n=(k-h<=g)-(h<=g),q=(l-f<=g)-(f<=g),(n||q)&&(x=P));if(R.vx!==n||R.vy!==q||R.el!==x)R.el=x,R.vx=n,R.vy=q,clearInterval(R.pid),x&&(R.pid=setInterval(function(){p=q?q*e:0;
m=n?n*e:0;if("function"===typeof E)return E.call(d,m,p,a);x===P?P.scrollTo(P.pageXOffset+m,P.pageYOffset+p):(x.scrollTop+=p,x.scrollLeft+=m)},24))}},30),ia=function(a){function b(a,b){if(void 0===a||!0===a)a=c.name;return"function"===typeof a?a:function(c,d){var g=d.options.group.name;return b?a:a&&(a.join?-1<a.indexOf(g):g==a)}}var c={},d=a.group;d&&"object"==typeof d||(d={name:d});c.name=d.name;c.checkPull=b(d.pull,!0);c.checkPut=b(d.put);c.revertClone=d.revertClone;a.group=c};d.prototype={constructor:d,
_onTapStart:function(a){var b=this,c=this.el,d=this.options,g=d.preventOnFilter,e=a.type,h=a.touches&&a.touches[0],k=(h||a).target,m=a.target.shadowRoot&&a.path[0]||k,x=d.filter;H(c);if(!(p||"mousedown"===e&&0!==a.button||d.disabled)&&(k=f(k,d.draggable,c))&&J!==k){var n=t(k,d.draggable);if("function"===typeof x){if(x.call(this,a,k,this)){l(b,m,"filter",k,c,n);g&&a.preventDefault();return}}else if(x&&(x=x.split(",").some(function(a){if(a=f(m,a.trim(),c))return l(b,a,"filter",k,c,n),!0}))){g&&a.preventDefault();
return}d.handle&&!f(m,d.handle,c)||this._prepareDragStart(a,h,k,n)}},_prepareDragStart:function(a,c,d,g){var h=this,f=h.el,m=h.options,x=f.ownerDocument;d&&!p&&d.parentNode===f&&(S=a,q=f,p=d,M=p.parentNode,Q=p.nextSibling,J=d,D=m.group,L=g,this._lastX=(c||a).clientX,this._lastY=(c||a).clientY,p.style["will-change"]="transform",d=function(){h._disableDelayedDrag();p.draggable=h.nativeDraggable;e(p,m.chosenClass,!0);h._triggerDragStart(a,c);l(h,q,"choose",p,q,L)},m.ignore.split(",").forEach(function(a){k(p,
a.trim(),n)}),b(x,"mouseup",h._onDrop),b(x,"touchend",h._onDrop),b(x,"touchcancel",h._onDrop),b(x,"pointercancel",h._onDrop),b(x,"selectstart",h),m.delay?(b(x,"mouseup",h._disableDelayedDrag),b(x,"touchend",h._disableDelayedDrag),b(x,"touchcancel",h._disableDelayedDrag),b(x,"mousemove",h._disableDelayedDrag),b(x,"touchmove",h._disableDelayedDrag),b(x,"pointermove",h._disableDelayedDrag),h._dragStartTimer=setTimeout(d,m.delay)):d())},_disableDelayedDrag:function(){var a=this.el.ownerDocument;clearTimeout(this._dragStartTimer);
g(a,"mouseup",this._disableDelayedDrag);g(a,"touchend",this._disableDelayedDrag);g(a,"touchcancel",this._disableDelayedDrag);g(a,"mousemove",this._disableDelayedDrag);g(a,"touchmove",this._disableDelayedDrag);g(a,"pointermove",this._disableDelayedDrag)},_triggerDragStart:function(a,c){(c=c||("touch"==a.pointerType?a:null))?(S={target:p,clientX:c.clientX,clientY:c.clientY},this._onDragStart(S,"touch")):this.nativeDraggable?(b(p,"dragend",this),b(q,"dragstart",this._onDragStart)):this._onDragStart(S,
!0);try{F.selection?setTimeout(function(){F.selection.empty()}):window.getSelection().removeAllRanges()}catch(na){}},_dragStarted:function(){if(q&&p){var a=this.options;e(p,a.ghostClass,!0);e(p,a.dragClass,!1);d.active=this;l(this,q,"start",p,q,L)}else this._nulling()},_emulateDragOver:function(){if(O&&(this._lastX!==O.clientX||this._lastY!==O.clientY)){this._lastX=O.clientX;this._lastY=O.clientY;W||h(A,"display","none");var a=F.elementFromPoint(O.clientX,O.clientY),b=a,c=V.length;if(b){do{if(b[U]){for(;c--;)V[c]({clientX:O.clientX,
clientY:O.clientY,target:a,rootEl:b});break}a=b}while(b=b.parentNode)}W||h(A,"display","")}},_onTouchMove:function(a){if(S){var b=this.options,c=b.fallbackTolerance,g=b.fallbackOffset;b=a.touches?a.touches[0]:a;var e=b.clientX-S.clientX+g.x;g=b.clientY-S.clientY+g.y;e=a.touches?"translate3d("+e+"px,"+g+"px,0)":"translate("+e+"px,"+g+"px)";if(!d.active){if(c&&la(X(b.clientX-this._lastX),X(b.clientY-this._lastY))<c)return;this._dragStarted()}this._appendGhost();aa=!0;O=b;h(A,"webkitTransform",e);h(A,
"mozTransform",e);h(A,"msTransform",e);h(A,"transform",e);a.preventDefault()}},_appendGhost:function(){if(!A){var a=p.getBoundingClientRect(),b=h(p),c=this.options;A=p.cloneNode(!0);e(A,c.ghostClass,!1);e(A,c.fallbackClass,!0);e(A,c.dragClass,!0);h(A,"top",a.top-ha(b.marginTop,10));h(A,"left",a.left-ha(b.marginLeft,10));h(A,"width",a.width);h(A,"height",a.height);h(A,"opacity","0.8");h(A,"position","fixed");h(A,"zIndex","100000");h(A,"pointerEvents","none");c.fallbackOnBody&&F.body.appendChild(A)||
q.appendChild(A);b=A.getBoundingClientRect();h(A,"width",2*a.width-b.width);h(A,"height",2*a.height-b.height)}},_onDragStart:function(a,c){var d=a.dataTransfer,g=this.options;this._offUpEvents();D.checkPull(this,this,p,a)&&(B=G(p),B.draggable=!1,B.style["will-change"]="",h(B,"display","none"),e(B,this.options.chosenClass,!1),q.insertBefore(B,p),l(this,q,"clone",p));e(p,g.dragClass,!0);c?("touch"===c?(b(F,"touchmove",this._onTouchMove),b(F,"touchend",this._onDrop),b(F,"touchcancel",this._onDrop),b(F,
"pointermove",this._onTouchMove),b(F,"pointerup",this._onDrop)):(b(F,"mousemove",this._onTouchMove),b(F,"mouseup",this._onDrop)),this._loopId=setInterval(this._emulateDragOver,50)):(d&&(d.effectAllowed="move",g.setData&&g.setData.call(this,d,p)),b(F,"drop",this),setTimeout(this._dragStarted,0))},_onDragOver:function(a){var b=this.el,g;var e=this.options;var k=e.group;var l=d.active,n=D===k,t=!1,x=e.sort;void 0!==a.preventDefault&&(a.preventDefault(),!e.dragoverBubble&&a.stopPropagation());if(!p.animated&&
(aa=!0,l&&!e.disabled&&(n?x||(g=!q.contains(p)):Z===this||(l.lastPullMode=D.checkPull(this,l,p,a))&&k.checkPut(this,l,p,a))&&(void 0===a.rootEl||a.rootEl===this.el)&&(ma(a,e,this.el),!ca)))if(k=f(a.target,e.draggable,b),e=p.getBoundingClientRect(),Z!==this&&(Z=this,t=!0),g)c(l,!0),M=q,B||Q?q.insertBefore(p,B||Q):x||q.appendChild(p);else if(!(g=0===b.children.length||b.children[0]===A)&&(g=b===a.target)&&(k=b.lastElementChild,g=k.getBoundingClientRect(),g=k=(5<a.clientY-(g.top+g.height)||5<a.clientX-
(g.right+g.width))&&k),g){if(k){if(k.animated)return;var r=k.getBoundingClientRect()}c(l,n);!1!==m(q,b,p,e,k,r,a)&&(p.contains(b)||(b.appendChild(p),M=b),this._animate(e,p),k&&this._animate(r,k))}else if(k&&!k.animated&&k!==p&&void 0!==k.parentNode[U]){K!==k&&(K=k,T=h(k),N=h(k.parentNode));r=k.getBoundingClientRect();var J=r.right-r.left;g=r.bottom-r.top;var v=ja.test(T.cssFloat+T.display)||"flex"==N.display&&0===N["flex-direction"].indexOf("row");x=k.offsetWidth>p.offsetWidth;var w=k.offsetHeight>
p.offsetHeight;J=.5<(v?(a.clientX-r.left)/J:(a.clientY-r.top)/g);var H=k.nextElementSibling,y=m(q,b,p,e,k,r,a),z=!1;!1!==y&&(ca=!0,setTimeout(u,30),c(l,n),1===y||-1===y?z=1===y:v?(l=p.offsetTop,n=k.offsetTop,z=l===n?k.previousElementSibling===p&&!x||J&&x:k.previousElementSibling===p||p.previousElementSibling===k?.5<(a.clientY-r.top)/g:n>l):t||(z=H!==p&&!w||J&&w),p.contains(b)||(z&&!H?b.appendChild(p):k.parentNode.insertBefore(p,z?H:k)),M=p.parentNode,this._animate(e,p),this._animate(r,k))}},_animate:function(a,
b){var c=this.options.animation;if(c){var d=b.getBoundingClientRect();1===a.nodeType&&(a=a.getBoundingClientRect());h(b,"transition","none");h(b,"transform","translate3d("+(a.left-d.left)+"px,"+(a.top-d.top)+"px,0)");b.offsetWidth;h(b,"transition","all "+c+"ms");h(b,"transform","translate3d(0,0,0)");clearTimeout(b.animated);b.animated=setTimeout(function(){h(b,"transition","");h(b,"transform","");b.animated=!1},c)}},_offUpEvents:function(){var a=this.el.ownerDocument;g(F,"touchmove",this._onTouchMove);
g(F,"pointermove",this._onTouchMove);g(a,"mouseup",this._onDrop);g(a,"touchend",this._onDrop);g(a,"pointerup",this._onDrop);g(a,"touchcancel",this._onDrop);g(a,"selectstart",this)},_onDrop:function(a){var b=this.el,c=this.options;clearInterval(this._loopId);clearInterval(R.pid);clearTimeout(this._dragStartTimer);g(F,"mousemove",this._onTouchMove);this.nativeDraggable&&(g(F,"drop",this),g(b,"dragstart",this._onDragStart));this._offUpEvents();if(a&&(aa&&(a.preventDefault(),!c.dropBubble&&a.stopPropagation()),
A&&A.parentNode.removeChild(A),(q===M||"clone"!==d.active.lastPullMode)&&B&&B.parentNode.removeChild(B),p&&(this.nativeDraggable&&g(p,"dragend",this),n(p),p.style["will-change"]="",e(p,this.options.ghostClass,!1),e(p,this.options.chosenClass,!1),q!==M?(C=t(p,c.draggable),0<=C&&(l(null,M,"add",p,q,L,C),l(this,q,"remove",p,q,L,C),l(null,M,"sort",p,q,L,C),l(this,q,"sort",p,q,L,C))):p.nextSibling!==Q&&(C=t(p,c.draggable),0<=C&&(l(this,q,"update",p,q,L,C),l(this,q,"sort",p,q,L,C))),d.active))){if(null==
C||-1===C)C=L;l(this,q,"end",p,q,L,C);this.save()}this._nulling()},_nulling:function(){q=p=M=A=Q=B=J=z=I=S=O=aa=C=K=T=Z=D=d.active=null;da.forEach(function(a){a.checked=!0});da.length=0},handleEvent:function(a){switch(a.type){case "drop":case "dragend":this._onDrop(a);break;case "dragover":case "dragenter":p&&(this._onDragOver(a),a.dataTransfer&&(a.dataTransfer.dropEffect="move"),a.preventDefault());break;case "selectstart":a.preventDefault()}},toArray:function(){for(var a=[],b,c=this.el.children,
d=0,g=c.length,e=this.options;d<g;d++)b=c[d],f(b,e.draggable,this.el)&&a.push(b.getAttribute(e.dataIdAttr)||r(b));return a},sort:function(a){var b={},c=this.el;this.toArray().forEach(function(a,d){var g=c.children[d];f(g,this.options.draggable,c)&&(b[a]=g)},this);a.forEach(function(a){b[a]&&(c.removeChild(b[a]),c.appendChild(b[a]))})},save:function(){var a=this.options.store;a&&a.set(this)},closest:function(a,b){return f(a,b||this.options.draggable,this.el)},option:function(a,b){var c=this.options;
if(void 0===b)return c[a];c[a]=b;"group"===a&&ia(c)},destroy:function(){var a=this.el;a[U]=null;g(a,"mousedown",this._onTapStart);g(a,"touchstart",this._onTapStart);g(a,"pointerdown",this._onTapStart);this.nativeDraggable&&(g(a,"dragover",this),g(a,"dragenter",this));Array.prototype.forEach.call(a.querySelectorAll("[draggable]"),function(a){a.removeAttribute("draggable")});V.splice(V.indexOf(this._onDragOver),1);this._onDrop();this.el=a=null}};b(F,"touchmove",function(a){d.active&&a.preventDefault()});
try{window.addEventListener("test",null,Object.defineProperty({},"passive",{get:function(){Y={capture:!1,passive:!1}}}))}catch(x){}d.utils={on:b,off:g,css:h,find:k,is:function(a,b){return!!f(a,b,a)},extend:w,throttle:v,closest:f,toggleClass:e,clone:G,index:t};d.create=function(a,b){return new d(a,b)};d.version="1.5.1";return d});
(function(d){"function"===typeof define&&define.amd?define(["jquery"],d):d(jQuery)})(function(d){d.fn.kvsortable=function(c){var f,a=arguments;this.each(function(){var b=d(this),g=b.data("kvsortable");g||!(c instanceof Object)&&c||(g=new KvSortable(this,c),b.data("kvsortable",g));g&&("widget"===c?f=g:"destroy"===c?(g.destroy(),b.removeData("kvsortable")):"function"===typeof g[c]?f=g[c].apply(g,[].slice.call(a,1)):c in g.options&&(f=g.option.apply(g,a)))});return void 0===f?this:f}});
$(function(){$(".file-preview").hide();$(".input-group-btn").on("click",function(){$(".file-preview").show()})});
(function(d){"function"===typeof define&&define.amd?define(["jquery"],d):"object"===typeof module&&module.exports?module.exports=d(require("jquery")):d(window.jQuery)})(function(d){d.fn.fileinputLocales={};d.fn.fileinputThemes={};var c={FRAMES:".kv-preview-thumb",SORT_CSS:"file-sortable",STYLE_SETTING:'style="width:{width};height:{height};"',OBJECT_PARAMS:'<param name="controller" value="true" />\n<param name="allowFullScreen" value="true" />\n<param name="allowScriptAccess" value="always" />\n<param name="autoPlay" value="false" />\n<param name="autoStart" value="false" />\n<param name="quality" value="high" />\n',DEFAULT_PREVIEW:'<div class="file-preview-other" style="display="none">\n<span class="{previewFileIconClass}">{previewFileIcon}</span>\n</div>',
MODAL_ID:"kvFileinputModal",MODAL_EVENTS:["show","shown","hide","hidden","loaded"],objUrl:window.URL||window.webkitURL,compare:function(a,b,c){return void 0!==a&&(c?a===b:a.match(b))},isIE:function(a){if("Microsoft Internet Explorer"!==navigator.appName)return!1;if(10===a)return(new RegExp("msie\\s"+a,"i")).test(navigator.userAgent);var b=document.createElement("div");b.innerHTML="\x3c!--[if IE "+a+"]> <i></i> <![endif]--\x3e";a=b.getElementsByTagName("i").length;document.body.appendChild(b);b.parentNode.removeChild(b);
return a},initModal:function(a){var b=d("body");b.length&&a.appendTo(b)},isEmpty:function(a,b){return void 0===a||null===a||0===a.length||b&&""===d.trim(a)},isArray:function(a){return Array.isArray(a)||"[object Array]"===Object.prototype.toString.call(a)},ifSet:function(a,b,c){return b&&"object"===typeof b&&a in b?b[a]:c||""},cleanArray:function(a){a instanceof Array||(a=[]);return a.filter(function(a){return void 0!==a&&null!==a})},spliceArray:function(a,b){var c,d=0,h=[];if(!(a instanceof Array))return[];
for(c=0;c<a.length;c++)c!==b&&(h[d]=a[c],d++);return h},getNum:function(a,b){b=b||0;if("number"===typeof a)return a;"string"===typeof a&&(a=parseFloat(a));return isNaN(a)?b:a},hasFileAPISupport:function(){return!(!window.File||!window.FileReader)},hasDragDropSupport:function(){var a=document.createElement("div");return!c.isIE(9)&&(void 0!==a.draggable||void 0!==a.ondragstart&&void 0!==a.ondrop)},hasFileUploadSupport:function(){return c.hasFileAPISupport()&&window.FormData},addCss:function(a,b){a.removeClass(b).addClass(b)},
getElement:function(a,b,g){return c.isEmpty(a)||c.isEmpty(a[b])?g:d(a[b])},uniqId:function(){return Math.round((new Date).getTime()+100*Math.random())},htmlEncode:function(a){return a.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&apos;")},replaceTags:function(a,b){var c=a;if(!b)return c;d.each(b,function(a,b){"function"===typeof b&&(b=b());c=c.split(a).join(b)});return c},cleanMemory:function(a){a=a.is("img")?a.attr("src"):a.find("source").attr("src");
c.objUrl.revokeObjectURL(a)},findFileName:function(a){var b=a.lastIndexOf("/");-1===b&&(b=a.lastIndexOf("\\"));return a.split(a.substring(b,b+1)).pop()},checkFullScreen:function(){return document.fullscreenElement||document.mozFullScreenElement||document.webkitFullscreenElement||document.msFullscreenElement},toggleFullScreen:function(a){var b=document,d=b.documentElement;d&&a&&!c.checkFullScreen()?d.requestFullscreen?d.requestFullscreen():d.msRequestFullscreen?d.msRequestFullscreen():d.mozRequestFullScreen?
d.mozRequestFullScreen():d.webkitRequestFullscreen&&d.webkitRequestFullscreen(Element.ALLOW_KEYBOARD_INPUT):b.exitFullscreen?b.exitFullscreen():b.msExitFullscreen?b.msExitFullscreen():b.mozCancelFullScreen?b.mozCancelFullScreen():b.webkitExitFullscreen&&b.webkitExitFullscreen()},moveArray:function(a,b,c){if(c>=a.length)for(var d=c-a.length;d--+1;)a.push(void 0);a.splice(c,0,a.splice(b,1)[0]);return a},cleanZoomCache:function(a){var b=a.closest(".kv-zoom-cache-theme");b.length||(b=a.closest(".kv-zoom-cache"));
b.remove()}};var f=function(a,b){this.$element=d(a);this._validate()&&(this.isPreviewable=c.hasFileAPISupport(),this.isIE9=c.isIE(9),this.isIE10=c.isIE(10),this.isPreviewable||this.isIE9?(this._init(b),this._listen()):this.$element.removeClass("file-loading"))};f.prototype={constructor:f,_init:function(a){var b=this,g=b.$element;b.options=a;d.each(a,function(a,d){switch(a){case "minFileCount":case "maxFileCount":case "maxFileSize":b[a]=c.getNum(d);break;default:b[a]=d}});b.$form=g.closest("form");
b._initTemplateDefaults();b.fileInputCleared=!1;b.fileBatchCompleted=!0;b.isPreviewable||(b.showPreview=!1);b.uploadFileAttr=c.isEmpty(g.attr("name"))?"file_data":g.attr("name");b.reader=null;b.formdata={};b.clearStack();b.uploadCount=0;b.uploadStatus={};b.uploadLog=[];b.uploadAsyncCount=0;b.loadedImages=[];b.totalImagesCount=0;b.ajaxRequests=[];b.isError=!1;b.ajaxAborted=!1;b.cancelling=!1;var e=b._getLayoutTemplate("progress");b.progressTemplate=e.replace("{class}",b.progressClass);b.progressCompleteTemplate=
e.replace("{class}",b.progressCompleteClass);b.progressErrorTemplate=e.replace("{class}",b.progressErrorClass);b.dropZoneEnabled=c.hasDragDropSupport()&&b.dropZoneEnabled;b.isDisabled=g.attr("disabled")||g.attr("readonly");b.isUploadable=c.hasFileUploadSupport()&&!c.isEmpty(b.uploadUrl);b.isClickable=b.browseOnZoneClick&&b.showPreview&&(b.isUploadable&&b.dropZoneEnabled||!c.isEmpty(b.defaultPreviewContent));b.slug="function"===typeof a.slugCallback?a.slugCallback:b._slugDefault;b.mainTemplate=b.showCaption?
b._getLayoutTemplate("main1"):b._getLayoutTemplate("main2");b.captionTemplate=b._getLayoutTemplate("caption");b.previewGenericTemplate=b._getPreviewTemplate("generic");b.resizeImage&&(b.maxImageWidth||b.maxImageHeight)&&(b.imageCanvas=document.createElement("canvas"),b.imageCanvasContext=b.imageCanvas.getContext("2d"));c.isEmpty(g.attr("id"))&&g.attr("id",c.uniqId());b.namespace=".fileinput_"+g.attr("id").replace(/-/g,"_");void 0===b.$container?b.$container=b._createContainer():b._refreshContainer();
e=b.$container;b.$dropZone=e.find(".file-drop-zone");b.$progress=e.find(".kv-upload-progress");b.$btnUpload=e.find(".fileinput-upload");b.$captionContainer=c.getElement(a,"elCaptionContainer",e.find(".file-caption"));b.$caption=c.getElement(a,"elCaptionText",e.find(".file-caption-name"));b.$previewContainer=c.getElement(a,"elPreviewContainer",e.find(".file-preview"));b.$preview=c.getElement(a,"elPreviewImage",e.find(".file-preview-thumbnails"));b.$previewStatus=c.getElement(a,"elPreviewStatus",e.find(".file-preview-status"));
b.$errorContainer=c.getElement(a,"elErrorContainer",b.$previewContainer.find(".kv-fileinput-error"));c.isEmpty(b.msgErrorClass)||c.addCss(b.$errorContainer,b.msgErrorClass);b.$errorContainer.hide();b.previewInitId="preview-"+c.uniqId();b._initPreviewCache();b._initPreview(!0);b._initPreviewActions();b._setFileDropZoneTitle();g.removeClass("file-loading");g.attr("disabled")&&b.disable();b._initZoom()},_initTemplateDefaults:function(){var a=this;var b='<div id="'+c.MODAL_ID+'" class="file-zoom-dialog modal fade" tabindex="-1" aria-labelledby="'+
c.MODAL_ID+'Label"></div>';"   \n";'    </div>\n    <div class="clearfix"></div>\n</div>';var g='<div class="kv-preview-data file-preview-html" title="{caption}" '+c.STYLE_SETTING+">{data}</div>\n";var e='<img src="{data}" class="file-preview-image kv-preview-data" title="{caption}" alt="{caption}" '+c.STYLE_SETTING+">\n";var h='<textarea class="kv-preview-data file-preview-text" title="{caption}" readonly '+c.STYLE_SETTING+">{data}</textarea>\n";var f='<video class="kv-preview-data file-preview-video" width="{width}" height="{height}" controls>\n<source src="{data}" type="{type}">\n'+
c.DEFAULT_PREVIEW+"\n</video>\n";a.defaults={layoutTemplates:{main1:'{preview}\n<div class="kv-upload-progress hide"></div>\n<div class="input-group {class}">\n   {caption}\n   <div class="input-group-btn">\n       {remove}\n       {cancel}\n       {upload}\n       {browse}\n   </div>\n</div>',main2:'{preview}\n<div class="kv-upload-progress hide"></div>\n{remove}\n{cancel}\n{upload}\n{browse}\n',preview:'<div class="file-preview {class}">\n    {close}    <div class="{dropClass}">\n    <div class="file-preview-thumbnails">\n    </div>\n    <div class="clearfix"></div>    <div class="file-preview-status text-center text-success"></div>\n    <div class="kv-fileinput-error"></div>\n    </div>\n</div>',
close:"<div></div>\n",fileIcon:'<i class="glyphicon glyphicon-file kv-caption-icon"></i>',caption:'<div tabindex="500" class="form-control file-caption {class}">\n</div>\n',modalMain:b,modal:'<div class="modal-dialog modal-lg" role="document">\n  <div class="modal-content">\n    <div class="modal-header">\n      <div class="kv-zoom-actions pull-right">{toggleheader}{fullscreen}{borderless}{close}</div>\n      <h3 class="modal-title">{heading} <small><span class="kv-zoom-title"></span></small></h3>\n    </div>\n    <div class="modal-body">\n      <div class="floating-buttons"></div>\n      <div class="kv-zoom-body file-zoom-content"></div>\n{prev} {next}\n    </div>\n  </div>\n</div>\n',
progress:'<div class="progress">\n    <div class="{class}" role="progressbar" aria-valuenow="{percent}" aria-valuemin="0" aria-valuemax="100" style="width:{percent}%;">\n        {status}\n     </div>\n</div>',size:" <samp>({sizeText})</samp>",footer:'<div class="file-thumbnail-footer"> <div class="remove-  "> <i class="fa fa-trash" aria-hidden="true"></i></div>\n    <div class="file-footer-caption" title="{caption}">{caption}<br>{size}</div>  \n    {progress} {actions}\n</div>',actions:'<div></div>\n{drag}\n<div class="file-actions">\n    <div class="file-footer-buttons">\n',
actionDelete:'<button type="button" class="kv-file-remove {removeClass}" title="{removeTitle}" {dataUrl}{dataKey}>{removeIcon}</button>\n',actionUpload:'<button type="button" class="kv-file-upload {uploadClass}" title="{uploadTitle}">{uploadIcon}</button>',actionZoom:'<button type="button" class="kv-file-zoom {zoomClass}" title="{zoomTitle}">{zoomIcon}</button>',actionDrag:'<span class="file-drag-handle {dragClass}" title="{dragTitle}">{dragIcon}</span>',btnDefault:'<button type="{type}" tabindex="500" title="{title}" class="{css}" {status}>{icon} {label}</button>',
btnLink:'<a href="{href}" tabindex="500" title="{title}" class="{css}" {status}>{icon} {label}</a>',btnBrowse:'<div tabindex="500" class="{css}" {status}>{icon} {label}</div>',zoomCache:'<div class="kv-zoom-cache" style="display:none">{zoomContent}</div>'},previewMarkupTags:{tagBefore1:'  <div class="file-preview-frame {frameClass}" id="{previewId}" data-fileindex="{fileindex}" data-template="{template}"> <div class="kv-file-content">\n',tagBefore2:'  <div class="file-preview-frame {frameClass}" id="{previewId}" data-fileindex="{fileindex}" data-template="{template}" title="{caption}"><div class="kv-file-content">\n',
tagAfter:"</div>{footer}\n</div> \n"},previewContentTemplates:{generic:"{content}\n",html:g,image:e,text:h,video:f,audio:'<div class="file-preview-audio"><audio class="kv-preview-data" controls>\n<source src="{data}" type="{type}">\n'+c.DEFAULT_PREVIEW+"\n</audio></div>\n",flash:'<object class="kv-preview-data file-object" type="application/x-shockwave-flash" width="{width}" height="{height}" data="{data}">\n'+c.OBJECT_PARAMS+" "+c.DEFAULT_PREVIEW+"\n</object>\n",object:'<object class="kv-preview-data file-object" data="{data}" type="{type}" width="{width}" height="{height}">\n<param name="movie" value="{caption}" />\n'+
c.OBJECT_PARAMS+" "+c.DEFAULT_PREVIEW+"\n</object>\n",pdf:'<embed class="kv-preview-data" src="{data}" width="{width}" height="{height}" type="application/pdf">\n',other:'<div class="kv-preview-data file-preview-other-frame">\n'+c.DEFAULT_PREVIEW+"\n</div>\n"},allowedPreviewTypes:"image html text video audio flash pdf object".split(" "),previewTemplates:{},previewSettings:{image:{width:"100px",height:"100px"},html:{width:"213px",height:"160px"},text:{width:"213px",height:"160px"},video:{width:"213px",
height:"160px"},audio:{width:"213px",height:"80px"},flash:{width:"213px",height:"160px"},object:{width:"160px",height:"auto"},pdf:{width:"160px",height:"160px"},other:{width:"160px",height:"160px"}},previewZoomSettings:{image:{width:"auto",height:"auto","max-width":"100%","max-height":"100%"},html:{width:"100%",height:"100%","min-height":"480px"},text:{width:"100%",height:"100%","min-height":"480px"},video:{width:"auto",height:"100%","max-width":"100%"},audio:{width:"100%",height:"30px"},flash:{width:"auto",
height:"480px"},object:{width:"auto",height:"100%","min-height":"480px"},pdf:{width:"100%",height:"100%","min-height":"480px"},other:{width:"auto",height:"100%","min-height":"480px"}},fileTypeSettings:{image:function(a,b){return c.compare(a,"image.*")||c.compare(b,/\.(gif|png|jpe?g)$/i)},html:function(a,b){return c.compare(a,"text/html")||c.compare(b,/\.(htm|html)$/i)},text:function(a,b){return c.compare(a,"text.*")||c.compare(b,/\.(xml|javascript)$/i)||c.compare(b,/\.(txt|md|csv|nfo|ini|json|php|js|css)$/i)},
video:function(a,b){return c.compare(a,"video.*")&&(c.compare(a,/(ogg|mp4|mp?g|mov|webm|3gp|avi)$/i)||c.compare(b,/\.(og?|mp4|webm|mp?g|mov|3gp|avi)$/i))},audio:function(a,b){return c.compare(a,"audio.*")&&(c.compare(b,/(ogg|mp3|mp?g|wav)$/i)||c.compare(b,/\.(og?|mp3|mp?g|wav)$/i))},flash:function(a,b){return c.compare(a,"application/x-shockwave-flash",!0)||c.compare(b,/\.(swf)$/i)},pdf:function(a,b){return c.compare(a,"application/pdf",!0)||c.compare(b,/\.(pdf)$/i)},object:function(){return!0},other:function(){return!0}},
fileActionSettings:{showRemove:!0,showUpload:!0,showZoom:!0,showDrag:!0,removeIcon:'<i class="fa fa-trash" aria-hidden="true"></i>',removeClass:"btn btn-xs btn-default",removeTitle:"Remove file",uploadIcon:'<i class="glyphicon glyphicon-upload text-info"></i>',uploadClass:"btn btn-xs btn-default",uploadTitle:"Upload file",zoomIcon:'<i class="fa fa-trash" aria-hidden="true"></i>',zoomClass:"btn btn-xs btn-default",zoomTitle:"View Details",dragIcon:'<i class="glyphicon glyphicon-menu-hamburger"></i>',
dragClass:"text-info",dragTitle:"Move / Rearrange",dragSettings:{},indicatorSuccess:'<i class="glyphicon glyphicon-ok-sign text-success"></i>',indicatorError:'<i class="glyphicon glyphicon-exclamation-sign text-danger"></i>',indicatorLoading:'<i class="glyphicon glyphicon-hand-up text-muted"></i>',indicatorNewTitle:"Not uploaded yet",indicatorSuccessTitle:"Uploaded",indicatorErrorTitle:"Upload Error",indicatorLoadingTitle:"Uploading ..."}};d.each(a.defaults,function(b,c){"allowedPreviewTypes"===b?
void 0===a.allowedPreviewTypes&&(a.allowedPreviewTypes=c):a[b]=d.extend(!0,{},c,a[b])});a._initPreviewTemplates()},_initPreviewTemplates:function(){var a=this,b=a.previewMarkupTags,g,e=b.tagAfter;d.each(a.defaults.previewContentTemplates,function(d,f){if(c.isEmpty(a.previewTemplates[d])){g=b.tagBefore2;if("generic"===d||"image"===d||"html"===d||"text"===d)g=b.tagBefore1;a.previewTemplates[d]=g+f+e}})},_initPreviewCache:function(){var a=this;a.previewCache={data:{},init:function(){var b=a.initialPreview;
0<b.length&&!c.isArray(b)&&(b=b.split(a.initialPreviewDelimiter));a.previewCache.data={content:b,config:a.initialPreviewConfig,tags:a.initialPreviewThumbTags}},fetch:function(){return a.previewCache.data.content.filter(function(a){return null!==a})},count:function(b){return a.previewCache.data&&a.previewCache.data.content?b?a.previewCache.data.content.length:a.previewCache.fetch().length:0},get:function(b,g){var e="init_"+b,h=a.previewCache.data,f=h.config[b],l=h.content[b],m=a.previewInitId+"-"+
e,n=c.ifSet("previewAsData",f,a.initialPreviewAsData),u=function(b,d,g,e,h,f,k,l,m){l=" file-preview-initial "+c.SORT_CSS+(l?" "+l:"");return a._generatePreviewTemplate(b,d,g,e,h,!1,null,l,f,k,m)};if(!l)return"";g=void 0===g?!0:g;var r=c.ifSet("type",f,a.initialPreviewFileType||"generic");var t=c.ifSet("filename",f,c.ifSet("caption",f));var y=c.ifSet("filetype",f,r);var v=a.previewCache.footer(b,g,f&&f.size||null);var w=c.ifSet("frameClass",f);e=n?u(r,l,t,y,m,v,e,w):u("generic",l,t,y,m,v,e,w,r).replace(/\{content}/g,
h.content[b]);h.tags.length&&h.tags[b]&&(e=c.replaceTags(e,h.tags[b]));c.isEmpty(f)||c.isEmpty(f.frameAttr)||(h=d(document.createElement("div")).html(e),h.find(".file-preview-initial").attr(f.frameAttr),e=h.html(),h.remove());return e},add:function(b,d,e,h){var g=a.previewCache.data;c.isArray(b)||(b=b.split(a.initialPreviewDelimiter));h?(h=g.content.push(b)-1,g.config[h]=d,g.tags[h]=e):(h=b.length-1,g.content=b,g.config=d,g.tags=e);a.previewCache.data=g;return h},set:function(b,d,e,h){var g=a.previewCache.data;
if(b&&b.length&&(c.isArray(b)||(b=b.split(a.initialPreviewDelimiter)),b.filter(function(a){return null!==a}).length)){void 0===g.content&&(g.content=[]);void 0===g.config&&(g.config=[]);void 0===g.tags&&(g.tags=[]);if(h){for(h=0;h<b.length;h++)b[h]&&g.content.push(b[h]);for(h=0;h<d.length;h++)d[h]&&g.config.push(d[h]);for(h=0;h<e.length;h++)e[h]&&g.tags.push(e[h])}else g.content=b,g.config=d,g.tags=e;a.previewCache.data=g}},unset:function(b){var c=a.previewCache.count();c&&(1===c?(a.previewCache.data.content=
[],a.previewCache.data.config=[],a.previewCache.data.tags=[],a.initialPreview=[],a.initialPreviewConfig=[],a.initialPreviewThumbTags=[]):(a.previewCache.data.content[b]=null,a.previewCache.data.config[b]=null,a.previewCache.data.tags[b]=null))},out:function(){var b="";var c=a.previewCache.count(!0);var d;if(0===c)return{content:"",caption:""};for(d=0;d<c;d++)b+=a.previewCache.get(d);c=a._getMsgSelected(a.previewCache.count());return{content:b,caption:c}},footer:function(b,d,e){var g=a.previewCache.data;
if(!g||!g.config||0===g.config.length||c.isEmpty(g.config[b]))return"";d=void 0===d?!0:d;var f=g.config[b];b=c.ifSet("caption",f);g="";var l=c.ifSet("width",f,"auto"),m=c.ifSet("url",f,!1),n=c.ifSet("key",f,null),u=a.fileActionSettings,r=c.ifSet("showDelete",f,!0),t=c.ifSet("showZoom",f,u.showZoom);f=c.ifSet("showDrag",f,u.showDrag);a.initialPreviewShowDelete&&(g=a._renderFileActions(!1,r,t,f,!1===m&&d,m,n,!0));return a._getLayoutTemplate("footer").replace(/\{progress}/g,a._renderThumbProgress()).replace(/\{actions}/g,
g).replace(/\{caption}/g,b).replace(/\{size}/g,a._getSize(e)).replace(/\{width}/g,l).replace(/\{indicator}/g,"").replace(/\{indicatorTitle}/g,"")}};a.previewCache.init()},_handler:function(a,b,c){var d=this.namespace;b=b.split(" ").join(d+" ")+d;if(a&&a.length)a.off(b).on(b,c)},_log:function(a){var b=this.$element.attr("id");b&&(a='"'+b+'": '+a);"undefined"!==typeof window.console.log?window.console.log(a):window.alert(a)},_validate:function(){var a="file"===this.$element.attr("type");a||this._log('The input "type" must be set to "file" for initializing the "bootstrap-fileinput" plugin.');
return a},_errorsExist:function(){if(this.$errorContainer.find("li").length)return!0;var a=d(document.createElement("div")).html(this.$errorContainer.html());a.find("span.kv-error-close").remove();a.find("ul").remove();return d.trim(a.text()).length?!0:!1},_errorHandler:function(a,b){var c=a.target.error;c.code===c.NOT_FOUND_ERR?this._showError(this.msgFileNotFound.replace("{name}",b)):c.code===c.SECURITY_ERR?this._showError(this.msgFileSecured.replace("{name}",b)):c.code===c.NOT_READABLE_ERR?this._showError(this.msgFileNotReadable.replace("{name}",
b)):c.code===c.ABORT_ERR?this._showError(this.msgFilePreviewAborted.replace("{name}",b)):this._showError(this.msgFilePreviewError.replace("{name}",b))},_addError:function(a){var b=this.$errorContainer;a&&b.length&&(b.html(this.errorCloseButton+a),this._handler(b.find(".kv-error-close"),"click",function(){b.fadeOut("slow")}))},_resetErrors:function(a){var b=this.$errorContainer;this.isError=!1;this.$container.removeClass("has-error");b.html("");a?b.fadeOut("slow"):b.hide()},_showFolderError:function(a){var b=
this.$errorContainer;if(a){var d=this.msgFoldersNotAllowed.replace(/\{n}/g,a);this._addError(d);c.addCss(this.$container,"has-error");b.fadeIn(800);this._raise("filefoldererror",[a,d])}},_showUploadError:function(a,b,d){var g=this.$errorContainer;d=d||"fileuploaderror";var f=b&&b.id?'<li data-file-id="'+b.id+'">'+a+"</li>":"<li>"+a+"</li>";0===g.find("ul").length?this._addError("<ul>"+f+"</ul>"):g.find("ul").append(f);g.fadeIn(800);this._raise(d,[b,a]);this.$container.removeClass("file-input-new");
c.addCss(this.$container,"has-error");return!0},_showError:function(a,b,d){var g=this.$errorContainer;d=d||"fileerror";b=b||{};b.reader=this.reader;this._addError(a);g.fadeIn(800);this._raise(d,[b,a]);this.isUploadable||this._clearFileInput();this.$container.removeClass("file-input-new");c.addCss(this.$container,"has-error");this.$btnUpload.attr("disabled",!0);return!0},_noFilesError:function(a){var b=1<this.minFileCount?this.filePlural:this.fileSingle;b=this.msgFilesTooLess.replace("{n}",this.minFileCount).replace("{files}",
b);var d=this.$errorContainer;this._addError(b);this.isError=!0;this._updateFileDetails(0);d.fadeIn(800);this._raise("fileerror",[a,b]);this._clearFileInput();c.addCss(this.$container,"has-error")},_parseError:function(a,b,c,e){c=d.trim(c+"");var g="."===c.slice(-1)?"":".";b=void 0!==b.responseJSON&&void 0!==b.responseJSON.error?b.responseJSON.error:b.responseText;this.cancelling&&this.msgUploadAborted&&(c=this.msgUploadAborted);this.showAjaxErrorDetails&&b?(b=d.trim(b.replace(/\n\s*\n/g,"\n")),b=
0<b.length?"<pre>"+b+"</pre>":"",c+=g+b):c+=g;c===g&&(c=this.msgAjaxError.replace("{operation}",a));this.cancelling=!1;return e?"<b>"+e+": </b>"+c:c},_parseFileType:function(a){var b,d=this.allowedPreviewTypes;for(b=0;b<d.length;b++){var e=d[b];var f=this.fileTypeSettings[e];f=f(a.type,a.name)?e:"";if(!c.isEmpty(f))return f}return"other"},_getPreviewIcon:function(a){var b=this,c=null;if(a&&-1<a.indexOf(".")){var e=a.split(".").pop();b.previewFileIconSettings&&b.previewFileIconSettings[e]&&(c=b.previewFileIconSettings[e]);
b.previewFileExtSettings&&d.each(b.previewFileExtSettings,function(a,d){b.previewFileIconSettings[a]&&d(e)&&(c=b.previewFileIconSettings[a])})}return c},_parseFilePreviewIcon:function(a,b){var c=this._getPreviewIcon(b)||this.previewFileIcon;-1<a.indexOf("{previewFileIcon}")&&(a=a.replace(/\{previewFileIconClass}/g,this.previewFileIconClass).replace(/\{previewFileIcon}/g,c));return a},_raise:function(a,b){var c=d.Event(a);void 0!==b?this.$element.trigger(c,b):this.$element.trigger(c);if(c.isDefaultPrevented()||
!1===c.result)return!1;switch(a){case "filebatchuploadcomplete":case "filebatchuploadsuccess":case "fileuploaded":case "fileclear":case "filecleared":case "filereset":case "fileerror":case "filefoldererror":case "fileuploaderror":case "filebatchuploaderror":case "filedeleteerror":case "filecustomerror":case "filesuccessremove":break;default:this.ajaxAborted=c.result}return!0},_listenFullScreen:function(a){var b=this.$modal;if(b&&b.length){var c=b&&b.find(".btn-fullscreen");var d=b&&b.find(".btn-borderless");
c.length&&d.length&&(c.removeClass("active").attr("aria-pressed","false"),d.removeClass("active").attr("aria-pressed","false"),a?c.addClass("active").attr("aria-pressed","true"):d.addClass("active").attr("aria-pressed","true"),b.hasClass("file-zoom-fullscreen")?this._maximizeZoomDialog():a?this._maximizeZoomDialog():d.removeClass("active").attr("aria-pressed","false"))}},_listen:function(){var a=this,b=a.$form,g=a.$container;a._handler(a.$element,"change",d.proxy(a._change,a));a.showBrowse&&a._handler(a.$btnFile,
"click",d.proxy(a._browse,a));a._handler(g.find(".fileinput-remove:not([disabled])"),"click",d.proxy(a.clear,a));a._handler(g.find(".fileinput-cancel"),"click",d.proxy(a.cancel,a));a._initDragDrop();a._handler(b,"reset",d.proxy(a.reset,a));a.isUploadable||a._handler(b,"submit",d.proxy(a._submitForm,a));a._handler(a.$container.find(".fileinput-upload"),"click",d.proxy(a._uploadClick,a));a._handler(d(window),"resize",function(){a._listenFullScreen(screen.width===window.innerWidth&&screen.height===window.innerHeight)});
a._handler(d(document),"webkitfullscreenchange mozfullscreenchange fullscreenchange MSFullscreenChange",function(){a._listenFullScreen(c.checkFullScreen())});a._initClickable()},_initClickable:function(){var a=this;if(a.isClickable){var b=a.isUploadable?a.$dropZone:a.$preview.find(".file-default-preview");c.addCss(b,"clickable");b.attr("tabindex",-1);a._handler(b,"click",function(c){c=d(c.target);if(!c.parents(".file-preview-thumbnails").length||c.parents(".file-default-preview").length)a.$element.trigger("click"),
b.blur()})}},_initDragDrop:function(){var a=this.$dropZone;this.isUploadable&&this.dropZoneEnabled&&this.showPreview&&(this._handler(a,"dragenter dragover",d.proxy(this._zoneDragEnter,this)),this._handler(a,"dragleave",d.proxy(this._zoneDragLeave,this)),this._handler(a,"drop",d.proxy(this._zoneDrop,this)),this._handler(d(document),"dragenter dragover drop",this._zoneDragDropInit))},_zoneDragDropInit:function(a){a.stopPropagation();a.preventDefault()},_zoneDragEnter:function(a){var b=-1<d.inArray("Files",
a.originalEvent.dataTransfer.types);this._zoneDragDropInit(a);this.isDisabled||!b?(a.originalEvent.dataTransfer.effectAllowed="none",a.originalEvent.dataTransfer.dropEffect="none"):c.addCss(this.$dropZone,"file-highlighted")},_zoneDragLeave:function(a){this._zoneDragDropInit(a);this.isDisabled||this.$dropZone.removeClass("file-highlighted")},_zoneDrop:function(a){a.preventDefault();this.isDisabled||c.isEmpty(a.originalEvent.dataTransfer.files)||(this._change(a,"dragdrop"),this.$dropZone.removeClass("file-highlighted"))},
_uploadClick:function(a){var b=this.$container.find(".fileinput-upload"),d=!b.hasClass("disabled")&&c.isEmpty(b.attr("disabled"));a&&a.isDefaultPrevented()||(this.isUploadable?(a.preventDefault(),d&&this.upload()):d&&"submit"!==b.attr("type")&&(b=b.closest("form"),b.length&&b.trigger("submit"),a.preventDefault()))},_submitForm:function(){var a=this.$element.get(0).files;return a&&0<this.minFileCount&&this._getFileCount(a.length)<this.minFileCount?(this._noFilesError({}),!1):!this._abort({})},_clearPreview:function(){var a=
this.$preview;(this.showUploadedThumbs?a.find(c.FRAMES+":not(.file-preview-success)"):a.find(c.FRAMES)).each(function(){var b=d(this);b.remove();c.cleanZoomCache(a.find("#zoom-"+b.attr("id")))});this.$preview.find(c.FRAMES).length&&this.showPreview||this._resetUpload();this._validateDefaultPreview()},_initSortable:function(){var a=this,b=a.$preview;var g="."+c.SORT_CSS;window.KvSortable&&0!==b.find(g).length&&(g={handle:".drag-handle-init",dataIdAttr:"data-preview-id",draggable:g,onSort:function(b){var g=
b.oldIndex,e=b.newIndex;a.initialPreview=c.moveArray(a.initialPreview,g,e);a.initialPreviewConfig=c.moveArray(a.initialPreviewConfig,g,e);a.previewCache.init();for(var f=0;f<a.initialPreviewConfig.length;f++)if(null!==a.initialPreviewConfig[f]){var m=a.initialPreviewConfig[f].key;m=d(".kv-file-remove[data-key='"+m+"']").closest(c.FRAMES);m.attr("data-fileindex","init_"+f).data("fileindex","init_"+f)}a._raise("filesorted",{previewId:d(b.item).attr("id"),oldIndex:g,newIndex:e,stack:a.initialPreviewConfig})}},
b.data("kvsortable")&&b.kvsortable("destroy"),d.extend(!0,g,a.fileActionSettings.dragSettings),b.kvsortable(g))},_initPreview:function(a){var b=this.initialCaption||"";if(this.previewCache.count()){var d=this.previewCache.out();b=a&&this.initialCaption?this.initialCaption:d.caption;this.$preview.html(d.content);this._setInitThumbAttr();this._setCaption(b);this._initSortable();c.isEmpty(d.content)||this.$container.removeClass("file-input-new")}else this._clearPreview(),a?this._setCaption(b):this._initCaption()},
_getZoomButton:function(a){var b=this.previewZoomButtonIcons[a],c=this.previewZoomButtonClasses[a],d=' title="'+(this.previewZoomButtonTitles[a]||"")+'" '+("close"===a?' data-dismiss="modal" aria-hidden="true"':"");if("fullscreen"===a||"borderless"===a||"toggleheader"===a)d+=' data-toggle="button" aria-pressed="false" autocomplete="off"';return'<button type="button" class="'+c+" btn-"+a+'"'+d+">"+b+"</button>"},_getModalContent:function(){return this._getLayoutTemplate("modal").replace(/\{heading}/g,
this.msgZoomModalHeading).replace(/\{prev}/g,this._getZoomButton("prev")).replace(/\{next}/g,this._getZoomButton("next")).replace(/\{toggleheader}/g,this._getZoomButton("toggleheader")).replace(/\{fullscreen}/g,this._getZoomButton("fullscreen")).replace(/\{borderless}/g,this._getZoomButton("borderless")).replace(/\{close}/g,this._getZoomButton("close"))},_listenModalEvent:function(a){var b=this,d=b.$modal;d.on(a+".bs.modal",function(g){var e=d.find(".btn-fullscreen"),f=d.find(".btn-borderless");b._raise("filezoom"+
a,{sourceEvent:g,previewId:d.data("previewId"),modal:d});"shown"===a&&(f.removeClass("active").attr("aria-pressed","false"),e.removeClass("active").attr("aria-pressed","false"),d.hasClass("file-zoom-fullscreen")&&(b._maximizeZoomDialog(),c.checkFullScreen()?e.addClass("active").attr("aria-pressed","true"):f.addClass("active").attr("aria-pressed","true")))})},_initZoom:function(){var a=this;var b=a._getLayoutTemplate("modalMain");a.showPreview&&(a.$modal=d("#"+c.MODAL_ID),a.$modal&&a.$modal.length||
(b=d(document.createElement("div")).html(b).insertAfter(a.$container),a.$modal=d("#"+c.MODAL_ID).insertBefore(b),b.remove()),c.initModal(a.$modal),a.$modal.html(a._getModalContent()),d.each(c.MODAL_EVENTS,function(b,c){a._listenModalEvent(c)}))},_initZoomButtons:function(){var a=this.$modal.data("previewId")||"";var b=this.$preview.find(c.FRAMES).toArray();var g=b.length,e=this.$modal.find(".btn-prev"),f=this.$modal.find(".btn-next");if(2>b.length)e.hide(),f.hide();else if(e.show(),f.show(),g){var k=
d(b[0]);b=d(b[g-1]);e.removeAttr("disabled");f.removeAttr("disabled");k.length&&k.attr("id")===a&&e.attr("disabled",!0);b.length&&b.attr("id")===a&&f.attr("disabled",!0)}},_maximizeZoomDialog:function(){var a=this.$modal,b=a.find(".modal-header:visible"),c=a.find(".modal-footer:visible"),e=a.find(".modal-body"),f=d(window).height();a.addClass("file-zoom-fullscreen");b&&b.length&&(f-=b.outerHeight(!0));c&&c.length&&(f-=c.outerHeight(!0));e&&e.length&&(b=e.outerHeight(!0)-e.height(),f-=b);a.find(".kv-zoom-body").height(f)},
_resizeZoomDialog:function(a){var b=this.$modal,d=b.find(".btn-fullscreen"),e=b.find(".btn-borderless");if(b.hasClass("file-zoom-fullscreen"))(c.toggleFullScreen(!1),a)?d.hasClass("active")||(b.removeClass("file-zoom-fullscreen"),this._resizeZoomDialog(!0),e.hasClass("active")&&e.removeClass("active").attr("aria-pressed","false")):d.hasClass("active")?d.removeClass("active").attr("aria-pressed","false"):(b.removeClass("file-zoom-fullscreen"),this.$modal.find(".kv-zoom-body").css("height",this.zoomModalHeight));
else{if(!a){this._maximizeZoomDialog();return}c.toggleFullScreen(!0)}b.focus()},_setZoomContent:function(a,b){var g=this,e=a.attr("id"),f=g.$modal,k=f.find(".btn-prev"),l=f.find(".btn-next"),m=f.find(".btn-fullscreen"),n=f.find(".btn-borderless"),u=f.find(".btn-toggleheader");var r=g.$preview.find("#zoom-"+e);var t=r.attr("data-template")||"generic";r=r.find(".kv-file-content");r=r.length?r.html():"";var y=a.data("caption")||"";var v=a.data("size")||"";y=y+" "+v;f.find(".kv-zoom-title").html(y);var w=
f.find(".kv-zoom-body");f.removeClass("kv-single-content");if(b){var G=w.clone().insertAfter(w);w.html(r).hide();G.fadeOut("fast",function(){w.fadeIn("fast");G.remove()})}else w.html(r);if(t=g.previewZoomSettings[t]){var H=w.find(".kv-preview-data");c.addCss(H,"file-zoom-detail");d.each(t,function(a,b){H.css(a,b);(H.attr("width")&&"width"===a||H.attr("height")&&"height"===a)&&H.removeAttr(a)})}f.data("previewId",e);g._handler(k,"click",function(){g._zoomSlideShow("prev",e)});g._handler(l,"click",
function(){g._zoomSlideShow("next",e)});g._handler(m,"click",function(){g._resizeZoomDialog(!0)});g._handler(n,"click",function(){g._resizeZoomDialog(!1)});g._handler(u,"click",function(){var a=f.find(".modal-header"),b=f.find(".modal-body .floating-buttons"),c=a.find(".kv-zoom-actions"),d=function(b){var c=g.$modal.find(".kv-zoom-body"),d=g.zoomModalHeight;f.hasClass("file-zoom-fullscreen")&&(d=c.outerHeight(!0),b||(d-=a.outerHeight(!0)));c.css("height",b?d+b:d)};if(a.is(":visible")){var e=a.outerHeight(!0);
a.slideUp("slow",function(){c.find(".btn").appendTo(b);d(e)})}else b.find(".btn").appendTo(c),a.slideDown("slow",function(){d()});f.focus()});g._handler(f,"keydown",function(a){a=a.which||a.keyCode;37!==a||k.attr("disabled")||g._zoomSlideShow("prev",e);39!==a||l.attr("disabled")||g._zoomSlideShow("next",e)})},_zoomPreview:function(a){var b=this.$modal;if(!a.length)throw"Cannot zoom to detailed preview!";c.initModal(b);b.html(this._getModalContent());a=a.closest(c.FRAMES);this._setZoomContent(a);b.modal("show");
this._initZoomButtons()},_zoomSlideShow:function(a,b){var g=this.$modal.find(".kv-zoom-actions .btn-"+a);var e=this.$preview.find(c.FRAMES).toArray();var f=e.length;if(!g.attr("disabled")){for(g=0;g<f;g++)if(d(e[g]).attr("id")===b){var k="prev"===a?g-1:g+1;break}0>k||k>=f||!e[k]||(e=d(e[k]),e.length&&this._setZoomContent(e,!0),this._initZoomButtons(),this._raise("filezoom"+a,{previewId:b,modal:this.$modal}))}},_initZoomButton:function(){var a=this;a.$preview.find(".kv-file-zoom").each(function(){var b=
d(this);a._handler(b,"click",function(){a._zoomPreview(b)})})},_clearObjects:function(a){a.find("video audio").each(function(){this.pause();d(this).remove()});a.find("img object div").each(function(){d(this).remove()})},_clearFileInput:function(){var a=this.$element;this.fileInputCleared=!0;if(!c.isEmpty(a.val()))if(this.isIE9||this.isIE10){var b=a.closest("form");var g=d(document.createElement("form"));var e=d(document.createElement("div"));a.before(e);b.length?b.after(g):e.after(g);g.append(a).trigger("reset");
e.before(a).remove();g.remove()}else a.val("")},_resetUpload:function(){this.uploadCache={content:[],config:[],tags:[],append:!0};this.uploadCount=0;this.uploadStatus={};this.uploadLog=[];this.uploadAsyncCount=0;this.loadedImages=[];this.totalImagesCount=0;this.$btnUpload.removeAttr("disabled");this._setProgress(0);c.addCss(this.$progress,"hide");this._resetErrors(!1);this.ajaxAborted=!1;this.ajaxRequests=[];this._resetCanvas();this.cacheInitialPreview={};this.overwriteInitial&&(this.initialPreview=
[],this.initialPreviewConfig=[],this.initialPreviewThumbTags=[],this.previewCache.data={content:[],config:[],tags:[]})},_resetCanvas:function(){this.canvas&&this.imageCanvasContext&&this.imageCanvasContext.clearRect(0,0,this.canvas.width,this.canvas.height)},_hasInitialPreview:function(){return!this.overwriteInitial&&this.previewCache.count()},_resetPreview:function(){if(this.previewCache.count()){var a=this.previewCache.out();this.$preview.html(a.content);this._setInitThumbAttr();a=this.initialCaption?
this.initialCaption:a.caption;this._setCaption(a)}else this._clearPreview(),this._initCaption();this.showPreview&&(this._initZoom(),this._initSortable())},_clearDefaultPreview:function(){this.$preview.find(".file-default-preview").remove()},_validateDefaultPreview:function(){this.showPreview&&!c.isEmpty(this.defaultPreviewContent)&&(this.$preview.html('<div class="file-default-preview">'+this.defaultPreviewContent+"</div>"),this.$container.removeClass("file-input-new"),this._initClickable())},_resetPreviewThumbs:function(a){a?
(this._clearPreview(),this.clearStack()):this._hasInitialPreview()?(a=this.previewCache.out(),this.$preview.html(a.content),this._setInitThumbAttr(),this._setCaption(a.caption),this._initPreviewActions()):this._clearPreview()},_getLayoutTemplate:function(a){a=this.layoutTemplates[a];return c.isEmpty(this.customLayoutTags)?a:c.replaceTags(a,this.customLayoutTags)},_getPreviewTemplate:function(a){a=this.previewTemplates[a];return c.isEmpty(this.customPreviewTags)?a:c.replaceTags(a,this.customPreviewTags)},
_getOutData:function(a,b,c){a=a||{};b=b||{};c=c||this.filestack.slice(0)||{};return{form:this.formdata,files:c,filenames:this.filenames,filescount:this.getFilesCount(),extra:this._getExtraData(),response:b,reader:this.reader,jqXHR:a}},_getMsgSelected:function(a){var b=1===a?this.fileSingle:this.filePlural;return 0<a?this.msgSelected.replace("{n}",a).replace("{files}",b):this.msgNoFilesSelected},_getThumbs:function(a){return this.$preview.find(c.FRAMES+":not(.file-preview-initial)"+(a||""))},_getExtraData:function(a,
b){var c=this.uploadExtraData;"function"===typeof this.uploadExtraData&&(c=this.uploadExtraData(a,b));return c},_initXhr:function(a,b,c){var d=this;a.upload&&a.upload.addEventListener("progress",function(a){var e=0,g=a.total,f=a.loaded||a.position;a.lengthComputable&&(e=Math.floor(f/g*100));b?d._setAsyncUploadStatus(b,e,c):d._setProgress(e)},!1);return a},_ajaxSubmit:function(a,b,c,e,f,k){var g=this;g._raise("filepreajax",[f,k])&&(g._uploadExtra(f,k),a=d.extend(!0,{},{xhr:function(){var a=d.ajaxSettings.xhr();
return g._initXhr(a,f,g.getFileStack().length)},url:g.uploadUrl,type:"POST",dataType:"json",data:g.formdata,cache:!1,processData:!1,contentType:!1,beforeSend:a,success:b,complete:c,error:e},g.ajaxSettings),g.ajaxRequests.push(d.ajax(a)))},_mergeArray:function(a,b){var d=c.cleanArray(this[a]),e=c.cleanArray(b);this[a]=d.concat(e)},_initUploadSuccess:function(a,b,g){var e=this;if(e.showPreview&&"object"===typeof a&&!d.isEmptyObject(a)&&void 0!==a.initialPreview&&0<a.initialPreview.length){e.hasInitData=
!0;var f=a.initialPreview||[];var k=a.initialPreviewConfig||[];var l=a.initialPreviewThumbTags||[];a=void 0===a.append||a.append?!0:!1;0<f.length&&!c.isArray(f)&&(f=f.split(e.initialPreviewDelimiter));e._mergeArray("initialPreview",f);e._mergeArray("initialPreviewConfig",k);e._mergeArray("initialPreviewThumbTags",l);if(void 0!==b)if(g)g=b.attr("data-fileindex"),e.uploadCache.content[g]=f[0],e.uploadCache.config[g]=k[0]||[],e.uploadCache.tags[g]=l[0]||[],e.uploadCache.append=a;else{f=e.previewCache.add(f,
k[0],l[0],a);f=e.previewCache.get(f,!1);var m=d(document.createElement("div")).html(f).hide().insertAfter(b);(f=m.find(".kv-zoom-cache"))&&f.length&&f.insertAfter(b);b.fadeOut("slow",function(){var a=m.find(".file-preview-frame");a&&a.length&&a.insertBefore(b).fadeIn("slow").css("display:inline-block");e._initPreviewActions();e._clearFileInput();c.cleanZoomCache(e.$preview.find("#zoom-"+b.attr("id")));b.remove();m.remove();e._initSortable()})}else e.previewCache.set(f,k,l,a),e._initPreview(),e._initPreviewActions()}},
_initSuccessThumbs:function(){var a=this;a.showPreview&&a._getThumbs(c.FRAMES+".file-preview-success").each(function(){var b=d(this),g=a.$preview,e=b.find(".kv-file-remove");e.removeAttr("disabled");a._handler(e,"click",function(){var d=b.attr("id"),e=a._raise("filesuccessremove",[d,b.data("fileindex")]);c.cleanMemory(b);!1!==e&&b.fadeOut("slow",function(){c.cleanZoomCache(g.find("#zoom-"+d));b.remove();g.find(c.FRAMES).length||a.reset()})})})},_checkAsyncComplete:function(){var a;for(a=0;a<this.filestack.length;a++)if(this.filestack[a]){var b=
this.previewInitId+"-"+a;if(-1===d.inArray(b,this.uploadLog))return!1}return this.uploadAsyncCount===this.uploadLog.length},_uploadExtra:function(a,b){var c=this,e=c._getExtraData(a,b);0!==e.length&&d.each(e,function(a,b){c.formdata.append(a,b)})},_uploadSingle:function(a,b,g){var e=this,f=e.getFileStack().length,k=new FormData,l,m=e.previewInitId+"-"+a,n=0<e.filestack.length||!d.isEmptyObject(e.uploadExtraData),u=d("#"+m).find(".file-thumb-progress"),r={id:m,index:a};e.formdata=k;if(e.showPreview){var t=
d("#"+m+":not(.file-preview-initial)");var y=t.find(".kv-file-upload");var v=t.find(".kv-file-remove");u.removeClass("hide")}if(!(0===f||!n||y&&y.hasClass("disabled")||e._abort(r))){var w=function(a,b){e.updateStack(a,void 0);e.uploadLog.push(b);e._checkAsyncComplete()&&(e.fileBatchCompleted=!0)};var G=function(){var a=e.uploadCache,b,d,g,f=0,h=e.cacheInitialPreview;e.fileBatchCompleted&&(h&&h.content&&(f=h.content.length),setTimeout(function(){if(e.showPreview){e.previewCache.set(a.content,a.config,
a.tags,a.append);if(f){for(d=0;d<a.content.length;d++)g=d+f,h.content[g]=a.content[d],h.config.length&&(h.config[g]=a.config[d]),h.tags.length&&(h.tags[g]=a.tags[d]);e.initialPreview=c.cleanArray(h.content);e.initialPreviewConfig=c.cleanArray(h.config);e.initialPreviewThumbTags=c.cleanArray(h.tags)}else e.initialPreview=a.content,e.initialPreviewConfig=a.config,e.initialPreviewThumbTags=a.tags;e.cacheInitialPreview={};e.hasInitData&&(e._initPreview(),e._initPreviewActions())}e.unlock();e._clearFileInput();
b=e.$preview.find(".file-preview-initial");e.uploadAsync&&b.length&&(c.addCss(b,c.SORT_CSS),e._initSortable());e._raise("filebatchuploadcomplete",[e.filestack,e._getExtraData()]);e.uploadCount=0;e.uploadStatus={};e.uploadLog=[];e._setProgress(101)},100))};k.append(e.uploadFileAttr,b[a],e.filenames[a]);k.append("file_id",a);e._ajaxSubmit(function(b){l=e._getOutData(b);e.fileBatchCompleted=!1;e.showPreview&&(t.hasClass("file-preview-success")||(e._setThumbStatus(t,"Loading"),c.addCss(t,"file-uploading")),
y.attr("disabled",!0),v.attr("disabled",!0));g||e.lock();e._raise("filepreupload",[l,m,a]);d.extend(!0,r,l);e._abort(r)&&(b.abort(),e._setProgressCancelled())},function(b,f,h){var k=e.showPreview&&t.attr("id")?t.attr("id"):m;l=e._getOutData(h,b);d.extend(!0,r,l);setTimeout(function(){c.isEmpty(b)||c.isEmpty(b.error)?(e.showPreview&&(e._setThumbStatus(t,"Success"),y.hide(),e._initUploadSuccess(b,t,g),e._setProgress(101,u)),e._raise("fileuploaded",[l,k,a]),g?w(a,k):e.updateStack(a,void 0)):(e._showUploadError(b.error,
r),e._setPreviewError(t,a),g&&w(a,k))},100)},function(){setTimeout(function(){e.showPreview&&(y.removeAttr("disabled"),v.removeAttr("disabled"),t.removeClass("file-uploading"));g?G():(e.unlock(!1),e._clearFileInput());e._initSuccessThumbs()},100)},function(c,f,h){var k=e.ajaxOperations.uploadThumb,l=e._parseError(k,c,h,g?b[a].name:null);setTimeout(function(){g&&w(a,m);e.uploadStatus[m]=100;e._setPreviewError(t,a);d.extend(!0,r,e._getOutData(c));e._setProgress(101,u,e.msgAjaxProgressError.replace("{operation}",
k));e._showUploadError(l,r)},100)},m,a)}},_uploadBatch:function(){var a=this,b=a.filestack,g=b.length,e={},f=0<a.filestack.length||!d.isEmptyObject(a.uploadExtraData);a.formdata=new FormData;if(0!==g&&f&&!a._abort(e)){var k=function(){d.each(b,function(b){a.updateStack(b,void 0)});a._clearFileInput()};d.each(b,function(d,e){c.isEmpty(b[d])||a.formdata.append(a.uploadFileAttr,e,a.filenames[d])});a._ajaxSubmit(function(b){a.lock();var e=a._getOutData(b);a.showPreview&&a._getThumbs().each(function(){var b=
d(this),e=b.find(".kv-file-upload"),g=b.find(".kv-file-remove");b.hasClass("file-preview-success")||(a._setThumbStatus(b,"Loading"),c.addCss(b,"file-uploading"));e.attr("disabled",!0);g.attr("disabled",!0)});a._raise("filebatchpreupload",[e]);a._abort(e)&&(b.abort(),a._setProgressCancelled())},function(b,e,g){e=a._getOutData(g,b);g=a._getThumbs(":not(.file-preview-error)");var f=0,h=c.isEmpty(b)||c.isEmpty(b.errorkeys)?[]:b.errorkeys;c.isEmpty(b)||c.isEmpty(b.error)?(a._raise("filebatchuploadsuccess",
[e]),k(),a.showPreview?(g.each(function(){var b=d(this),c=b.find(".kv-file-upload");b.find(".kv-file-upload").hide();a._setThumbStatus(b,"Success");b.removeClass("file-uploading");c.removeAttr("disabled")}),a._initUploadSuccess(b)):a.reset(),a._setProgress(101)):(a.showPreview&&(g.each(function(){var b=d(this),c=b.find(".kv-file-remove"),e=b.find(".kv-file-upload");b.removeClass("file-uploading");e.removeAttr("disabled");c.removeAttr("disabled");0===h.length?a._setPreviewError(b):(-1!==d.inArray(f,
h)?a._setPreviewError(b):(b.find(".kv-file-upload").hide(),a._setThumbStatus(b,"Success"),a.updateStack(f,void 0)),f++)}),a._initUploadSuccess(b)),a._showUploadError(b.error,e,"filebatchuploaderror"))},function(){a.unlock();a._initSuccessThumbs();a._clearFileInput();a._raise("filebatchuploadcomplete",[a.filestack,a._getExtraData()])},function(b,c,e){c=a._getOutData(b);var f=a.ajaxOperations.uploadBatch;b=a._parseError(f,b,e);a._showUploadError(b,c,"filebatchuploaderror");a.uploadFileCount=g-1;a.showPreview&&
(a._getThumbs().each(function(){var b=d(this),c=b.attr("data-fileindex");b.removeClass("file-uploading");void 0!==a.filestack[c]&&a._setPreviewError(b)}),a._getThumbs().removeClass("file-uploading"),a._getThumbs(" .kv-file-upload").removeAttr("disabled"),a._getThumbs(" .kv-file-delete").removeAttr("disabled"),a._setProgress(101,a.$progress,a.msgAjaxProgressError.replace("{operation}",f)))})}},_uploadExtraOnly:function(){var a=this,b={};a.formdata=new FormData;a._abort(b)||a._ajaxSubmit(function(c){a.lock();
var d=a._getOutData(c);a._raise("filebatchpreupload",[d]);a._setProgress(50);b.data=d;b.xhr=c;a._abort(b)&&(c.abort(),a._setProgressCancelled())},function(b,d,f){d=a._getOutData(f,b);c.isEmpty(b)||c.isEmpty(b.error)?(a._raise("filebatchuploadsuccess",[d]),a._clearFileInput(),a._initUploadSuccess(b),a._setProgress(101)):a._showUploadError(b.error,d,"filebatchuploaderror")},function(){a.unlock();a._clearFileInput();a._raise("filebatchuploadcomplete",[a.filestack,a._getExtraData()])},function(c,d,f){d=
a._getOutData(c);var e=a.ajaxOperations.uploadExtra;c=a._parseError(e,c,f);b.data=d;a._showUploadError(c,d,"filebatchuploaderror");a._setProgress(101,a.$progress,a.msgAjaxProgressError.replace("{operation}",e))})},_deleteFileIndex:function(a){var b=a.attr("data-fileindex");"init_"===b.substring(0,5)&&(b=parseInt(b.replace("init_","")),this.initialPreview=c.spliceArray(this.initialPreview,b),this.initialPreviewConfig=c.spliceArray(this.initialPreviewConfig,b),this.initialPreviewThumbTags=c.spliceArray(this.initialPreviewThumbTags,
b),this.$preview.find(c.FRAMES).each(function(){var a=d(this),c=a.attr("data-fileindex");"init_"===c.substring(0,5)&&(c=parseInt(c.replace("init_","")),c>b&&(c--,a.attr("data-fileindex","init_"+c)))}),this.uploadAsync&&(this.cacheInitialPreview=this.getPreview()))},_initFileActions:function(){var a=this,b=a.$preview;a.showPreview&&(a._initZoomButton(),b.find(c.FRAMES+" .kv-file-remove").each(function(){var g=d(this),e=g.closest(c.FRAMES),f,k=e.attr("id"),l=e.attr("data-fileindex"),m,n,u;a._handler(g,
"click",function(){u=a._raise("filepreremove",[k,l]);if(!1===u||!a._validateMinCount())return!1;f=e.hasClass("file-preview-error");c.cleanMemory(e);e.fadeOut("slow",function(){c.cleanZoomCache(b.find("#zoom-"+k));a.updateStack(l,void 0);a._clearObjects(e);e.remove();k&&f&&a.$errorContainer.find('li[data-file-id="'+k+'"]').fadeOut("fast",function(){d(this).remove();a._errorsExist()||a._resetErrors()});a._clearFileInput();var g=a.getFileStack(!0),h=a.previewCache.count(),u=g.length,v=a.showPreview&&
b.find(c.FRAMES).length;0!==u||0!==h||v?(m=h+u,n=1<m?a._getMsgSelected(m):g[0]?a._getFileNames()[0]:"",a._setCaption(n)):a.reset();a._raise("fileremoved",[k,l])})})}),a.$preview.find(c.FRAMES+" .kv-file-upload").each(function(){var b=d(this);a._handler(b,"click",function(){var d=b.closest(c.FRAMES),g=d.attr("data-fileindex");d.hasClass("file-preview-error")||a._uploadSingle(g,a.filestack,!1)})}))},_initPreviewActions:function(){var a=this,b=a.$preview,g=a.deleteExtraData||{},e=c.FRAMES+" .kv-file-remove",
f=function(){var c=a.isUploadable?a.previewCache.count():a.$element.get(0).files.length;0!==b.find(e).length||c||(a.reset(),a.initialCaption="")};a._initZoomButton();b.find(e).each(function(){var e=d(this),h=e.data("url")||a.deleteUrl,m=e.data("key");if(!c.isEmpty(h)&&void 0!==m){var n=e.closest(c.FRAMES),u=a.previewCache.data,r=n.data("fileindex");r=parseInt(r.replace("init_",""));u=c.isEmpty(u.config)&&c.isEmpty(u.config[r])?null:u.config[r];var t=c.isEmpty(u)||c.isEmpty(u.extra)?g:u.extra;"function"===
typeof t&&(t=t());var y={id:e.attr("id"),key:m,extra:t};var v=d.extend(!0,{},{url:h,type:"POST",dataType:"json",data:d.extend(!0,{},{key:m},t),beforeSend:function(b){a.ajaxAborted=!1;a._raise("filepredelete",[m,b,t]);a.ajaxAborted?b.abort():(c.addCss(n,"file-uploading"),c.addCss(e,"disabled"))},success:function(d,g,h){if(c.isEmpty(d)||c.isEmpty(d.error)){a.previewCache.init();r=parseInt(n.data("fileindex").replace("init_",""));a.previewCache.unset(r);var k=a.previewCache.count();d=0<k?a._getMsgSelected(k):
"";a._deleteFileIndex(n);a._setCaption(d);a._raise("filedeleted",[m,h,t]);n.removeClass("file-uploading").addClass("file-deleted");n.fadeOut("slow",function(){c.cleanZoomCache(b.find("#zoom-"+n.attr("id")));a._clearObjects(n);n.remove();f();k||0!==a.getFileStack().length||(a._setCaption(""),a.reset())})}else y.jqXHR=h,y.response=d,a._showError(d.error,y,"filedeleteerror"),n.removeClass("file-uploading"),e.removeClass("disabled"),f()},error:function(b,c,d){c=a._parseError(a.ajaxOperations.deleteThumb,
b,d);y.jqXHR=b;y.response={};a._showError(c,y,"filedeleteerror");n.removeClass("file-uploading");f()}},a.ajaxDeleteSettings);a._handler(e,"click",function(){if(!a._validateMinCount())return!1;d.ajax(v)})}})},_hideFileIcon:function(){this.overwriteInitial&&this.$captionContainer.find(".kv-caption-icon").hide()},_showFileIcon:function(){this.$captionContainer.find(".kv-caption-icon").show()},_getSize:function(a){var b=parseFloat(a),c=this.fileSizeGetter;if(!d.isNumeric(a)||!d.isNumeric(b))return"";
"function"===typeof c?b=c(b):0===b?b="0.00 B":(a=Math.floor(Math.log(b)/Math.log(1024)),c="B KB MB GB TB PB EB ZB YB".split(" "),b=1*(b/Math.pow(1024,a)).toFixed(2)+" "+c[a]);return this._getLayoutTemplate("size").replace("{sizeText}",b)},_generatePreviewTemplate:function(a,b,d,e,f,k,l,m,n,u,r){var g=this,h=g.slug(d),v="",w=g.previewSettings[a]||g.defaults.previewSettings[a],G=w&&w.width?w.width:"",H=w&&w.height?w.height:"",p=n||g._renderFileFooter(h,l,c.isEmpty(G)?"auto":G,k);k=(l=g._getPreviewIcon(d))&&
g.preferIconicPreview;l=l&&g.preferIconicZoomPreview;n=function(b,k,l,n){var q=l?"zoom-"+f:f,t=g._getPreviewTemplate(b);n=(m||"")+" "+n;g.frameClass&&(n=g.frameClass+" "+n);l&&(n=n.replace(" "+c.SORT_CSS,""));t=g._parseFilePreviewIcon(t,d);"text"===b&&(k=c.htmlEncode(k));return t.replace(/\{previewId}/g,q).replace(/\{caption}/g,h).replace(/\{frameClass}/g,n).replace(/\{type}/g,e).replace(/\{fileindex}/g,u).replace(/\{width}/g,G).replace(/\{height}/g,H).replace(/\{footer}/g,p).replace(/\{data}/g,k).replace(/\{template}/g,
r||a)};u=u||f.slice(f.lastIndexOf("-")+1);g.fileActionSettings.showZoom&&(v=n(l?"other":a,b,!0,"kv-zoom-thumb"));v="\n"+g._getLayoutTemplate("zoomCache").replace("{zoomContent}",v);return n(k?"other":a,b,!1,"kv-preview-thumb")+v},_previewDefault:function(a,b,g){var e=this.$preview;if(this.showPreview){var f=a?a.name:"",k=a?a.type:"",l=a.size||0,m=this.slug(f),n=!0===g&&!this.isUploadable;a=c.objUrl.createObjectURL(a);this._clearDefaultPreview();f=this._generatePreviewTemplate("other",a,f,k,b,n,l);
e.append("\n"+f);this._setThumbAttr(b,m,l);!0===g&&this.isUploadable&&this._setThumbStatus(d("#"+b),"Error")}},_previewFile:function(a,b,c,d,f){if(this.showPreview){var e=this._parseFileType(b),g=b?b.name:"";a=this.slug(g);var h=this.allowedPreviewTypes,n=this.allowedPreviewMimeTypes,u=this.$preview,r=h&&0<=h.indexOf(e);h=b.size||0;c="text"===e||"html"===e||"image"===e?c.target.result:f;f=n&&-1!==n.indexOf(b.type);"html"===e&&this.purifyHtml&&window.DOMPurify&&(c=window.DOMPurify.sanitize(c));r||
f?(e=this._generatePreviewTemplate(e,c,g,b.type,d,!1,h),this._clearDefaultPreview(),u.append("\n"+e),this._validateImage(d,a,b.type)):this._previewDefault(b,d);this._setThumbAttr(d,a,h);this._initSortable()}},_setThumbAttr:function(a,b,c){a=d("#"+a);a.length&&(c=c&&0<c?this._getSize(c):"",a.data({caption:b,size:c}))},_setInitThumbAttr:function(){var a=this.previewCache.data,b=this.previewCache.count(!0);if(0!==b)for(var d=0;d<b;d++){var e=a.config[d];var f=this.previewInitId+"-init_"+d;var k=c.ifSet("caption",
e,c.ifSet("filename",e));e=c.ifSet("size",e);this._setThumbAttr(f,k,e)}},_slugDefault:function(a){return c.isEmpty(a)?"":String(a).replace(/[\-\[\]\/\{}:;#%=\(\)\*\+\?\\\^\$\|<>&"']/g,"_")},_readFiles:function(a){this.reader=new FileReader;var b=this,g=b.$element,e=b.$preview,f=b.reader,k=b.$previewContainer,l=b.$previewStatus,m=b.msgLoading,n=b.msgProgress,u=b.previewInitId,r=a.length,t=b.fileTypeSettings,y=b.filestack.length,v=b.allowedFileTypes,w=v?v.length:0,G=b.allowedFileExtensions,H=c.isEmpty(G)?
"":G.join(", "),p=b.maxFilePreviewSize&&parseFloat(b.maxFilePreviewSize),M=e.length&&(!p||isNaN(p)),A=function(c,e,g,f){var h=d.extend(!0,{},b._getOutData({},{},a),{id:g,index:f}),k={id:g,index:f,file:e,files:a};b._previewDefault(e,g,!0);b.isUploadable&&(b.addToStack(void 0),setTimeout(function(){B(f+1)},100));b._initFileActions();b.removeFromPreviewOnError&&d("#"+g).remove();return b.isUploadable?b._showUploadError(c,h):b._showError(c,k)};b.loadedImages=[];b.totalImagesCount=0;d.each(a,function(a,
c){var d=b.fileTypeSettings.image;d&&d(c.type)&&b.totalImagesCount++});var B=function(d){c.isEmpty(g.attr("multiple"))&&(r=1);if(d>=r)b.isUploadable&&0<b.filestack.length?b._raise("filebatchselected",[b.getFileStack()]):b._raise("filebatchselected",[a]),k.removeClass("file-thumb-loading"),l.html("");else{var h=u+"-"+(y+d),q=a[d],z,I=q.name?b.slug(q.name):"";var E=(q.size||0)/1E3;var K="",T=c.objUrl.createObjectURL(q);var N=0;var L="";if(0<w)for(z=0;z<w;z++){var C=v[z];C=b.msgFileTypes[C]||C;L+=0===
z?C:", "+C}if(!1===I)B(d+1);else if(0===I.length){var D=b.msgInvalidFileName.replace("{name}",c.htmlEncode(q.name));b.isError=A(D,q,h,d)}else if(c.isEmpty(G)||(K=new RegExp("\\.("+G.join("|")+")$","i")),z=E.toFixed(2),0<b.maxFileSize&&E>b.maxFileSize)D=b.msgSizeTooLarge.replace("{name}",I).replace("{size}",z).replace("{maxSize}",b.maxFileSize),b.isError=A(D,q,h,d);else if(null!==b.minFileSize&&E<=c.getNum(b.minFileSize))D=b.msgSizeTooSmall.replace("{name}",I).replace("{size}",z).replace("{minSize}",
b.minFileSize),b.isError=A(D,q,h,d);else{if(!c.isEmpty(v)&&c.isArray(v)){for(z=0;z<v.length;z+=1)C=v[z],C=t[C],N+=C&&"function"===typeof C?C(q.type,q.name)?1:0:0;if(0===N){D=b.msgInvalidFileType.replace("{name}",I).replace("{types}",L);b.isError=A(D,q,h,d);return}}if(0===N&&!c.isEmpty(G)&&c.isArray(G)&&!c.isEmpty(K)&&(K=c.compare(I,K),N+=c.isEmpty(K)?0:K.length,0===N)){D=b.msgInvalidFileExtension.replace("{name}",I).replace("{extensions}",H);b.isError=A(D,q,h,d);return}b.showPreview?!M&&E>p?(b.addToStack(q),
k.addClass("file-thumb-loading"),b._previewDefault(q,h),b._initFileActions(),b._updateFileDetails(r),B(d+1)):(e.length&&void 0!==FileReader?(l.html(m.replace("{index}",d+1).replace("{files}",r)),k.addClass("file-thumb-loading"),f.onerror=function(a){b._errorHandler(a,I)},f.onload=function(a){b._previewFile(d,q,a,h,T);b._initFileActions()},f.onloadend=function(){D=n.replace("{index}",d+1).replace("{files}",r).replace("{percent}",50).replace("{name}",I);setTimeout(function(){l.html(D);b._updateFileDetails(r);
B(d+1)},100);b._raise("fileloaded",[q,h,d,f])},f.onprogress=function(a){a.lengthComputable&&(a=Math.ceil(a.loaded/a.total*100),D=n.replace("{index}",d+1).replace("{files}",r).replace("{percent}",a).replace("{name}",I),setTimeout(function(){l.html(D)},100))},E=t.text,N=t.image,E(q.type,I)?f.readAsText(q,b.textEncoding):N(q.type,I)?f.readAsDataURL(q):f.readAsArrayBuffer(q)):(b._previewDefault(q,h),setTimeout(function(){B(d+1);b._updateFileDetails(r)},100),b._raise("fileloaded",[q,h,d,f])),b.addToStack(q)):
(b.addToStack(q),setTimeout(function(){B(d+1)},100),b._raise("fileloaded",[q,h,d,f]))}}};B(0);b._updateFileDetails(r,!1)},_updateFileDetails:function(a){var b=this.$element,d=this.getFileStack();b=c.isIE(9)&&c.findFileName(b.val())||b[0].files[0]&&b[0].files[0].name||d.length&&d[0].name||"";b=this.slug(b);d=this.isUploadable?d.length:a;var e=this.previewCache.count()+d;d=1<d?this._getMsgSelected(e):b;this.isError?(this.$previewContainer.removeClass("file-thumb-loading"),this.$previewStatus.html(""),
this.$captionContainer.find(".kv-caption-icon").hide()):this._showFileIcon();this._setCaption(d,this.isError);this.$container.removeClass("file-input-new file-input-ajax-new");1===arguments.length&&this._raise("fileselect",[a,b]);this.previewCache.count()&&this._initPreviewActions()},_setThumbStatus:function(a,b){if(this.showPreview){var c="indicator"+b,d=c+"Title",f="file-preview-"+b.toLowerCase(),k=a.find(".file-upload-indicator"),l=this.fileActionSettings;a.removeClass("file-preview-success file-preview-error file-preview-loading");
"Error"===b&&a.find(".kv-file-upload").attr("disabled",!0);"Success"===b&&(a.find(".file-drag-handle").remove(),k.css("margin-left",0));k.html(l[c]);k.attr("title",l[d]);a.addClass(f)}},_setProgressCancelled:function(){this._setProgress(101,this.$progress,this.msgCancelled)},_setProgress:function(a,b,d){var e=Math.min(a,100),g=this.progressUploadThreshold,f=100>=a?this.progressTemplate:this.progressCompleteTemplate;f=100>e?this.progressTemplate:d?this.progressErrorTemplate:f;b=b||this.$progress;c.isEmpty(f)||
(g&&e>g&&100>=a?e=f.replace(/\{percent}/g,g).replace(/\{status}/g,this.msgUploadThreshold):(a=100<a?this.msgUploadEnd:e+"%",e=f.replace(/\{percent}/g,e).replace(/\{status}/g,a)),b.html(e),d&&b.find('[role="progressbar"]').html(d))},_setFileDropZoneTitle:function(){var a=this.$container.find(".file-drop-zone"),b=this.dropZoneTitle;if(this.isClickable){var d=c.isEmpty(this.$element.attr("multiple"))?this.fileSingle:this.filePlural;b+=this.dropZoneClickTitle.replace("{files}",d)}a.find("."+this.dropZoneTitleClass).remove();
this.isUploadable&&this.showPreview&&0!==a.length&&!(0<this.getFileStack().length)&&this.dropZoneEnabled&&(0===a.find(c.FRAMES).length&&c.isEmpty(this.defaultPreviewContent)&&a.prepend('<div class="'+this.dropZoneTitleClass+'">'+b+"</div>"),this.$container.removeClass("file-input-new"),c.addCss(this.$container,"file-input-ajax-new"))},_setAsyncUploadStatus:function(a,b,c){var e=0;this._setProgress(b,d("#"+a).find(".file-thumb-progress"));this.uploadStatus[a]=b;d.each(this.uploadStatus,function(a,
b){e+=b});this._setProgress(Math.floor(e/c))},_validateMinCount:function(){var a=this.isUploadable?this.getFileStack().length:this.$element.get(0).files.length;return this.validateInitialCount&&0<this.minFileCount&&this._getFileCount(a-1)<this.minFileCount?(this._noFilesError({}),!1):!0},_getFileCount:function(a){if(this.validateInitialCount&&!this.overwriteInitial){var b=this.previewCache.count();a+=b}return a},_getFileName:function(a){return a&&a.name?this.slug(a.name):void 0},_getFileNames:function(a){return this.filenames.filter(function(b){return a?
void 0!==b:void 0!==b&&null!==b})},_setPreviewError:function(a,b,c){void 0!==b&&this.updateStack(b,c);this.removeFromPreviewOnError?a.remove():this._setThumbStatus(a,"Error")},_checkDimensions:function(a,b,d,e,f,k,l){var g=this[("Small"===b?"min":"max")+"Image"+k];!c.isEmpty(g)&&d.length&&(d=d[0],d="Width"===k?d.naturalWidth||d.width:d.naturalHeight||d.height,("Small"===b?d>=g:d<=g)||(b=this["msgImage"+k+b].replace("{name}",f).replace("{size}",g),this._showUploadError(b,l),this._setPreviewError(e,
a,null)))},_validateImage:function(a,b,c){var d=this,g=d.$preview,f,l,m,n=g.find("#"+a),u=n.attr("data-fileindex"),r=n.find("img");b=b||"Untitled";r.length&&d._handler(r,"load",function(){l=n.width();m=g.width();l>m&&(r.css("width","100%"),n.css("width","97%"));f={ind:u,id:a};d._checkDimensions(u,"Small",r,n,b,"Width",f);d._checkDimensions(u,"Small",r,n,b,"Height",f);d.resizeImage||(d._checkDimensions(u,"Large",r,n,b,"Width",f),d._checkDimensions(u,"Large",r,n,b,"Height",f));d._raise("fileimageloaded",
[a]);d.loadedImages.push({ind:u,img:r,thumb:n,pid:a,typ:c});d._validateAllImages()})},_validateAllImages:function(){var a,b={val:0},c=this.loadedImages.length;if(c===this.totalImagesCount&&(this._raise("fileimagesloaded"),this.resizeImage))for(a=0;a<this.loadedImages.length;a++)this._getResizedImage(this.loadedImages[a],b,c)},_getResizedImage:function(a,b,c){var e=this,g=d(a.img)[0],f=g.naturalWidth,l=g.naturalHeight,m=1;m=e.maxImageWidth||f;var n=e.maxImageHeight||l,u=!(!f||!l),r=e.imageCanvas,t=
e.imageCanvasContext,y=a.typ,v=a.pid,w=a.ind,G=a.thumb;var H=function(a,b,c){e.isUploadable?e._showUploadError(a,b,c):e._showError(a,b,c);e._setPreviewError(G,w)};if(!e.filestack[w]||!u||f<=m&&l<=n)if(u&&e.filestack[w]&&e._raise("fileimageresized",[v,w]),b.val++,b.val===c&&e._raise("fileimagesresized"),!u){H(e.msgImageResizeError,{id:v,index:w},"fileimageresizeerror");return}y=y||e.resizeDefaultImageType;a=f>m;u=l>n;m="width"===e.resizePreference?a?m/f:u?n/l:1:u?n/l:a?m/f:1;e._resetCanvas();f*=m;
l*=m;r.width=f;r.height=l;try{t.drawImage(g,0,0,f,l),r.toBlob(function(a){e.filestack[w]=a;e._raise("fileimageresized",[v,w]);b.val++;b.val===c&&e._raise("fileimagesresized",[void 0,void 0]);a instanceof Blob||H(e.msgImageResizeError,{id:v,index:w},"fileimageresizeerror")},y,e.resizeQuality)}catch(p){b.val++,b.val===c&&e._raise("fileimagesresized",[void 0,void 0]),g=e.msgImageResizeException.replace("{errors}",p.message),H(g,{id:v,index:w},"fileimageresizeexception")}},_initBrowse:function(a){this.showBrowse?
(this.$btnFile=a.find(".btn-file"),this.$btnFile.append(this.$element)):this.$element.hide()},_initCaption:function(){var a=this.initialCaption||"";if(this.overwriteInitial||c.isEmpty(a))return this.$caption.html(""),!1;this._setCaption(a);return!0},_setCaption:function(a,b){var f=this.getFileStack();if(this.$caption.length){if(b){var e=d("<div>"+this.msgValidationError+"</div>").text();var h=(h=f.length)?1===h&&f[0]?this._getFileNames()[0]:this._getMsgSelected(h):this._getMsgSelected(this.msgNo);
h='<span class="'+this.msgValidationErrorClass+'">'+this.msgValidationErrorIcon+(c.isEmpty(a)?h:a)+"</span>"}else{if(c.isEmpty(a))return;e=d("<div>"+a+"</div>").text();h=this._getLayoutTemplate("fileIcon")+e}this.$caption.html(h);this.$caption.attr("title",e);this.$captionContainer.find(".file-caption-ellipsis").attr("title",e)}},_createContainer:function(){var a=d(document.createElement("div")).attr({"class":"file-input file-input-new"}).html(this._renderMain());this.$element.before(a);this._initBrowse(a);
this.theme&&a.addClass("theme-"+this.theme);return a},_refreshContainer:function(){var a=this.$container;a.before(this.$element);a.html(this._renderMain());this._initBrowse(a)},_renderMain:function(){var a=this.isUploadable&&this.dropZoneEnabled?" file-drop-zone":"file-drop-disabled",b=this.showClose?this._getLayoutTemplate("close"):"";a=this.showPreview?this._getLayoutTemplate("preview").replace(/\{class}/g,this.previewClass).replace(/\{dropClass}/g,a):"";var c=this.captionTemplate.replace(/\{class}/g,
(this.isDisabled?this.captionClass+" file-caption-disabled":this.captionClass)+" kv-fileinput-caption");return this.mainTemplate.replace(/\{class}/g,this.mainClass+(!this.showBrowse&&this.showCaption?" no-browse":"")).replace(/\{preview}/g,a).replace(/\{close}/g,b).replace(/\{caption}/g,c).replace(/\{upload}/g,this._renderButton("upload")).replace(/\{remove}/g,this._renderButton("remove")).replace(/\{cancel}/g,this._renderButton("cancel")).replace(/\{browse}/g,this._renderButton("browse"))},_renderButton:function(a){var b=
this._getLayoutTemplate("btnDefault"),d=this[a+"Class"],e=this[a+"Title"],f=this[a+"Icon"],k=this[a+"Label"],l=this.isDisabled?" disabled":"",m="button";switch(a){case "remove":if(!this.showRemove)return"";break;case "cancel":if(!this.showCancel)return"";d+=" hide";break;case "upload":if(!this.showUpload)return"";this.isUploadable&&!this.isDisabled?b=this._getLayoutTemplate("btnLink").replace("{href}",this.uploadUrl):m="submit";break;case "browse":if(!this.showBrowse)return"";b=this._getLayoutTemplate("btnBrowse");
break;default:return""}d+="browse"===a?" btn-file":" fileinput-"+a+" fileinput-"+a+"-button";c.isEmpty(k)||(k=' <span class="'+this.buttonLabelClass+'">'+k+"</span>");return b.replace("{type}",m).replace("{css}",d).replace("{title}",e).replace("{status}",l).replace("{icon}",f).replace("{label}",k)},_renderThumbProgress:function(){return'<div class="file-thumb-progress hide">'+this.progressTemplate.replace(/\{percent}/g,"0").replace(/\{status}/g,this.msgUploadBegin)+"</div>"},_renderFileFooter:function(a,
b,d,e){var f=this.fileActionSettings,g=f.showRemove,l=f.showDrag,m=f.showUpload,n=f.showZoom,u=this._getLayoutTemplate("footer"),r=e?f.indicatorError:f.indicatorNew;e=e?f.indicatorErrorTitle:f.indicatorNewTitle;b=this._getSize(b);a=this.isUploadable?u.replace(/\{actions}/g,this._renderFileActions(m,g,n,l,!1,!1,!1)).replace(/\{caption}/g,a).replace(/\{size}/g,b).replace(/\{width}/g,d).replace(/\{progress}/g,this._renderThumbProgress()).replace(/\{indicator}/g,r).replace(/\{indicatorTitle}/g,e):u.replace(/\{actions}/g,
this._renderFileActions(!1,!1,n,l,!1,!1,!1)).replace(/\{caption}/g,a).replace(/\{size}/g,b).replace(/\{width}/g,d).replace(/\{progress}/g,"").replace(/\{indicator}/g,r).replace(/\{indicatorTitle}/g,e);return a=c.replaceTags(a,this.previewThumbTags)},_renderFileActions:function(a,b,c,d,f,k,l,m){if(!(a||b||c||d))return"";k=!1===k?"":' data-url="'+k+'"';var e=!1===l?"":' data-key="'+l+'"',g=l="",h="",t="",y=this._getLayoutTemplate("actions"),v=this.fileActionSettings,w=this.otherActionButtons.replace(/\{dataKey}/g,
e);f=f?v.removeClass+" disabled":v.removeClass;b&&(l=this._getLayoutTemplate("actionDelete").replace(/\{removeClass}/g,f).replace(/\{removeIcon}/g,v.removeIcon).replace(/\{removeTitle}/g,v.removeTitle).replace(/\{dataUrl}/g,k).replace(/\{dataKey}/g,e));a&&(g=this._getLayoutTemplate("actionUpload").replace(/\{uploadClass}/g,v.uploadClass).replace(/\{uploadIcon}/g,v.uploadIcon).replace(/\{uploadTitle}/g,v.uploadTitle));c&&(h=this._getLayoutTemplate("actionZoom").replace(/\{zoomClass}/g,v.zoomClass).replace(/\{zoomIcon}/g,
v.zoomIcon).replace(/\{zoomTitle}/g,v.zoomTitle));d&&m&&(a="drag-handle-init "+v.dragClass,t=this._getLayoutTemplate("actionDrag").replace(/\{dragClass}/g,a).replace(/\{dragTitle}/g,v.dragTitle).replace(/\{dragIcon}/g,v.dragIcon));return y.replace(/\{delete}/g,l).replace(/\{upload}/g,g).replace(/\{zoom}/g,h).replace(/\{drag}/g,t).replace(/\{other}/g,w)},_browse:function(a){this._raise("filebrowse");a&&a.isDefaultPrevented()||(this.isError&&!this.isUploadable&&this.clear(),this.$captionContainer.focus())},
_change:function(a){var b=this.$element;if(!this.isUploadable&&c.isEmpty(b.val())&&this.fileInputCleared)this.fileInputCleared=!1;else{this.fileInputCleared=!1;var f=1<arguments.length;var e=this.isUploadable;var h=0;var k=f?a.originalEvent.dataTransfer.files:b.get(0).files,l=this.filestack.length;b=c.isEmpty(b.attr("multiple"))&&0<l;var m=0;this.reader=null;this._resetUpload();this._hideFileIcon();this.isUploadable&&this.$container.find(".file-drop-zone ."+this.dropZoneTitleClass).remove();if(f)for(f=
[];k[h];){var n=k[h];n.type||0!==n.size%4096?f.push(n):m++;h++}else f=void 0===a.target.files?a.target&&a.target.value?[{name:a.target.value.replace(/^.+\\/,"")}]:[]:a.target.files;if(c.isEmpty(f)||0===f.length)e||this.clear(),this._showFolderError(m),this._raise("fileselectnone");else{this._resetErrors();n=f.length;h=this._getFileCount(this.isUploadable?this.getFileStack().length+n:n);if(0<this.maxFileCount&&h>this.maxFileCount){if(!this.autoReplace||n>this.maxFileCount){e=this.autoReplace&&n>this.maxFileCount?
n:h;e=this.msgFilesTooMany.replace("{m}",this.maxFileCount).replace("{n}",e);l=d.extend(!0,{},this._getOutData({},{},k),{id:null,index:null});k={id:null,index:null,file:null,files:k};this.isError=this.isUploadable?this._showUploadError(e,l):this._showError(e,k);this.$captionContainer.find(".kv-caption-icon").hide();this._setCaption("",!0);this.$container.removeClass("file-input-new file-input-ajax-new");return}h>this.maxFileCount&&this._resetPreviewThumbs(e)}else!e||b?(this._resetPreviewThumbs(!1),
b&&this.clearStack()):!e||0!==l||this.previewCache.count()&&!this.overwriteInitial||this._resetPreviewThumbs(!0);this.isPreviewable?this._readFiles(f):this._updateFileDetails(1);this._showFolderError(m)}}},_abort:function(a){return this.ajaxAborted&&"object"===typeof this.ajaxAborted&&void 0!==this.ajaxAborted.message?(a=d.extend(!0,{},this._getOutData(),a),a.abortData=this.ajaxAborted.data||{},a.abortMessage=this.ajaxAborted.message,this.cancel(),this._setProgress(101,this.$progress,this.msgCancelled),
this._showUploadError(this.ajaxAborted.message,a,"filecustomerror"),!0):!1},_resetFileStack:function(){var a=this,b=0,c=[],e=[];a._getThumbs().each(function(){var f=d(this),g=f.attr("data-fileindex"),l=a.filestack[g];-1!==g&&(void 0!==l?(c[b]=l,e[b]=a._getFileName(l),f.attr({id:a.previewInitId+"-"+b,"data-fileindex":b}),b++):f.attr({"data-fileindex":"-1"}))});a.filestack=c;a.filenames=e},clearStack:function(){this.filestack=[];this.filenames=[];return this.$element},updateStack:function(a,b){this.filestack[a]=
b;this.filenames[a]=this._getFileName(b);return this.$element},addToStack:function(a){this.filestack.push(a);this.filenames.push(this._getFileName(a));return this.$element},getFileStack:function(a){return this.filestack.filter(function(b){return a?void 0!==b:void 0!==b&&null!==b})},getFilesCount:function(){var a=this.isUploadable?this.getFileStack().length:this.$element.get(0).files.length;return this._getFileCount(a)},lock:function(){this._resetErrors();this.disable();this.showRemove&&c.addCss(this.$container.find(".fileinput-remove"),
"hide");this.showCancel&&this.$container.find(".fileinput-cancel").removeClass("hide");this._raise("filelock",[this.filestack,this._getExtraData()]);return this.$element},unlock:function(a){void 0===a&&(a=!0);this.enable();this.showCancel&&c.addCss(this.$container.find(".fileinput-cancel"),"hide");this.showRemove&&this.$container.find(".fileinput-remove").removeClass("hide");a&&this._resetFileStack();this._raise("fileunlock",[this.filestack,this._getExtraData()]);return this.$element},cancel:function(){var a=
this,b=a.ajaxRequests,c=b.length,e;if(0<c)for(e=0;e<c;e+=1)a.cancelling=!0,b[e].abort();a._setProgressCancelled();a._getThumbs().each(function(){var b=d(this),c=b.attr("data-fileindex");b.removeClass("file-uploading");void 0!==a.filestack[c]&&(b.find(".kv-file-upload").removeClass("disabled").removeAttr("disabled"),b.find(".kv-file-remove").removeClass("disabled").removeAttr("disabled"));a.unlock()});return a.$element},clear:function(){var a=this;if(a._raise("fileclear")){a.$btnUpload.removeAttr("disabled");
a._getThumbs().find("video,audio,img").each(function(){c.cleanMemory(d(this))});a._resetUpload();a.clearStack();a._clearFileInput();a._resetErrors(!0);if(a._hasInitialPreview())a._showFileIcon(),a._resetPreview(),a._initPreviewActions(),a.$container.removeClass("file-input-new");else{a._getThumbs().each(function(){a._clearObjects(d(this))});a.isUploadable&&(a.previewCache.data={});a.$preview.html("");var b=!a.overwriteInitial&&0<a.initialCaption.length?a.initialCaption:"";a.$caption.html(b);a.$caption.attr("title",
"");c.addCss(a.$container,"file-input-new");a._validateDefaultPreview()}0===a.$container.find(c.FRAMES).length&&(a._initCaption()||a.$captionContainer.find(".kv-caption-icon").hide());a._hideFileIcon();a._raise("filecleared");a.$captionContainer.focus();a._setFileDropZoneTitle();return a.$element}},reset:function(){if(this._raise("filereset"))return this._resetPreview(),this.$container.find(".fileinput-filename").text(""),c.addCss(this.$container,"file-input-new"),(this.$preview.find(c.FRAMES).length||
this.isUploadable&&this.dropZoneEnabled)&&this.$container.removeClass("file-input-new"),this._setFileDropZoneTitle(),this.clearStack(),this.formdata={},this.$element},disable:function(){this.isDisabled=!0;this._raise("filedisabled");this.$element.attr("disabled","disabled");this.$container.find(".kv-fileinput-caption").addClass("file-caption-disabled");this.$container.find(".btn-file, .fileinput-upload, .file-preview-frame button").attr("disabled",!0);this._initDragDrop();return this.$element},enable:function(){this.isDisabled=
!1;this._raise("fileenabled");this.$element.removeAttr("disabled");this.$container.find(".kv-fileinput-caption").removeClass("file-caption-disabled");this.$container.find(".btn-file,  .fileinput-upload, .file-preview-frame button").removeAttr("disabled");this._initDragDrop();return this.$element},upload:function(){var a=this.getFileStack().length,b={},f=!d.isEmptyObject(this._getExtraData());if(this.isUploadable&&!this.isDisabled)if(0<this.minFileCount&&this._getFileCount(a)<this.minFileCount)this._noFilesError(b);
else if(this._resetUpload(),0!==a||f)if(this.$progress.removeClass("hide"),this.uploadCount=0,this.uploadStatus={},this.uploadLog=[],this.lock(),this._setProgress(2),0===a&&f)this._uploadExtraOnly();else if(a=this.filestack.length,this.hasInitData=!1,this.uploadAsync){b=this._getOutData();this._raise("filebatchpreupload",[b]);this.fileBatchCompleted=!1;this.uploadCache={content:[],config:[],tags:[],append:!0};this.uploadAsyncCount=this.getFileStack().length;for(b=0;b<a;b++)this.uploadCache.content[b]=
null,this.uploadCache.config[b]=null,this.uploadCache.tags[b]=null;this.$preview.find(".file-preview-initial").removeClass(c.SORT_CSS);this._initSortable();this.cacheInitialPreview=this.getPreview();for(b=0;b<a;b++)void 0!==this.filestack[b]&&this._uploadSingle(b,this.filestack,!0)}else return this._uploadBatch(),this.$element;else this._showUploadError(this.msgUploadEmpty)},destroy:function(){var a=this.$form,b=this.$container,c=this.$element,e=this.namespace;d(document).off(e);d(window).off(e);
a&&a.length&&a.off(e);c.insertBefore(b).off(e).removeData();b.off().remove();return c},refresh:function(a){var b=this.$element;a=a?d.extend(!0,{},this.options,a):this.options;this.destroy();b.fileinput(a);b.val()&&b.trigger("change.fileinput");return b},zoom:function(a){var b=d("#"+a),f=this.$modal;b.length?(c.initModal(f),f.html(this._getModalContent()),this._setZoomContent(b),f.modal("show"),this._initZoomButtons()):this._log('Cannot zoom to detailed preview! Invalid frame with id: "'+a+'".')},
getPreview:function(){return{content:this.initialPreview,config:this.initialPreviewConfig,tags:this.initialPreviewThumbTags}}};d.fn.fileinput=function(a){if(c.hasFileAPISupport()||c.isIE(9)){var b=Array.apply(null,arguments),g=[];b.shift();this.each(function(){var e=d(this),h=e.data("fileinput"),k="object"===typeof a&&a,l=k.theme||e.data("theme"),m={},n={},u=k.language||e.data("language")||d.fn.fileinput.defaults.language||"en";h||(l&&(n=d.fn.fileinputThemes[l]||{}),"en"===u||c.isEmpty(d.fn.fileinputLocales[u])||
(m=d.fn.fileinputLocales[u]||{}),h=d.extend(!0,{},d.fn.fileinput.defaults,n,d.fn.fileinputLocales.en,m,k,e.data()),h=new f(this,h),e.data("fileinput",h));"string"===typeof a&&g.push(h[a].apply(h,b))});switch(g.length){case 0:return this;case 1:return g[0];default:return g}}};d.fn.fileinput.defaults={language:"en",showCaption:!0,showBrowse:!0,showPreview:!0,showRemove:!0,showUpload:!0,showCancel:!0,showClose:!0,showUploadedThumbs:!0,browseOnZoneClick:!1,autoReplace:!1,previewClass:"",captionClass:"",
frameClass:"krajee-default",mainClass:"file-caption-main",mainTemplate:null,purifyHtml:!0,fileSizeGetter:null,initialCaption:"",initialPreview:[],initialPreviewDelimiter:"*$$*",initialPreviewAsData:!1,initialPreviewFileType:"image",initialPreviewConfig:[],initialPreviewThumbTags:[],previewThumbTags:{},initialPreviewShowDelete:!0,removeFromPreviewOnError:!1,deleteUrl:"",deleteExtraData:{},overwriteInitial:!0,previewZoomButtonIcons:{prev:'<i class="glyphicon glyphicon-triangle-left"></i>',next:'<i class="glyphicon glyphicon-triangle-right"></i>',
toggleheader:'<i class="glyphicon glyphicon-resize-vertical"></i>',fullscreen:'<i class="glyphicon glyphicon-fullscreen"></i>',borderless:'<i class="glyphicon glyphicon-resize-full"></i>',close:'<i class="glyphicon glyphicon-remove"></i>'},previewZoomButtonClasses:{prev:"btn btn-navigate",next:"btn btn-navigate",toggleheader:"btn btn-default btn-header-toggle",fullscreen:"btn btn-default",borderless:"btn btn-default",close:"btn btn-default"},preferIconicPreview:!1,preferIconicZoomPreview:!1,allowedPreviewTypes:void 0,
allowedPreviewMimeTypes:null,allowedFileTypes:null,allowedFileExtensions:null,defaultPreviewContent:null,customLayoutTags:{},customPreviewTags:{},previewFileIcon:'<i class="glyphicon glyphicon-file"></i>',previewFileIconClass:"file-other-icon",previewFileIconSettings:{},previewFileExtSettings:{},buttonLabelClass:"hidden-xs",browseIcon:'<i class="glyphicon glyphicon-folder-open"></i>&nbsp;',browseClass:"btn btn-primary",removeIcon:'<i class="glyphicon glyphicon-trash"></i>',removeClass:"btn btn-default",
cancelIcon:'<i class="glyphicon glyphicon-ban-circle"></i>',cancelClass:"btn btn-default",uploadIcon:'<i class="glyphicon glyphicon-upload"></i>',uploadClass:"btn btn-default",uploadUrl:null,uploadAsync:!0,uploadExtraData:{},zoomModalHeight:480,minImageWidth:null,minImageHeight:null,maxImageWidth:null,maxImageHeight:null,resizeImage:!1,resizePreference:"width",resizeQuality:.92,resizeDefaultImageType:"image/jpeg",minFileSize:0,maxFileSize:0,maxFilePreviewSize:256E4,minFileCount:0,maxFileCount:0,validateInitialCount:!1,
msgValidationErrorClass:"text-danger",msgValidationErrorIcon:'<i class="glyphicon glyphicon-exclamation-sign"></i> ',msgErrorClass:"file-error-message",progressThumbClass:"progress-bar progress-bar-success progress-bar-striped active",progressClass:"progress-bar progress-bar-success progress-bar-striped active",progressCompleteClass:"progress-bar progress-bar-success",progressErrorClass:"progress-bar progress-bar-danger",progressUploadThreshold:99,previewFileType:"image",elCaptionContainer:null,elCaptionText:null,
elPreviewContainer:null,elPreviewImage:null,elPreviewStatus:null,elErrorContainer:null,errorCloseButton:'<span class="close kv-error-close">&times;</span>',slugCallback:null,dropZoneEnabled:!0,dropZoneTitleClass:"file-drop-zone-title",fileActionSettings:{},otherActionButtons:"",textEncoding:"UTF-8",ajaxSettings:{},ajaxDeleteSettings:{},showAjaxErrorDetails:!0};d.fn.fileinputLocales.en={fileSingle:"file",filePlural:"files",browseLabel:"Browse &hellip;",removeLabel:"Remove",removeTitle:"Clear selected files",
cancelLabel:"Cancel",cancelTitle:"Abort ongoing upload",uploadLabel:"Upload",uploadTitle:"Upload selected files",msgNo:"No",msgNoFilesSelected:"No files selected",msgCancelled:"Cancelled",msgZoomModalHeading:"Detailed Preview",msgSizeTooSmall:'File "{name}" (<b>{size} KB</b>) is too small and must be larger than <b>{minSize} KB</b>.',msgSizeTooLarge:'File "{name}" (<b>{size} KB</b>) exceeds maximum allowed upload size of <b>{maxSize} KB</b>.',msgFilesTooLess:"You must select at least <b>{n}</b> {files} to upload.",
msgFilesTooMany:"Number of files selected for upload <b>({n})</b> exceeds maximum allowed limit of <b>{m}</b>.",msgFileNotFound:'File "{name}" not found!',msgFileSecured:'Security restrictions prevent reading the file "{name}".',msgFileNotReadable:'File "{name}" is not readable.',msgFilePreviewAborted:'File preview aborted for "{name}".',msgFilePreviewError:'An error occurred while reading the file "{name}".',msgInvalidFileName:'Invalid or unsupported characters in file name "{name}".',msgInvalidFileType:'Invalid type for file "{name}". Only "{types}" files are supported.',
msgInvalidFileExtension:'Invalid extension for file "{name}". Only "{extensions}" files are supported.',msgFileTypes:{image:"image",html:"HTML",text:"text",video:"video",audio:"audio",flash:"flash",pdf:"PDF",object:"object"},msgUploadAborted:"The file upload was aborted",msgUploadThreshold:"Processing...",msgUploadBegin:"Initializing...",msgUploadEnd:"Done",msgUploadEmpty:"No valid data available for upload.",msgValidationError:"Validation Error",msgLoading:"Loading file {index} of {files} &hellip;",
msgProgress:"Loading file {index} of {files} - {name} - {percent}% completed.",msgSelected:"{n} {files} selected",msgFoldersNotAllowed:"Drag & drop files only! {n} folder(s) dropped were skipped.",msgImageWidthSmall:'Width of image file "{name}" must be at least {size} px.',msgImageHeightSmall:'Height of image file "{name}" must be at least {size} px.',msgImageWidthLarge:'Width of image file "{name}" cannot exceed {size} px.',msgImageHeightLarge:'Height of image file "{name}" cannot exceed {size} px.',
msgImageResizeError:"Could not get the image dimensions to resize.",msgImageResizeException:"Error while resizing the image.<pre>{errors}</pre>",msgAjaxError:"Something went wrong with the {operation} operation. Please try again later!",msgAjaxProgressError:"{operation} failed",ajaxOperations:{deleteThumb:"file delete",uploadThumb:"file upload",uploadBatch:"batch file upload",uploadExtra:"form data upload"},dropZoneTitle:"Drag & drop files here &hellip;",dropZoneClickTitle:"<br>(or click to select {files})",
previewZoomButtonTitles:{prev:"View previous file",next:"View next file",toggleheader:"Toggle header",fullscreen:"Toggle full screen",borderless:"Toggle borderless mode",close:"Close detailed preview"}};d.fn.fileinput.Constructor=f;d(document).ready(function(){var a=d("input.file[type=file]");a.length&&a.fileinput()})});
(function(d){d.fn.fileinputLocales.fr={fileSingle:"fichier",filePlural:"fichiers",browseLabel:"Parcourir&hellip;",removeLabel:"Retirer",removeTitle:"Retirer les fichiers s\u00e9lectionn\u00e9s",cancelLabel:"Annuler",cancelTitle:"Annuler l'envoi en cours",uploadLabel:"Transf\u00e9rer",uploadTitle:"Transf\u00e9rer les fichiers s\u00e9lectionn\u00e9s",msgNo:"Non",msgNoFilesSelected:"",msgCancelled:"Annul\u00e9",msgZoomModalHeading:"Aper\u00e7u d\u00e9taill\u00e9",msgSizeTooSmall:'File "{name}" (<b>{size} KB</b>) is too small and must be larger than <b>{minSize} KB</b>.',
msgSizeTooLarge:'Le fichier "{name}" (<b>{size} Ko</b>) d\u00e9passe la taille maximale autoris\u00e9e qui est de <b>{maxSize} Ko</b>.',msgFilesTooLess:"Vous devez s\u00e9lectionner au moins <b>{n}</b> {files} \u00e0 transmettre.",msgFilesTooMany:"Le nombre de fichier s\u00e9lectionn\u00e9 <b>({n})</b> d\u00e9passe la quantit\u00e9 maximale autoris\u00e9e qui est de <b>{m}</b>.",msgFileNotFound:'Le fichier "{name}" est introuvable !',msgFileSecured:'Des restrictions de s\u00e9curit\u00e9 vous emp\u00eachent d\'acc\u00e9der au fichier "{name}".',
msgFileNotReadable:'Le fichier "{name}" est illisble.',msgFilePreviewAborted:'Pr\u00e9visualisation du fichier "{name}" annul\u00e9e.',msgFilePreviewError:'Une erreur est survenue lors de la lecture du fichier "{name}".',msgInvalidFileName:'Invalid or unsupported characters in file name "{name}".',msgInvalidFileType:'Type de document invalide pour "{name}". Seulement les documents de type "{types}" sont autoris\u00e9s.',msgInvalidFileExtension:'Extension invalide pour le fichier "{name}". Seules les extensions "{extensions}" sont autoris\u00e9es.',
msgFileTypes:{image:"image",html:"HTML",text:"text",video:"video",audio:"audio",flash:"flash",pdf:"PDF",object:"object"},msgUploadAborted:"Le t\u00e9l\u00e9chargement du fichier a \u00e9t\u00e9 interrompu",msgUploadThreshold:"Processing...",msgUploadBegin:"Initializing...",msgUploadEnd:"Done",msgUploadEmpty:"No valid data available for upload.",msgValidationError:"Erreur de validation",msgLoading:"Transmission du fichier {index} sur {files}&hellip;",msgProgress:"Transmission du fichier {index} sur {files} - {name} - {percent}% faits.",
msgSelected:"{n} {files} s\u00e9lectionn\u00e9(s)",msgFoldersNotAllowed:"Glissez et d\u00e9posez uniquement des fichiers ! {n} r\u00e9pertoire(s) exclu(s).",msgImageWidthSmall:'Largeur de fichier image "{name}" doit \u00eatre d\'au moins {size} px.',msgImageHeightSmall:'Hauteur de fichier image "{name}" doit \u00eatre d\'au moins {size} px.',msgImageWidthLarge:'Largeur de fichier image "{name}" ne peut pas d\u00e9passer {size} px.',msgImageHeightLarge:'Hauteur de fichier image "{name}" ne peut pas d\u00e9passer {size} px.',
msgImageResizeError:"Impossible d'obtenir les dimensions de l'image \u00e0 redimensionner.",msgImageResizeException:"Erreur lors du redimensionnement de l'image.<pre>{errors}</pre>",msgAjaxError:"Something went wrong with the {operation} operation. Please try again later!",msgAjaxProgressError:"{operation} failed",ajaxOperations:{deleteThumb:"file delete",uploadThumb:"file upload",uploadBatch:"batch file upload",uploadExtra:"form data upload"},dropZoneTitle:"Glissez et d\u00e9posez les fichiers ici&hellip;",
dropZoneClickTitle:"<br>(or click to select {files})",fileActionSettings:{removeTitle:"Supprimer le fichier",uploadTitle:"T\u00e9l\u00e9charger un fichier",zoomTitle:"Voir les d\u00e9tails",dragTitle:"Move / Rearrange",indicatorNewTitle:"Pas encore t\u00e9l\u00e9charg\u00e9",indicatorSuccessTitle:"Post\u00e9",indicatorErrorTitle:"Ajouter erreur",indicatorLoadingTitle:"ajout ..."},previewZoomButtonTitles:{prev:"View previous file",next:"View next file",toggleheader:"Toggle header",fullscreen:"Toggle full screen",
borderless:"Toggle borderless mode",close:"Close detailed preview"}}})(window.jQuery);
(function(d){d.fn.fileinputLocales.es={fileSingle:"archivo",filePlural:"archivos",browseLabel:"Examinar &hellip;",removeLabel:"Quitar",removeTitle:"Quitar archivos seleccionados",cancelLabel:"Cancelar",cancelTitle:"Abortar la subida en curso",uploadLabel:"Subir archivo",uploadTitle:"Subir archivos seleccionados",msgNo:"No",msgNoFilesSelected:"No hay archivos seleccionados",msgCancelled:"Cancelado",msgZoomModalHeading:"Vista previa detallada",msgSizeTooSmall:'El archivo "{name}" (<b>{size} KB</b>) es demasiado peque\u00f1o y debe ser mayor de <b>{minSize} KB</b>.',
msgSizeTooLarge:'El archivo "{name}" (<b>{size} KB</b>) excede el tama\u00f1o m\u00e1ximo permitido de <b>{maxSize} KB</b>.',msgFilesTooLess:"Debe seleccionar al menos <b>{n}</b> {files} a cargar.",msgFilesTooMany:"El n\u00famero de archivos seleccionados a cargar <b>({n})</b> excede el l\u00edmite m\u00e1ximo permitido de <b>{m}</b>.",msgFileNotFound:'Archivo "{name}" no encontrado.',msgFileSecured:'No es posible acceder al archivo "{name}" porque estar\u00e1 siendo usado por otra aplicaci\u00f3n o no tengamos permisos de lectura.',
msgFileNotReadable:'No es posible acceder al archivo "{name}".',msgFilePreviewAborted:'Previsualizaci\u00f3n del archivo "{name}" cancelada.',msgFilePreviewError:'Ocurri\u00f3 un error mientras se le\u00eda el archivo "{name}".',msgInvalidFileName:'Caracteres no v\u00e1lidos o no soportados en el nombre de archivo "{name}".',msgInvalidFileType:'Tipo de archivo no v\u00e1lido para "{name}". S\u00f3lo se permiten archivos de tipo "{types}".',msgInvalidFileExtension:'Extensi\u00f3n de archivo no v\u00e1lido para "{name}". S\u00f3lo se permiten archivos "{extensions}".',
msgFileTypes:{image:"image",html:"HTML",text:"text",video:"video",audio:"audio",flash:"flash",pdf:"PDF",object:"object"},msgUploadAborted:"La carga de archivos se ha cancelado",msgUploadThreshold:"Procesando...",msgUploadBegin:"Inicializando...",msgUploadEnd:"Hecho",msgUploadEmpty:"No existen datos v\u00e1lidos para el env\u00edo.",msgValidationError:"Error de validaci\u00f3n",msgLoading:"Subiendo archivo {index} de {files} &hellip;",msgProgress:"Subiendo archivo {index} de {files} - {name} - {percent}% completado.",
msgSelected:"{n} {files} seleccionado(s)",msgFoldersNotAllowed:"Arrastre y suelte \u00fanicamente archivos. Omitida(s) {n} carpeta(s).",msgImageWidthSmall:'El ancho de la imagen "{name}" debe ser de al menos {size} px.',msgImageHeightSmall:'La altura de la imagen "{name}" debe ser de al menos {size} px.',msgImageWidthLarge:'El ancho de la imagen "{name}" no puede exceder de {size} px.',msgImageHeightLarge:'La altura de la imagen "{name}" no puede exceder de {size} px.',msgImageResizeError:"No se pudieron obtener las dimensiones de la imagen para cambiar el tama\u00f1o.",
msgImageResizeException:"Error al cambiar el tama\u00f1o de la imagen.<pre>{errors}</pre>",msgAjaxError:"Algo ha ido mal con la operaci\u00f3n {operation}. Por favor, int\u00e9ntelo de nuevo mas tarde.",msgAjaxProgressError:"La operaci\u00f3n {operation} ha fallado",ajaxOperations:{deleteThumb:"Archivo borrado",uploadThumb:"Archivo subido",uploadBatch:"Datos subidos en lote",uploadExtra:"Datos do formulario subidos "},dropZoneTitle:"Arrastre y suelte aqu\u00ed los archivos &hellip;",dropZoneClickTitle:"<br>(o haga clic para seleccionar {files})",
fileActionSettings:{removeTitle:"Eliminar archivo",uploadTitle:"Subir archivo",zoomTitle:"Ver detalles",dragTitle:"Mover / Reordenar",indicatorNewTitle:"No subido todav\u00eda",indicatorSuccessTitle:"Subido",indicatorErrorTitle:"Error al subir",indicatorLoadingTitle:"Subiendo..."},previewZoomButtonTitles:{prev:"Ver archivo anterior",next:"Ver archivo siguiente",toggleheader:"Mostrar encabezado",fullscreen:"Mostrar a pantalla completa",borderless:"Activar el modo sin bordes",close:"Cerrar vista detallada"}}})(window.jQuery);
(function(d){d.fn.fileinputThemes.explorer={layoutTemplates:{preview:'<div class="file-preview {class}">\n    {close}    <div class="{dropClass}">\n    <table class="table table-bordered table-hover"><tbody class="file-preview-thumbnails">\n    </tbody></table>\n    <div class="clearfix"></div>    <div class="file-preview-status text-center text-success"></div>\n    <div class="kv-fileinput-error"></div>\n    </div>\n</div>',footer:'<td class="file-details-cell"><div class="explorer-caption" title="{caption}">{caption}</div> {size}{progress}</td><td class="file-actions-cell">{indicator} {actions}</td>',
actions:'{drag}\n<div class="file-actions">\n    <div class="file-footer-buttons">\n        {upload} {delete} {zoom} {other}     </div>\n</div>',zoomCache:'<tr style="display:none" class="kv-zoom-cache-theme"><td><table class="kv-zoom-cache">{zoomContent}</table></td></tr>'},previewMarkupTags:{tagBefore1:'<tr class="file-preview-frame {frameClass}" id="{previewId}" data-fileindex="{fileindex}" data-template="{template}"><td class="kv-file-content">\n',tagBefore2:'<tr class="file-preview-frame {frameClass}" id="{previewId}" data-fileindex="{fileindex}" data-template="{template}" title="{caption}"><td class="kv-file-content">\n',
tagAfter:"</td>\n{footer}</tr>\n"},previewSettings:{image:{height:"60px"},html:{width:"100px",height:"60px"},text:{width:"100px",height:"60px"},video:{width:"auto",height:"60px"},audio:{width:"auto",height:"60px"},flash:{width:"100%",height:"60px"},object:{width:"100%",height:"60px"},pdf:{width:"100px",height:"60px"},other:{width:"100%",height:"60px"}},frameClass:"explorer-frame"}})(window.jQuery);
